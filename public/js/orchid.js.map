{"version":3,"sources":["webpack:///./node_modules/@stimulus/core/dist/index.js","webpack:///./node_modules/@stimulus/core/dist/src/action.js","webpack:///./node_modules/@stimulus/core/dist/src/action_descriptor.js","webpack:///./node_modules/@stimulus/core/dist/src/application.js","webpack:///./node_modules/@stimulus/core/dist/src/binding.js","webpack:///./node_modules/@stimulus/core/dist/src/binding_observer.js","webpack:///./node_modules/@stimulus/core/dist/src/context.js","webpack:///./node_modules/@stimulus/core/dist/src/controller.js","webpack:///./node_modules/@stimulus/core/dist/src/data_map.js","webpack:///./node_modules/@stimulus/core/dist/src/definition.js","webpack:///./node_modules/@stimulus/core/dist/src/dispatcher.js","webpack:///./node_modules/@stimulus/core/dist/src/event_listener.js","webpack:///./node_modules/@stimulus/core/dist/src/module.js","webpack:///./node_modules/@stimulus/core/dist/src/router.js","webpack:///./node_modules/@stimulus/core/dist/src/schema.js","webpack:///./node_modules/@stimulus/core/dist/src/scope.js","webpack:///./node_modules/@stimulus/core/dist/src/scope_observer.js","webpack:///./node_modules/@stimulus/core/dist/src/selectors.js","webpack:///./node_modules/@stimulus/core/dist/src/target_properties.js","webpack:///./node_modules/@stimulus/core/dist/src/target_set.js","webpack:///./node_modules/@stimulus/multimap/dist/index.js","webpack:///./node_modules/@stimulus/multimap/dist/src/indexed_multimap.js","webpack:///./node_modules/@stimulus/multimap/dist/src/multimap.js","webpack:///./node_modules/@stimulus/multimap/dist/src/set_operations.js","webpack:///./node_modules/@stimulus/mutation-observers/dist/index.js","webpack:///./node_modules/@stimulus/mutation-observers/dist/src/attribute_observer.js","webpack:///./node_modules/@stimulus/mutation-observers/dist/src/element_observer.js","webpack:///./node_modules/@stimulus/mutation-observers/dist/src/token_list_observer.js","webpack:///./node_modules/@stimulus/mutation-observers/dist/src/value_list_observer.js","webpack:///./node_modules/@stimulus/webpack-helpers/dist/index.js","webpack:///./node_modules/base64-js/index.js","webpack:///./node_modules/buffer/index.js","webpack:///./node_modules/codemirror-spell-checker/src/js/spell-checker.js","webpack:///./node_modules/ieee754/index.js","webpack:///./node_modules/isarray/index.js","webpack:///./node_modules/marked/src/InlineLexer.js","webpack:///./node_modules/marked/src/Lexer.js","webpack:///./node_modules/marked/src/Parser.js","webpack:///./node_modules/marked/src/Renderer.js","webpack:///./node_modules/marked/src/Slugger.js","webpack:///./node_modules/marked/src/TextRenderer.js","webpack:///./node_modules/marked/src/defaults.js","webpack:///./node_modules/marked/src/helpers.js","webpack:///./node_modules/marked/src/marked.js","webpack:///./node_modules/marked/src/rules.js","webpack:///./node_modules/process/browser.js","webpack:///./node_modules/setimmediate/setImmediate.js","webpack:///./node_modules/timers-browserify/main.js","webpack:///(webpack)/buildin/global.js","webpack:///(webpack)/buildin/module.js","webpack:///./resources/js/app.js","webpack:///./resources/js/controllers sync \\.js$","webpack:///./resources/js/controllers/fields/code_controller.js","webpack:///./resources/js/controllers/fields/cropper_controller.js","webpack:///./resources/js/controllers/fields/datetime_controller.js","webpack:///./resources/js/controllers/fields/input_controller.js","webpack:///./resources/js/controllers/fields/map_controller.js","webpack:///./resources/js/controllers/fields/matrix_controller.js","webpack:///./resources/js/controllers/fields/password_controller.js","webpack:///./resources/js/controllers/fields/picture_controller.js","webpack:///./resources/js/controllers/fields/popover_controller.js","webpack:///./resources/js/controllers/fields/quill_controller.js","webpack:///./resources/js/controllers/fields/radiobutton_controller.js","webpack:///./resources/js/controllers/fields/relation_controller.js","webpack:///./resources/js/controllers/fields/select_controller.js","webpack:///./resources/js/controllers/fields/simplemde_controller.js","webpack:///./resources/js/controllers/fields/tinymce_controller.js","webpack:///./resources/js/controllers/fields/upload_controller.js","webpack:///./resources/js/controllers/fields/utm_controller.js","webpack:///./resources/js/controllers/layouts/form_controller.js","webpack:///./resources/js/controllers/layouts/html_load_controller.js","webpack:///./resources/js/controllers/layouts/listener_controller.js","webpack:///./resources/js/controllers/layouts/notification_controller.js","webpack:///./resources/js/controllers/layouts/reload_controller.js","webpack:///./resources/js/controllers/layouts/search_controller.js","webpack:///./resources/js/controllers/layouts/systems_controller.js","webpack:///./resources/js/controllers/layouts/table_controller.js","webpack:///./resources/js/controllers/layouts/toast_controller.js","webpack:///./resources/js/controllers/layouts/tooltip_controller.js","webpack:///./resources/js/controllers/screen/base_controller.js","webpack:///./resources/js/controllers/screen/chart_controller.js","webpack:///./resources/js/controllers/screen/filter_controller.js","webpack:///./resources/js/controllers/screen/modal_controller.js","webpack:///./resources/js/controllers/screen/tabs_controller.js","webpack:///./resources/js/platform.js","webpack:///./resources/sass/app.scss?44bc","webpack:///fs (ignored)"],"names":["global","$","jQuery","require","window","platform","application","Application","start","Controller","context","load","definitionsFromContext","input","element","querySelector","flask","CodeFlask","language","data","get","lineNumbers","defaultTheme","readonly","readOnly","updateCode","value","onUpdate","code","image","src","classList","add","cropPanel","width","height","cropper","Cropper","viewMode","aspectRatio","minContainerHeight","event","maxFileSize","target","files","size","alert","modal","reader","FileReader","readAsDataURL","onloadend","replace","result","getCroppedCanvas","imageSmoothingQuality","toBlob","blob","formData","FormData","append","axios","post","prefix","then","response","url","targetValue","remove","error","console","warn","move","zoom","rotate","dataScaleX","scaleX","dataScaleY","scaleY","setAspectRatio","NaN","plugins","push","rangePlugin","config","locale","document","documentElement","lang","fp","clear","Flatpickr","mask","length","removeMaskOnSubmit","form","closest","addEventListener","inputmask","undefined","Inputmask","JSON","parse","autoUnmask","e","default_lat","latTarget","default_lng","lngTarget","default_zoom","max_zoom","base64icon","base64shadow","markerIcon","L","icon","iconUrl","iconAnchor","iconSize","popupAnchor","shadowSize","shadowUrl","leafletMap","map","center","leafLayer","tileLayer","attribution","maxZoom","addTo","leafletMarker","marker","draggable","autoPan","autoPanPadding","point","on","updateCoords","setLatLng","latlng","panTo","invalidateSize","getLatLng","lat","lng","results","searchTarget","items","each","key","val","bb","boundingbox","lon","name","display_name","osm_type","innerHTML","html","join","appendTo","getAttribute","lat1","lat2","lng1","lng2","loc1","LatLng","loc2","bounds","LatLngBounds","fitBounds","template","keyValueMode","detectMaxRows","path","forEach","tagName","parentNode","removeChild","preventDefault","index","row","content","cloneNode","creatingRows","insertBefore","max","parseInt","current","querySelectorAll","addRow","style","display","set","currentType","passwordTarget","type","setAttribute","iconTarget","popover","selector","id","editor","Quill","placeholder","theme","modules","toolbar","header","list","indent","align","getModule","addHandler","selectLocalImage","root","getText","createElement","click","onchange","file","test","saveToServer","insertToEditor","range","getSelection","insertEmbed","offsetParent","removeAttribute","hasAttribute","select","selectTarget","model","scope","ajaxSetup","headers","attr","select2","allowClear","ajax","cache","delay","dataType","processResults","selectValues","Array","isArray","Object","keys","reduce","res","includes","toString","text","params","search","term","forceChange","setTimeout","dispatchEvent","Event","values","Option","trigger","once","SimpleMDE","autoDownloadFontAwesome","forceSync","textarea","action","toggleBold","className","title","toggleItalic","toggleHeadingSmaller","toggleBlockquote","toggleCodeBlock","toggleUnorderedList","toggleOrderedList","drawLink","drawImage","showDialogUpload","drawTable","togglePreview","toggleSideBySide","toggleFullScreen","drawHorizontalRule","showModal","spellChecker","required","uploadInput","codemirror","replaceSelection","tinymce","baseURL","toolbar1","inline","dataset","init","branding","min_height","max_height","insert_toolbar","selection_toolbar","convert_urls","image_caption","image_title","image_class_list","setup","getContent","images_upload_handler","upload","blobInfo","success","props","attachments","mediaList","open","initDropZone","initSortable","attach","activeAttachment","dropname","hasOwnProperty","alt","description","original_name","put","dataKey","self","CancelToken","cancelRequest","cancelToken","executor","c","Sortable","animation","onEnd","resortElement","addClass","storage","loadInfo","bind","groups","multiple","isMediaLibrary","dropZone","Dropzone","method","uploadMultiple","maxFilesize","maxFiles","acceptedFiles","resizeQuality","resizeWidth","resizeHeight","paramName","previewsContainer","addRemoveLinks","dictFileTooBig","autoDiscover","log","options","removeFile","removeButton","editButton","stopPropagation","previewElement","appendChild","addSortDataAtributes","xhr","hiddenFileInput","images","item","mime","status","ADDED","emit","message","show","hide","loadMedia","filter","disk","renderMedia","currentTarget","addedExistFile","attachment","activeAchivmentId","getAttachmentTargetKey","urlTarget","URL","sourceTarget","loadParam","mediumTarget","campaignTarget","termTarget","contentTarget","protocol","host","pathname","addParams","toLowerCase","trim","encodeURIComponent","slugify","RegExp","indexOf","link","change","param","searchParams","button","focus","formId","formElem","getElementById","submit","getActiveElementAttr","validateForm","isSubmit","loadFormAction","animateButton","screenEventSubmit","Accept","request","responseURL","Turbolinks","controller","Snapshot","wrap","visit","history","pushState","clearCache","iframe","body","contentWindow","write","buttonElement","disabled","reportValidity","attribute","activeElement","formAction","activeElementAction","keyCode","which","charCode","turbo","csrf","supported","setProgressBarDelay","interceptors","use","startProgressBar","stopProgressBar","Promise","reject","token","head","defaults","common","animate","scrollTop","adapter","progressBar","setValue","targets","render","asyncLoadData","count","localStorage","setItem","storageChanged","updateInterval","setUpdateInterval","clearInterval","removeEventListener","storageKey","interval","setInterval","total","getItem","badge","badgeTarget","getResultElement","startQuery","queryTarget","showResultQuery","query","children","hiddenColumns","slug","allowDefaultHidden","renderColumn","checkbox","hideColumn","column","columnName","showColumn","columns","stringify","showClass","checkBoxEnable","checked","showAllToasts","toast","tooltip","parentTarget","parentElement","modalKey","getControllerForElementAndIdentifier","modalTitle","modalAction","modalParams","chart","Chart","labels","datasets","maxSlices","valuesOverPoints","axisOptions","barOptions","lineOptions","colors","drawEvent","draw","destroy","off","setAllFilter","currentIndex","filterItemTargets","findIndex","contains","elem","filterIndex","filterItem","top","offsetTop","left","offsetWidth","formElement","filters","formToObject","sort","getUrlParameter","removeEmpty","location","origin","property","regex","exec","decodeURIComponent","setFormAction","sessionStorage","titleTarget","textContent","tabs","activeId","href","tab","charAt","slice","hostname","port","toastWrapper","toastController","output","prototype","call"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgD;AACR;AACM;AACD;AAC7C,2CAA2C,2W;;;;;;;;;;;;ACJ3C;AAAA;AAAA;AAAA;AAAkF;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,gFAAqB;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,+EAAoB;AACvC,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,CAAC;AACiB;AAClB;AACA,uBAAuB,gBAAgB,EAAE;AACzC,4BAA4B,gBAAgB,EAAE;AAC9C,0BAA0B,iBAAiB,EAAE;AAC7C,2BAA2B,gEAAgE,EAAE;AAC7F,4BAA4B,iBAAiB,EAAE;AAC/C,8BAA8B,iBAAiB;AAC/C;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,+wE;;;;;;;;;;;;AC5C3C;AAAA;AAAA;AAAA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,+iC;;;;;;;;;;;;AC5B3C;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;AACA,mBAAmB,SAAI,IAAI,SAAI;AAC/B,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AAC0C;AACR;AACO;AACzC;AACA;AACA,iCAAiC,oCAAoC;AACrE,gCAAgC,UAAU,qDAAa,CAAC;AACxD;AACA;AACA,8BAA8B,sDAAU;AACxC,0BAA0B,8CAAM;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,uEAAuE;AAC1F;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA,mDAAmD,gDAAgD,EAAE;AACrG;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA,mDAAmD,kDAAkD,EAAE;AACvG;AACA;AACA;AACA;AACA,gEAAgE,2BAA2B,EAAE;AAC7F,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACsB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,2CAA2C,uyG;;;;;;;;;;;;ACxH3C;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,CAAC;AACkB;AACnB,2CAA2C,moF;;;;;;;;;;;;ACtG3C;AAAA;AAAA;AAAA;AAAA;AAAkC;AACE;AAC6B;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,8EAAiB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,0BAA0B,gDAAO;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,oDAAoD,EAAE;AACxG;AACA;AACA;AACA;AACA,qBAAqB,8CAAM;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAC0B;AAC3B,2CAA2C,ugG;;;;;;;;;;;;AC1F3C;AAAA;AAAA;AAAqD;AACrD;AACA;AACA;AACA;AACA;AACA,mCAAmC,iEAAe;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,gCAAgC,aAAa;AAC7C;AACA,gCAAgC,mEAAmE;AACnG;AACA;AACA;AACA,CAAC;AACkB;AACnB,2CAA2C,21E;;;;;;;;;;;;ACpF3C;AAAA;AAAA;AAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA,QAAQ,iFAAsB;AAC9B;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACqB;AACtB,2CAA2C,+vC;;;;;;;;;;;;AC/D3C;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACkB;AACnB;AACA,yDAAyD,iCAAiC,EAAE;AAC5F;AACA,2CAA2C,+wD;;;;;;;;;;;;AClD3C;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B,SAAS;AACT;AACA;AACA;AACA;AACA,6BAA6B,mBAAmB;AAChD;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA,SAAS,eAAe;AACxB;AACA,CAAC;AACD,2CAA2C,+hD;;;;;;;;;;;;ACtD3C;AAAA;AAAA;AAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,gCAAgC,EAAE;AACpG;AACA;AACA;AACA;AACA;AACA,kEAAkE,mCAAmC,EAAE;AACvG;AACA;AACA;AACA;AACA;AACA,mDAAmD,mDAAmD,EAAE;AACxG,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,aAAa;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,6DAAa;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACqB;AACtB,2CAA2C,2kG;;;;;;;;;;;;ACxE3C;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,gBAAgB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,CAAC;AACwB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,2CAA2C,2sE;;;;;;;;;;;;AC7D3C;AAAA;AAAA;AAAA;AAAoC;AACW;AAC/C;AACA;AACA;AACA,0BAA0B,mEAAe;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,gDAAO;AACjC;AACA;AACA;AACA;AACA;AACA,CAAC;AACiB;AAClB,2CAA2C,uyD;;;;;;;;;;;;ACrD3C;AAAA;AAAA;AAAA;AAAA;AAAkC;AACY;AACG;AACjD;AACA;AACA;AACA,iCAAiC,6DAAa;AAC9C,sCAAsC,2DAAQ;AAC9C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,oEAAoE,yCAAyC,EAAE;AAC/G,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,8CAAM;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,mCAAmC,EAAE;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,6CAA6C,EAAE;AACxF;AACA;AACA;AACA;AACA,yCAAyC,gDAAgD,EAAE;AAC3F;AACA;AACA,CAAC;AACiB;AAClB,2CAA2C,+iI;;;;;;;;;;;;ACxG3C;AAAA;AAAO;AACP;AACA;AACA;AACA;AACA,2CAA2C,uS;;;;;;;;;;;;ACL3C;AAAA;AAAA;AAAA;AAAA;AAAqC;AACI;AACiB;AAC1D;AACA;AACA;AACA;AACA;AACA,2BAA2B,qDAAS;AACpC,wBAAwB,iDAAO;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,uCAAuC,EAAE;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,8EAA2B;AAC9C,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,CAAC;AACgB;AACjB,2CAA2C,mxD;;;;;;;;;;;;ACpC3C;AAAA;AAAA;AAAA;AAAgC;AACiC;AACjE;AACA;AACA;AACA;AACA;AACA,qCAAqC,8EAAiB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,4CAAK;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACwB;AACzB,2CAA2C,uvF;;;;;;;;;;;;ACjE3C;AAAA;AAAA;AACO;AACP;AACA;AACA,2CAA2C,2R;;;;;;;;;;;;ACJ3C;AAAA;AAAA;AACO;AACP;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,8EAA8E,8BAA8B,EAAE;AAC9G;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,2CAA2C,+hF;;;;;;;;;;;;AC7D3C;AAAA;AAAA;AAA0D;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,mDAAmD,EAAE;AAC3G;AACA;AACA;AACA,eAAe,8EAA2B;AAC1C;AACA;AACA,CAAC;AACoB;AACrB,2CAA2C,2wD;;;;;;;;;;;;ACxD3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+B;AACQ;AACvC,2CAA2C,uM;;;;;;;;;;;;ACF3C;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACqC;AACM;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,QAAQ,2DAAG;AACX;AACA;AACA;AACA,QAAQ,2DAAG;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,kDAAQ;AACiB;AAC3B,2CAA2C,+5C;;;;;;;;;;;;AC5C3C;AAAA;AAAA;AAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,uCAAuC,EAAE;AAChG,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,qDAAqD,wBAAwB,EAAE;AAC/E,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,QAAQ,2DAAG;AACX;AACA;AACA,QAAQ,2DAAG;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,uBAAuB,EAAE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;AACmB;AACpB,2CAA2C,2hF;;;;;;;;;;;;ACxD3C;AAAA;AAAA;AAAA;AAAA;AAAO;AACP;AACA;AACO;AACP;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA,2CAA2C,+mC;;;;;;;;;;;;ACrB3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyC;AACF;AACG;AACA;AAC1C,2CAA2C,mQ;;;;;;;;;;;;ACJ3C;AAAA;AAAA;AAAqD;AACrD;AACA;AACA;AACA;AACA,mCAAmC,iEAAe;AAClD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAC4B;AAC7B,2CAA2C,myE;;;;;;;;;;;;AChE3C;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,0CAA0C,EAAE;AACvH;AACA;AACA;AACA;AACA,yDAAyD,mDAAmD;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,gBAAgB;AAC5E;AACA;AACA;AACA;AACA;AACA,sDAAsD,gBAAgB;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,yBAAyB;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,gBAAgB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,gBAAgB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,qBAAqB;AACnD;AACA;AACA;AACA,6DAA6D,gBAAgB;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAC0B;AAC3B,2CAA2C,mtL;;;;;;;;;;;;ACzI3C;AAAA;AAAA;AAAA;AAAyD;AACX;AAC9C;AACA;AACA,qCAAqC,qEAAiB;AACtD;AACA,mCAAmC,2DAAQ;AAC3C;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,kCAAkC,EAAE;AAC7E;AACA;AACA;AACA,yCAAyC,oCAAoC,EAAE;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAC4B;AAC7B;AACA,sEAAsE,uBAAuB,EAAE;AAC/F,wCAAwC,UAAU,iFAAiF,EAAE,EAAE;AACvI;AACA;AACA;AACA,uBAAuB,iBAAiB,uBAAuB,oCAAoC,EAAE;AACrG;AACA;AACA;AACA;AACA,2CAA2C,m+I;;;;;;;;;;;;ACpG3C;AAAA;AAAA;AAA0D;AAC1D;AACA;AACA,qCAAqC,sEAAiB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,CAAC;AAC4B;AAC7B,2CAA2C,m0F;;;;;;;;;;;;AClF3C;AAAA;AAAA;AAAO;AACP;AACA,6BAA6B,2DAA2D,EAAE;AAC1F,kCAAkC,cAAc,EAAE;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA,2CAA2C,+rC;;;;;;;;;;;;ACvB/B;;AAEZ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,kCAAkC,SAAS;AAC3C;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0CAA0C,UAAU;AACpD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEY;;AAEZ,aAAa,mBAAO,CAAC,oDAAW;AAChC,cAAc,mBAAO,CAAC,gDAAS;AAC/B,cAAc,mBAAO,CAAC,gDAAS;;AAE/B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,mDAAmD;AACxE;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,UAAU;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,uCAAuC,SAAS;AAChD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;;AAEA;AACA;AACA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gDAAgD,EAAE;AAClD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAwB,eAAe;AACvC;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,wBAAwB,QAAQ;AAChC;AACA,qBAAqB,eAAe;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,mBAAmB,cAAc;AACjC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD,OAAO;AAC9D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD,OAAO;AAC9D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,qBAAqB,QAAQ;AAC7B;AACA;AACA,GAAG;AACH;AACA,eAAe,SAAS;AACxB;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,YAAY;AAC7B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAiB,gBAAgB;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,gBAAgB;AACjC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;;AC5vDA;AACa;;;AAGb;AACA,WAAW,mBAAO,CAAC,+CAAS;;;AAG5B;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;;AAGA;AACA,kCAAkC,aAAa,EAAE;;;AAGjD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,0BAA0B;;AAE1B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;AACF;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,wC;;;;;;;;;;;ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,QAAQ,WAAW;;AAEnB;AACA;AACA;AACA,QAAQ,WAAW;;AAEnB;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA,QAAQ,WAAW;;AAEnB;AACA;AACA,QAAQ,UAAU;;AAElB;AACA;;;;;;;;;;;;ACnFA,iBAAiB;;AAEjB;AACA;AACA;;;;;;;;;;;;ACJA,iBAAiB,mBAAO,CAAC,4DAAe;AACxC,OAAO,WAAW,GAAG,mBAAO,CAAC,4DAAe;AAC5C,OAAO,SAAS,GAAG,mBAAO,CAAC,sDAAY;AACvC;AACA;AACA;AACA,CAAC,GAAG,mBAAO,CAAC,0DAAc;;AAE1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA,mBAAmB,EAAE;AACrB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAU,OAAO;AACjB;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;;AAEA;AACA;AACA;;;;;;;;;;;;ACpSA,OAAO,WAAW,GAAG,mBAAO,CAAC,4DAAe;AAC5C,OAAO,QAAQ,GAAG,mBAAO,CAAC,sDAAY;AACtC;AACA;AACA;AACA;AACA,CAAC,GAAG,mBAAO,CAAC,0DAAc;;AAE1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,mCAAmC,EAAE;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,qBAAqB,uBAAuB;AAC5C;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;;AAEA,qBAAqB,uBAAuB;AAC5C;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,cAAc,OAAO;AACrB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,4CAA4C,gBAAgB;AAC5D,iCAAiC,IAAI;AACrC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,WAAW;AACX;;AAEA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,qBAAqB,uBAAuB;AAC5C;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;;AAEA,qBAAqB,uBAAuB;AAC5C;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;ACjZA,iBAAiB,mBAAO,CAAC,4DAAe;AACxC,gBAAgB,mBAAO,CAAC,0DAAc;AACtC,oBAAoB,mBAAO,CAAC,kEAAkB;AAC9C,qBAAqB,mBAAO,CAAC,oEAAmB;AAChD,OAAO,WAAW,GAAG,mBAAO,CAAC,4DAAe;AAC5C;AACA;AACA;AACA,CAAC,GAAG,mBAAO,CAAC,0DAAc;;AAE1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,iBAAiB,+BAA+B;AAC9D;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,8BAA8B;AACjD;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA,mBAAmB,6BAA6B;AAChD;;AAEA;AACA,qBAAqB,gBAAgB;AACrC;AACA;AACA,eAAe;AACf;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,eAAe;AACf;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC7MA,OAAO,WAAW,GAAG,mBAAO,CAAC,4DAAe;AAC5C;AACA;AACA;AACA,CAAC,GAAG,mBAAO,CAAC,0DAAc;;AAE1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;ACnKA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,WAAW,EAAE;AAC1E;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC7BA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C,gDAAgD;AAChD;AACA,aAAa;AACb,YAAY;AACZ,YAAY;AACZ,cAAc;AACd,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA,6DAA6D;;AAE7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA,kBAAkB,6BAA6B;;AAE/C;AACA;AACA;AACA;;AAEA,QAAQ,sBAAsB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA,QAAQ,kBAAkB;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,OAAO;AACf;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AClPA,cAAc,mBAAO,CAAC,sDAAY;AAClC,eAAe,mBAAO,CAAC,wDAAa;AACpC,iBAAiB,mBAAO,CAAC,4DAAe;AACxC,qBAAqB,mBAAO,CAAC,oEAAmB;AAChD,oBAAoB,mBAAO,CAAC,kEAAkB;AAC9C,gBAAgB,mBAAO,CAAC,0DAAc;AACtC;AACA;AACA;AACA;AACA,CAAC,GAAG,mBAAO,CAAC,0DAAc;AAC1B;AACA;AACA;AACA;AACA,CAAC,GAAG,mBAAO,CAAC,4DAAe;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,4BAA4B;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA,UAAU,mBAAmB;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;;AAEA;AACA;AACA;AACA,kBAAkB,4BAA4B;AAC9C;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;;;;;;;;;;;ACrJA;AACA;AACA;AACA;AACA,CAAC,GAAG,mBAAO,CAAC,0DAAc;;AAE1B;AACA;AACA;AACA;AACA;AACA,aAAa,EAAE;AACf,cAAc,IAAI,GAAG,GAAG,GAAG,GAAG,mCAAmC,IAAI;AACrE,UAAU,IAAI,SAAS,GAAG,SAAS,GAAG,UAAU,GAAG;AACnD,eAAe,IAAI,GAAG,IAAI;AAC1B,mBAAmB,IAAI;AACvB,aAAa,IAAI,6BAA6B,GAAG;AACjD,YAAY,IAAI;AAChB;AACA;AACA;AACA;AACA;AACA,+CAA+C,GAAG;AAClD,oGAAoG,GAAG;AACvG,oFAAoF,GAAG;AACvF;AACA,WAAW,IAAI;AACf;AACA;AACA,0BAA0B,IAAI;AAC9B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,4BAA4B,IAAI;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA,wCAAwC,GAAG,SAAS,GAAG,WAAW,GAAG;AACrE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yBAAyB,IAAI,EAAE,IAAI;AACnC;AACA,4BAA4B,IAAI;AAChC,wBAAwB,IAAI,KAAK,GAAG,GAAG,GAAG;AAC1C,sBAAsB,IAAI;AAC1B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,uBAAuB;;AAEvB;AACA;AACA;;AAEA,oBAAoB;AACpB;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA,yBAAyB;AACzB;AACA;AACA,uCAAuC,GAAG;AAC1C,gEAAgE,GAAG;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,IAAI;AACtB;AACA;AACA;AACA,6BAA6B,IAAI;AACjC;AACA,8BAA8B,IAAI;AAClC;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,kCAAkC,eAAe,EAAE;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,+DAA+D,GAAG,UAAU,GAAG;AAC/E;;AAEA;AACA;AACA,2CAA2C,WAAW,EAAE;AACxD;;AAEA,yCAAyC,eAAe,EAAE;;AAE1D,yCAAyC,KAAK;AAC9C,2CAA2C,EAAE,kCAAkC,KAAK,6CAA6C,KAAK;AACtI;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,wBAAwB;;AAExB;AACA;AACA;;AAEA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA,qBAAqB;AACrB;AACA;AACA;AACA,0BAA0B,oCAAoC,UAAU;AACxE;AACA,2FAA2F,GAAG,+BAA+B,GAAG,gCAAgC,GAAG,aAAa,GAAG,6BAA6B,GAAG;AACnN,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA,wBAAwB;AACxB,gCAAgC,GAAG;AACnC;AACA,6BAA6B,GAAG;AAChC,gBAAgB,IAAI;AACpB;AACA,CAAC;;AAED;AACA;AACA;AACA;;;;;;;;;;;;AC/OA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;;;;;ACvLtC;AACA;;AAEA;AACA;AACA;;AAEA,uBAAuB;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,iBAAiB;AACtC;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0CAA0C,sBAAsB,EAAE;AAClE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;;;;;;;;;;;ACzLD;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,mBAAO,CAAC,iEAAc;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC9DA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;ACnBA;AACA;AACA;AACA;AACA;A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","file":"/js/orchid.js","sourcesContent":["export { Application } from \"./src/application\";\nexport { Context } from \"./src/context\";\nexport { Controller } from \"./src/controller\";\nexport { defaultSchema } from \"./src/schema\";\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sbUJBQW1CLENBQUE7QUFDL0MsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLGVBQWUsQ0FBQTtBQUN2QyxPQUFPLEVBQUUsVUFBVSxFQUF5QixNQUFNLGtCQUFrQixDQUFBO0FBRXBFLE9BQU8sRUFBVSxhQUFhLEVBQUUsTUFBTSxjQUFjLENBQUEifQ==","import { parseDescriptorString, stringifyEventTarget } from \"./action_descriptor\";\nvar Action = /** @class */ (function () {\n    function Action(element, index, descriptor) {\n        this.element = element;\n        this.index = index;\n        this.eventTarget = descriptor.eventTarget || element;\n        this.eventName = descriptor.eventName || getDefaultEventNameForElement(element) || error(\"missing event name\");\n        this.identifier = descriptor.identifier || error(\"missing identifier\");\n        this.methodName = descriptor.methodName || error(\"missing method name\");\n    }\n    Action.forToken = function (token) {\n        return new this(token.element, token.index, parseDescriptorString(token.content));\n    };\n    Action.prototype.toString = function () {\n        var eventNameSuffix = this.eventTargetName ? \"@\" + this.eventTargetName : \"\";\n        return \"\" + this.eventName + eventNameSuffix + \"->\" + this.identifier + \"#\" + this.methodName;\n    };\n    Object.defineProperty(Action.prototype, \"eventTargetName\", {\n        get: function () {\n            return stringifyEventTarget(this.eventTarget);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Action;\n}());\nexport { Action };\nvar defaultEventNames = {\n    \"a\": function (e) { return \"click\"; },\n    \"button\": function (e) { return \"click\"; },\n    \"form\": function (e) { return \"submit\"; },\n    \"input\": function (e) { return e.getAttribute(\"type\") == \"submit\" ? \"click\" : \"change\"; },\n    \"select\": function (e) { return \"change\"; },\n    \"textarea\": function (e) { return \"change\"; }\n};\nexport function getDefaultEventNameForElement(element) {\n    var tagName = element.tagName.toLowerCase();\n    if (tagName in defaultEventNames) {\n        return defaultEventNames[tagName](element);\n    }\n}\nfunction error(message) {\n    throw new Error(message);\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWN0aW9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2FjdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQW9CLHFCQUFxQixFQUFFLG9CQUFvQixFQUFFLE1BQU0scUJBQXFCLENBQUE7QUFHbkc7SUFZRSxnQkFBWSxPQUFnQixFQUFFLEtBQWEsRUFBRSxVQUFxQztRQUNoRixJQUFJLENBQUMsT0FBTyxHQUFPLE9BQU8sQ0FBQTtRQUMxQixJQUFJLENBQUMsS0FBSyxHQUFTLEtBQUssQ0FBQTtRQUN4QixJQUFJLENBQUMsV0FBVyxHQUFHLFVBQVUsQ0FBQyxXQUFXLElBQUksT0FBTyxDQUFBO1FBQ3BELElBQUksQ0FBQyxTQUFTLEdBQUssVUFBVSxDQUFDLFNBQVMsSUFBSSw2QkFBNkIsQ0FBQyxPQUFPLENBQUMsSUFBSSxLQUFLLENBQUMsb0JBQW9CLENBQUMsQ0FBQTtRQUNoSCxJQUFJLENBQUMsVUFBVSxHQUFJLFVBQVUsQ0FBQyxVQUFVLElBQUksS0FBSyxDQUFDLG9CQUFvQixDQUFDLENBQUE7UUFDdkUsSUFBSSxDQUFDLFVBQVUsR0FBSSxVQUFVLENBQUMsVUFBVSxJQUFJLEtBQUssQ0FBQyxxQkFBcUIsQ0FBQyxDQUFBO0lBQzFFLENBQUM7SUFYTSxlQUFRLEdBQWYsVUFBZ0IsS0FBWTtRQUMxQixPQUFPLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLEtBQUssRUFBRSxxQkFBcUIsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQTtJQUNuRixDQUFDO0lBV0QseUJBQVEsR0FBUjtRQUNFLElBQU0sZUFBZSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLE1BQUksSUFBSSxDQUFDLGVBQWlCLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtRQUM5RSxPQUFPLEtBQUcsSUFBSSxDQUFDLFNBQVMsR0FBRyxlQUFlLFVBQUssSUFBSSxDQUFDLFVBQVUsU0FBSSxJQUFJLENBQUMsVUFBWSxDQUFBO0lBQ3JGLENBQUM7SUFFRCxzQkFBWSxtQ0FBZTthQUEzQjtZQUNFLE9BQU8sb0JBQW9CLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFBO1FBQy9DLENBQUM7OztPQUFBO0lBQ0gsYUFBQztBQUFELENBQUMsQUE3QkQsSUE2QkM7O0FBRUQsSUFBTSxpQkFBaUIsR0FBd0Q7SUFDN0UsR0FBRyxFQUFTLFVBQUEsQ0FBQyxJQUFJLE9BQUEsT0FBTyxFQUFQLENBQU87SUFDeEIsUUFBUSxFQUFJLFVBQUEsQ0FBQyxJQUFJLE9BQUEsT0FBTyxFQUFQLENBQU87SUFDeEIsTUFBTSxFQUFNLFVBQUEsQ0FBQyxJQUFJLE9BQUEsUUFBUSxFQUFSLENBQVE7SUFDekIsT0FBTyxFQUFLLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsSUFBSSxRQUFRLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUF2RCxDQUF1RDtJQUN4RSxRQUFRLEVBQUksVUFBQSxDQUFDLElBQUksT0FBQSxRQUFRLEVBQVIsQ0FBUTtJQUN6QixVQUFVLEVBQUUsVUFBQSxDQUFDLElBQUksT0FBQSxRQUFRLEVBQVIsQ0FBUTtDQUMxQixDQUFBO0FBRUQsTUFBTSx3Q0FBd0MsT0FBZ0I7SUFDNUQsSUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsQ0FBQTtJQUM3QyxJQUFJLE9BQU8sSUFBSSxpQkFBaUIsRUFBRTtRQUNoQyxPQUFPLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFBO0tBQzNDO0FBQ0gsQ0FBQztBQUVELGVBQWUsT0FBZTtJQUM1QixNQUFNLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFBO0FBQzFCLENBQUMifQ==","// capture nos.:            12   23 4               43   1 5   56 7  76\nvar descriptorPattern = /^((.+?)(@(window|document))?->)?(.+?)(#(.+))?$/;\nexport function parseDescriptorString(descriptorString) {\n    var source = descriptorString.trim();\n    var matches = source.match(descriptorPattern) || [];\n    return {\n        eventTarget: parseEventTarget(matches[4]),\n        eventName: matches[2],\n        identifier: matches[5],\n        methodName: matches[7]\n    };\n}\nfunction parseEventTarget(eventTargetName) {\n    if (eventTargetName == \"window\") {\n        return window;\n    }\n    else if (eventTargetName == \"document\") {\n        return document;\n    }\n}\nexport function stringifyEventTarget(eventTarget) {\n    if (eventTarget == window) {\n        return \"window\";\n    }\n    else if (eventTarget == document) {\n        return \"document\";\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWN0aW9uX2Rlc2NyaXB0b3IuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvYWN0aW9uX2Rlc2NyaXB0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBT0EsdUVBQXVFO0FBQ3ZFLElBQU0saUJBQWlCLEdBQUcsZ0RBQWdELENBQUE7QUFFMUUsTUFBTSxnQ0FBZ0MsZ0JBQXdCO0lBQzVELElBQU0sTUFBTSxHQUFHLGdCQUFnQixDQUFDLElBQUksRUFBRSxDQUFBO0lBQ3RDLElBQU0sT0FBTyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsSUFBSSxFQUFFLENBQUE7SUFDckQsT0FBTztRQUNMLFdBQVcsRUFBRSxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDekMsU0FBUyxFQUFJLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFDdkIsVUFBVSxFQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFDdkIsVUFBVSxFQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUM7S0FDeEIsQ0FBQTtBQUNILENBQUM7QUFFRCwwQkFBMEIsZUFBdUI7SUFDL0MsSUFBSSxlQUFlLElBQUksUUFBUSxFQUFFO1FBQy9CLE9BQU8sTUFBTSxDQUFBO0tBQ2Q7U0FBTSxJQUFJLGVBQWUsSUFBSSxVQUFVLEVBQUU7UUFDeEMsT0FBTyxRQUFRLENBQUE7S0FDaEI7QUFDSCxDQUFDO0FBRUQsTUFBTSwrQkFBK0IsV0FBd0I7SUFDM0QsSUFBSSxXQUFXLElBQUksTUFBTSxFQUFFO1FBQ3pCLE9BQU8sUUFBUSxDQUFBO0tBQ2hCO1NBQU0sSUFBSSxXQUFXLElBQUksUUFBUSxFQUFFO1FBQ2xDLE9BQU8sVUFBVSxDQUFBO0tBQ2xCO0FBQ0gsQ0FBQyJ9","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { Dispatcher } from \"./dispatcher\";\nimport { Router } from \"./router\";\nimport { defaultSchema } from \"./schema\";\nvar Application = /** @class */ (function () {\n    function Application(element, schema) {\n        if (element === void 0) { element = document.documentElement; }\n        if (schema === void 0) { schema = defaultSchema; }\n        this.element = element;\n        this.schema = schema;\n        this.dispatcher = new Dispatcher(this);\n        this.router = new Router(this);\n    }\n    Application.start = function (element, schema) {\n        var application = new Application(element, schema);\n        application.start();\n        return application;\n    };\n    Application.prototype.start = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, domReady()];\n                    case 1:\n                        _a.sent();\n                        this.router.start();\n                        this.dispatcher.start();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Application.prototype.stop = function () {\n        this.router.stop();\n        this.dispatcher.stop();\n    };\n    Application.prototype.register = function (identifier, controllerConstructor) {\n        this.load({ identifier: identifier, controllerConstructor: controllerConstructor });\n    };\n    Application.prototype.load = function (head) {\n        var _this = this;\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            rest[_i - 1] = arguments[_i];\n        }\n        var definitions = Array.isArray(head) ? head : [head].concat(rest);\n        definitions.forEach(function (definition) { return _this.router.loadDefinition(definition); });\n    };\n    Application.prototype.unload = function (head) {\n        var _this = this;\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            rest[_i - 1] = arguments[_i];\n        }\n        var identifiers = Array.isArray(head) ? head : [head].concat(rest);\n        identifiers.forEach(function (identifier) { return _this.router.unloadIdentifier(identifier); });\n    };\n    Object.defineProperty(Application.prototype, \"controllers\", {\n        // Controllers\n        get: function () {\n            return this.router.contexts.map(function (context) { return context.controller; });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Application.prototype.getControllerForElementAndIdentifier = function (element, identifier) {\n        var context = this.router.getContextForElementAndIdentifier(element, identifier);\n        return context ? context.controller : null;\n    };\n    // Error handling\n    Application.prototype.handleError = function (error, message, detail) {\n        console.error(\"%s\\n\\n%o\\n\\n%o\", message, error, detail);\n    };\n    return Application;\n}());\nexport { Application };\nfunction domReady() {\n    return new Promise(function (resolve) {\n        if (document.readyState == \"loading\") {\n            document.addEventListener(\"DOMContentLoaded\", resolve);\n        }\n        else {\n            resolve();\n        }\n    });\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwbGljYXRpb24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvYXBwbGljYXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sY0FBYyxDQUFBO0FBRXpDLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxVQUFVLENBQUE7QUFDakMsT0FBTyxFQUFVLGFBQWEsRUFBRSxNQUFNLFVBQVUsQ0FBQTtBQUVoRDtJQVlFLHFCQUFZLE9BQTJDLEVBQUUsTUFBOEI7UUFBM0Usd0JBQUEsRUFBQSxVQUFtQixRQUFRLENBQUMsZUFBZTtRQUFFLHVCQUFBLEVBQUEsc0JBQThCO1FBQ3JGLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFBO1FBQ3RCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFBO1FBQ3BCLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDdEMsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUNoQyxDQUFDO0lBWE0saUJBQUssR0FBWixVQUFhLE9BQWlCLEVBQUUsTUFBZTtRQUM3QyxJQUFNLFdBQVcsR0FBRyxJQUFJLFdBQVcsQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUE7UUFDcEQsV0FBVyxDQUFDLEtBQUssRUFBRSxDQUFBO1FBQ25CLE9BQU8sV0FBVyxDQUFBO0lBQ3BCLENBQUM7SUFTSywyQkFBSyxHQUFYOzs7OzRCQUNFLHFCQUFNLFFBQVEsRUFBRSxFQUFBOzt3QkFBaEIsU0FBZ0IsQ0FBQTt3QkFDaEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQTt3QkFDbkIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsQ0FBQTs7Ozs7S0FDeEI7SUFFRCwwQkFBSSxHQUFKO1FB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","var Binding = /** @class */ (function () {\n    function Binding(context, action) {\n        this.context = context;\n        this.action = action;\n    }\n    Object.defineProperty(Binding.prototype, \"index\", {\n        get: function () {\n            return this.action.index;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Binding.prototype, \"eventTarget\", {\n        get: function () {\n            return this.action.eventTarget;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Binding.prototype, \"identifier\", {\n        get: function () {\n            return this.context.identifier;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Binding.prototype.handleEvent = function (event) {\n        if (this.willBeInvokedByEvent(event)) {\n            this.invokeWithEvent(event);\n        }\n    };\n    Object.defineProperty(Binding.prototype, \"eventName\", {\n        get: function () {\n            return this.action.eventName;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Binding.prototype, \"method\", {\n        get: function () {\n            var method = this.controller[this.methodName];\n            if (typeof method == \"function\") {\n                return method;\n            }\n            throw new Error(\"Action \\\"\" + this.action + \"\\\" references undefined method \\\"\" + this.methodName + \"\\\"\");\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Binding.prototype.invokeWithEvent = function (event) {\n        try {\n            this.method.call(this.controller, event);\n        }\n        catch (error) {\n            var _a = this, identifier = _a.identifier, controller = _a.controller, element = _a.element, index = _a.index;\n            var detail = { identifier: identifier, controller: controller, element: element, index: index, event: event };\n            this.context.handleError(error, \"invoking action \\\"\" + this.action + \"\\\"\", detail);\n        }\n    };\n    Binding.prototype.willBeInvokedByEvent = function (event) {\n        var eventTarget = event.target;\n        if (this.element === eventTarget) {\n            return true;\n        }\n        else if (eventTarget instanceof Element && this.element.contains(eventTarget)) {\n            return this.scope.containsElement(eventTarget);\n        }\n        else {\n            return true;\n        }\n    };\n    Object.defineProperty(Binding.prototype, \"controller\", {\n        get: function () {\n            return this.context.controller;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Binding.prototype, \"methodName\", {\n        get: function () {\n            return this.action.methodName;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Binding.prototype, \"element\", {\n        get: function () {\n            return this.scope.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Binding.prototype, \"scope\", {\n        get: function () {\n            return this.context.scope;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Binding;\n}());\nexport { Binding };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmluZGluZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9iaW5kaW5nLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUtBO0lBSUUsaUJBQVksT0FBZ0IsRUFBRSxNQUFjO1FBQzFDLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFBO1FBQ3RCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFBO0lBQ3RCLENBQUM7SUFFRCxzQkFBSSwwQkFBSzthQUFUO1lBQ0UsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQTtRQUMxQixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLGdDQUFXO2FBQWY7WUFDRSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFBO1FBQ2hDLENBQUM7OztPQUFBO0lBRUQsc0JBQUksK0JBQVU7YUFBZDtZQUNFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUE7UUFDaEMsQ0FBQzs7O09BQUE7SUFFRCw2QkFBVyxHQUFYLFVBQVksS0FBWTtRQUN0QixJQUFJLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUNwQyxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxDQUFBO1NBQzVCO0lBQ0gsQ0FBQztJQUVELHNCQUFJLDhCQUFTO2FBQWI7WUFDRSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFBO1FBQzlCLENBQUM7OztPQUFBO0lBRUQsc0JBQUksMkJBQU07YUFBVjtZQUNFLElBQU0sTUFBTSxHQUFJLElBQUksQ0FBQyxVQUFrQixDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQTtZQUN4RCxJQUFJLE9BQU8sTUFBTSxJQUFJLFVBQVUsRUFBRTtnQkFDL0IsT0FBTyxNQUFNLENBQUE7YUFDZDtZQUNELE1BQU0sSUFBSSxLQUFLLENBQUMsY0FBVyxJQUFJLENBQUMsTUFBTSx5Q0FBa0MsSUFBSSxDQUFDLFVBQVUsT0FBRyxDQUFDLENBQUE7UUFDN0YsQ0FBQzs7O09BQUE7SUFFTyxpQ0FBZSxHQUF2QixVQUF3QixLQUFZO1FBQ2xDLElBQUk7WUFDRixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLEtBQUssQ0FBQyxDQUFBO1NBQ3pDO1FBQUMsT0FBTyxLQUFLLEVBQUU7WUFDUixJQUFBLFNBQWlELEVBQS9DLDBCQUFVLEVBQUUsMEJBQVUsRUFBRSxvQkFBTyxFQUFFLGdCQUFLLENBQVM7WUFDdkQsSUFBTSxNQUFNLEdBQUcsRUFBRSxVQUFVLFlBQUEsRUFBRSxVQUFVLFlBQUEsRUFBRSxPQUFPLFNBQUEsRUFBRSxLQUFLLE9BQUEsRUFBRSxLQUFLLE9BQUEsRUFBRSxDQUFBO1lBQ2hFLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSx1QkFBb0IsSUFBSSxDQUFDLE1BQU0sT0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFBO1NBQzVFO0lBQ0gsQ0FBQztJQUVPLHNDQUFvQixHQUE1QixVQUE2QixLQUFZO1FBQ3ZDLElBQU0sV0FBVyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUE7UUFDaEMsSUFBSSxJQUFJLENBQUMsT0FBTyxLQUFLLFdBQVcsRUFBRTtZQUNoQyxPQUFPLElBQUksQ0FBQTtTQUNaO2FBQU0sSUFBSSxXQUFXLFlBQVksT0FBTyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQy9FLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsV0FBVyxDQUFDLENBQUE7U0FDL0M7YUFBTTtZQUNMLE9BQU8sSUFBSSxDQUFBO1NBQ1o7SUFDSCxDQUFDO0lBRUQsc0JBQVksK0JBQVU7YUFBdEI7WUFDRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFBO1FBQ2hDLENBQUM7OztPQUFBO0lBRUQsc0JBQVksK0JBQVU7YUFBdEI7WUFDRSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFBO1FBQy9CLENBQUM7OztPQUFBO0lBRUQsc0JBQVksNEJBQU87YUFBbkI7WUFDRSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFBO1FBQzNCLENBQUM7OztPQUFBO0lBRUQsc0JBQVksMEJBQUs7YUFBakI7WUFDRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFBO1FBQzNCLENBQUM7OztPQUFBO0lBQ0gsY0FBQztBQUFELENBQUMsQUEzRUQsSUEyRUMifQ==","import { Action } from \"./action\";\nimport { Binding } from \"./binding\";\nimport { ValueListObserver } from \"@stimulus/mutation-observers\";\nvar BindingObserver = /** @class */ (function () {\n    function BindingObserver(context, delegate) {\n        this.context = context;\n        this.delegate = delegate;\n        this.bindingsByAction = new Map;\n    }\n    BindingObserver.prototype.start = function () {\n        if (!this.valueListObserver) {\n            this.valueListObserver = new ValueListObserver(this.element, this.actionAttribute, this);\n            this.valueListObserver.start();\n        }\n    };\n    BindingObserver.prototype.stop = function () {\n        if (this.valueListObserver) {\n            this.valueListObserver.stop();\n            delete this.valueListObserver;\n            this.disconnectAllActions();\n        }\n    };\n    Object.defineProperty(BindingObserver.prototype, \"element\", {\n        get: function () {\n            return this.context.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BindingObserver.prototype, \"identifier\", {\n        get: function () {\n            return this.context.identifier;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BindingObserver.prototype, \"actionAttribute\", {\n        get: function () {\n            return this.schema.actionAttribute;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BindingObserver.prototype, \"schema\", {\n        get: function () {\n            return this.context.schema;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BindingObserver.prototype, \"bindings\", {\n        get: function () {\n            return Array.from(this.bindingsByAction.values());\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BindingObserver.prototype.connectAction = function (action) {\n        var binding = new Binding(this.context, action);\n        this.bindingsByAction.set(action, binding);\n        this.delegate.bindingConnected(binding);\n    };\n    BindingObserver.prototype.disconnectAction = function (action) {\n        var binding = this.bindingsByAction.get(action);\n        if (binding) {\n            this.bindingsByAction.delete(action);\n            this.delegate.bindingDisconnected(binding);\n        }\n    };\n    BindingObserver.prototype.disconnectAllActions = function () {\n        var _this = this;\n        this.bindings.forEach(function (binding) { return _this.delegate.bindingDisconnected(binding); });\n        this.bindingsByAction.clear();\n    };\n    // Value observer delegate\n    BindingObserver.prototype.parseValueForToken = function (token) {\n        var action = Action.forToken(token);\n        if (action.identifier == this.identifier) {\n            return action;\n        }\n    };\n    BindingObserver.prototype.elementMatchedValue = function (element, action) {\n        this.connectAction(action);\n    };\n    BindingObserver.prototype.elementUnmatchedValue = function (element, action) {\n        this.disconnectAction(action);\n    };\n    return BindingObserver;\n}());\nexport { BindingObserver };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmluZGluZ19vYnNlcnZlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9iaW5kaW5nX29ic2VydmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxVQUFVLENBQUE7QUFDakMsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLFdBQVcsQ0FBQTtBQUluQyxPQUFPLEVBQVMsaUJBQWlCLEVBQTZCLE1BQU0sOEJBQThCLENBQUE7QUFPbEc7SUFNRSx5QkFBWSxPQUFnQixFQUFFLFFBQWlDO1FBQzdELElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFBO1FBQ3RCLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFBO1FBQ3hCLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLEdBQUcsQ0FBQTtJQUNqQyxDQUFDO0lBRUQsK0JBQUssR0FBTDtRQUNFLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUU7WUFDM0IsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksaUJBQWlCLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsZUFBZSxFQUFFLElBQUksQ0FBQyxDQUFBO1lBQ3hGLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLEVBQUUsQ0FBQTtTQUMvQjtJQUNILENBQUM7SUFFRCw4QkFBSSxHQUFKO1FBQ0UsSUFBSSxJQUFJLENBQUMsaUJBQWlCLEVBQUU7WUFDMUIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksRUFBRSxDQUFBO1lBQzdCLE9BQU8sSUFBSSxDQUFDLGlCQUFpQixDQUFBO1lBQzdCLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxDQUFBO1NBQzVCO0lBQ0gsQ0FBQztJQUVELHNCQUFJLG9DQUFPO2FBQVg7WUFDRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFBO1FBQzdCLENBQUM7OztPQUFBO0lBRUQsc0JBQUksdUNBQVU7YUFBZDtZQUNFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUE7UUFDaEMsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSw0Q0FBZTthQUFuQjtZQUNFLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxlQUFlLENBQUE7UUFDcEMsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSxtQ0FBTTthQUFWO1lBQ0UsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQTtRQUM1QixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLHFDQUFRO2FBQVo7WUFDRSxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUE7UUFDbkQsQ0FBQzs7O09BQUE7SUFFTyx1Q0FBYSxHQUFyQixVQUFzQixNQUFjO1FBQ2xDLElBQU0sT0FBTyxHQUFHLElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUE7UUFDakQsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUE7UUFDMUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQTtJQUN6QyxDQUFDO0lBRU8sMENBQWdCLEdBQXhCLFVBQXlCLE1BQWM7UUFDckMsSUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQTtRQUNqRCxJQUFJLE9BQU8sRUFBRTtZQUNYLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUE7WUFDcEMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLENBQUMsQ0FBQTtTQUMzQztJQUNILENBQUM7SUFFTyw4Q0FBb0IsR0FBNUI7UUFBQSxpQkFHQztRQUZDLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLFVBQUEsT0FBTyxJQUFJLE9BQUEsS0FBSSxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLENBQUMsRUFBMUMsQ0FBMEMsQ0FBQyxDQUFBO1FBQzVFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLEVBQUUsQ0FBQTtJQUMvQixDQUFDO0lBRUQsMEJBQTBCO0lBRTFCLDRDQUFrQixHQUFsQixVQUFtQixLQUFZO1FBQzdCLElBQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDckMsSUFBSSxNQUFNLENBQUMsVUFBVSxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDeEMsT0FBTyxNQUFNLENBQUE7U0FDZDtJQUNILENBQUM7SUFFRCw2Q0FBbUIsR0FBbkIsVUFBb0IsT0FBZ0IsRUFBRSxNQUFjO1FBQ2xELElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUE7SUFDNUIsQ0FBQztJQUVELCtDQUFxQixHQUFyQixVQUFzQixPQUFnQixFQUFFLE1BQWM7UUFDcEQsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFBO0lBQy9CLENBQUM7SUFDSCxzQkFBQztBQUFELENBQUMsQUFsRkQsSUFrRkMifQ==","import { BindingObserver } from \"./binding_observer\";\nvar Context = /** @class */ (function () {\n    function Context(module, scope) {\n        this.module = module;\n        this.scope = scope;\n        this.controller = new module.controllerConstructor(this);\n        this.bindingObserver = new BindingObserver(this, this.dispatcher);\n        try {\n            this.controller.initialize();\n        }\n        catch (error) {\n            this.handleError(error, \"initializing controller\");\n        }\n    }\n    Context.prototype.connect = function () {\n        this.bindingObserver.start();\n        try {\n            this.controller.connect();\n        }\n        catch (error) {\n            this.handleError(error, \"connecting controller\");\n        }\n    };\n    Context.prototype.disconnect = function () {\n        try {\n            this.controller.disconnect();\n        }\n        catch (error) {\n            this.handleError(error, \"disconnecting controller\");\n        }\n        this.bindingObserver.stop();\n    };\n    Object.defineProperty(Context.prototype, \"application\", {\n        get: function () {\n            return this.module.application;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Context.prototype, \"identifier\", {\n        get: function () {\n            return this.module.identifier;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Context.prototype, \"schema\", {\n        get: function () {\n            return this.application.schema;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Context.prototype, \"dispatcher\", {\n        get: function () {\n            return this.application.dispatcher;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Context.prototype, \"element\", {\n        get: function () {\n            return this.scope.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Context.prototype, \"parentElement\", {\n        get: function () {\n            return this.element.parentElement;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // Error handling\n    Context.prototype.handleError = function (error, message, detail) {\n        if (detail === void 0) { detail = {}; }\n        var _a = this, identifier = _a.identifier, controller = _a.controller, element = _a.element;\n        detail = Object.assign({ identifier: identifier, controller: controller, element: element }, detail);\n        this.application.handleError(error, \"Error \" + message, detail);\n    };\n    return Context;\n}());\nexport { Context };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGV4dC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb250ZXh0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQTtBQVFwRDtJQU1FLGlCQUFZLE1BQWMsRUFBRSxLQUFZO1FBQ3RDLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFBO1FBQ3BCLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFBO1FBQ2xCLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxNQUFNLENBQUMscUJBQXFCLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDeEQsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFBO1FBRWpFLElBQUk7WUFDRixJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsRUFBRSxDQUFBO1NBQzdCO1FBQUMsT0FBTyxLQUFLLEVBQUU7WUFDZCxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSx5QkFBeUIsQ0FBQyxDQUFBO1NBQ25EO0lBQ0gsQ0FBQztJQUVELHlCQUFPLEdBQVA7UUFDRSxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssRUFBRSxDQUFBO1FBRTVCLElBQUk7WUFDRixJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRSxDQUFBO1NBQzFCO1FBQUMsT0FBTyxLQUFLLEVBQUU7WUFDZCxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSx1QkFBdUIsQ0FBQyxDQUFBO1NBQ2pEO0lBQ0gsQ0FBQztJQUVELDRCQUFVLEdBQVY7UUFDRSxJQUFJO1lBQ0YsSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLEVBQUUsQ0FBQTtTQUM3QjtRQUFDLE9BQU8sS0FBSyxFQUFFO1lBQ2QsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsMEJBQTBCLENBQUMsQ0FBQTtTQUNwRDtRQUVELElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxFQUFFLENBQUE7SUFDN0IsQ0FBQztJQUVELHNCQUFJLGdDQUFXO2FBQWY7WUFDRSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFBO1FBQ2hDLENBQUM7OztPQUFBO0lBRUQsc0JBQUksK0JBQVU7YUFBZDtZQUNFLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUE7UUFDL0IsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSwyQkFBTTthQUFWO1lBQ0UsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQTtRQUNoQyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLCtCQUFVO2FBQWQ7WUFDRSxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFBO1FBQ3BDLENBQUM7OztPQUFBO0lBRUQsc0JBQUksNEJBQU87YUFBWDtZQUNFLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUE7UUFDM0IsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSxrQ0FBYTthQUFqQjtZQUNFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUE7UUFDbkMsQ0FBQzs7O09BQUE7SUFFRCxpQkFBaUI7SUFFakIsNkJBQVcsR0FBWCxVQUFZLEtBQVksRUFBRSxPQUFlLEVBQUUsTUFBbUI7UUFBbkIsdUJBQUEsRUFBQSxXQUFtQjtRQUN0RCxJQUFBLFNBQTBDLEVBQXhDLDBCQUFVLEVBQUUsMEJBQVUsRUFBRSxvQkFBTyxDQUFTO1FBQ2hELE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsVUFBVSxZQUFBLEVBQUUsVUFBVSxZQUFBLEVBQUUsT0FBTyxTQUFBLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQTtRQUNuRSxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsV0FBUyxPQUFTLEVBQUUsTUFBTSxDQUFDLENBQUE7SUFDakUsQ0FBQztJQUNILGNBQUM7QUFBRCxDQUFDLEFBdEVELElBc0VDIn0=","import { defineTargetProperties } from \"./target_properties\";\nvar Controller = /** @class */ (function () {\n    function Controller(context) {\n        this.context = context;\n    }\n    Controller.bless = function () {\n        defineTargetProperties(this);\n    };\n    Object.defineProperty(Controller.prototype, \"application\", {\n        get: function () {\n            return this.context.application;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Controller.prototype, \"scope\", {\n        get: function () {\n            return this.context.scope;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Controller.prototype, \"element\", {\n        get: function () {\n            return this.scope.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Controller.prototype, \"identifier\", {\n        get: function () {\n            return this.scope.identifier;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Controller.prototype, \"targets\", {\n        get: function () {\n            return this.scope.targets;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Controller.prototype, \"data\", {\n        get: function () {\n            return this.scope.data;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Controller.prototype.initialize = function () {\n        // Override in your subclass to set up initial controller state\n    };\n    Controller.prototype.connect = function () {\n        // Override in your subclass to respond when the controller is connected to the DOM\n    };\n    Controller.prototype.disconnect = function () {\n        // Override in your subclass to respond when the controller is disconnected from the DOM\n    };\n    Controller.targets = [];\n    return Controller;\n}());\nexport { Controller };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udHJvbGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb250cm9sbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUtBLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLHFCQUFxQixDQUFBO0FBTzVEO0lBU0Usb0JBQVksT0FBZ0I7UUFDMUIsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUE7SUFDeEIsQ0FBQztJQU5NLGdCQUFLLEdBQVo7UUFDRSxzQkFBc0IsQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUM5QixDQUFDO0lBTUQsc0JBQUksbUNBQVc7YUFBZjtZQUNFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUE7UUFDakMsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSw2QkFBSzthQUFUO1lBQ0UsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQTtRQUMzQixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLCtCQUFPO2FBQVg7WUFDRSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFBO1FBQzNCLENBQUM7OztPQUFBO0lBRUQsc0JBQUksa0NBQVU7YUFBZDtZQUNFLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUE7UUFDOUIsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSwrQkFBTzthQUFYO1lBQ0UsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQTtRQUMzQixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLDRCQUFJO2FBQVI7WUFDRSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFBO1FBQ3hCLENBQUM7OztPQUFBO0lBRUQsK0JBQVUsR0FBVjtRQUNFLCtEQUErRDtJQUNqRSxDQUFDO0lBRUQsNEJBQU8sR0FBUDtRQUNFLG1GQUFtRjtJQUNyRixDQUFDO0lBRUQsK0JBQVUsR0FBVjtRQUNFLHdGQUF3RjtJQUMxRixDQUFDO0lBOUNNLGtCQUFPLEdBQWEsRUFBRSxDQUFBO0lBK0MvQixpQkFBQztDQUFBLEFBaERELElBZ0RDO1NBaERZLFVBQVUifQ==","var DataMap = /** @class */ (function () {\n    function DataMap(scope) {\n        this.scope = scope;\n    }\n    Object.defineProperty(DataMap.prototype, \"element\", {\n        get: function () {\n            return this.scope.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DataMap.prototype, \"identifier\", {\n        get: function () {\n            return this.scope.identifier;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DataMap.prototype.get = function (key) {\n        key = this.getFormattedKey(key);\n        return this.element.getAttribute(key);\n    };\n    DataMap.prototype.set = function (key, value) {\n        key = this.getFormattedKey(key);\n        this.element.setAttribute(key, value);\n        return this.get(key);\n    };\n    DataMap.prototype.has = function (key) {\n        key = this.getFormattedKey(key);\n        return this.element.hasAttribute(key);\n    };\n    DataMap.prototype.delete = function (key) {\n        if (this.has(key)) {\n            key = this.getFormattedKey(key);\n            this.element.removeAttribute(key);\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    DataMap.prototype.getFormattedKey = function (key) {\n        return \"data-\" + this.identifier + \"-\" + dasherize(key);\n    };\n    return DataMap;\n}());\nexport { DataMap };\nfunction dasherize(value) {\n    return value.replace(/([A-Z])/g, function (_, char) { return \"-\" + char.toLowerCase(); });\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YV9tYXAuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZGF0YV9tYXAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUE7SUFHRSxpQkFBWSxLQUFZO1FBQ3RCLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFBO0lBQ3BCLENBQUM7SUFFRCxzQkFBSSw0QkFBTzthQUFYO1lBQ0UsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQTtRQUMzQixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLCtCQUFVO2FBQWQ7WUFDRSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFBO1FBQzlCLENBQUM7OztPQUFBO0lBRUQscUJBQUcsR0FBSCxVQUFJLEdBQVc7UUFDYixHQUFHLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUMvQixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBQ3ZDLENBQUM7SUFFRCxxQkFBRyxHQUFILFVBQUksR0FBVyxFQUFFLEtBQWE7UUFDNUIsR0FBRyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDL0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFBO1FBQ3JDLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUN0QixDQUFDO0lBRUQscUJBQUcsR0FBSCxVQUFJLEdBQVc7UUFDYixHQUFHLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUMvQixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBQ3ZDLENBQUM7SUFFRCx3QkFBTSxHQUFOLFVBQU8sR0FBVztRQUNoQixJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUU7WUFDakIsR0FBRyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLENBQUE7WUFDL0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLENBQUE7WUFDakMsT0FBTyxJQUFJLENBQUE7U0FDWjthQUFNO1lBQ0wsT0FBTyxLQUFLLENBQUE7U0FDYjtJQUNILENBQUM7SUFFTyxpQ0FBZSxHQUF2QixVQUF3QixHQUFXO1FBQ2pDLE9BQU8sVUFBUSxJQUFJLENBQUMsVUFBVSxTQUFJLFNBQVMsQ0FBQyxHQUFHLENBQUcsQ0FBQTtJQUNwRCxDQUFDO0lBQ0gsY0FBQztBQUFELENBQUMsQUE1Q0QsSUE0Q0M7O0FBRUQsbUJBQW1CLEtBQWE7SUFDOUIsT0FBTyxLQUFLLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxVQUFDLENBQUMsRUFBRSxJQUFJLElBQUssT0FBQSxNQUFJLElBQUksQ0FBQyxXQUFXLEVBQUksRUFBeEIsQ0FBd0IsQ0FBQyxDQUFBO0FBQ3pFLENBQUMifQ==","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/** @hidden */\nexport function blessDefinition(definition) {\n    return {\n        identifier: definition.identifier,\n        controllerConstructor: blessControllerConstructor(definition.controllerConstructor)\n    };\n}\nfunction blessControllerConstructor(controllerConstructor) {\n    var constructor = extend(controllerConstructor);\n    constructor.bless();\n    return constructor;\n}\nvar extend = (function () {\n    function extendWithReflect(constructor) {\n        function Controller() {\n            var _newTarget = this && this instanceof Controller ? this.constructor : void 0;\n            return Reflect.construct(constructor, arguments, _newTarget);\n        }\n        Controller.prototype = Object.create(constructor.prototype, {\n            constructor: { value: Controller }\n        });\n        Reflect.setPrototypeOf(Controller, constructor);\n        return Controller;\n    }\n    function testReflectExtension() {\n        var a = function () { this.a.call(this); };\n        var b = extendWithReflect(a);\n        b.prototype.a = function () { };\n        return new b;\n    }\n    try {\n        testReflectExtension();\n        return extendWithReflect;\n    }\n    catch (error) {\n        return function (constructor) { return /** @class */ (function (_super) {\n            __extends(Controller, _super);\n            function Controller() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            return Controller;\n        }(constructor)); };\n    }\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmaW5pdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kZWZpbml0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFPQSxjQUFjO0FBQ2QsTUFBTSwwQkFBMEIsVUFBc0I7SUFDcEQsT0FBTztRQUNMLFVBQVUsRUFBRSxVQUFVLENBQUMsVUFBVTtRQUNqQyxxQkFBcUIsRUFBRSwwQkFBMEIsQ0FBQyxVQUFVLENBQUMscUJBQXFCLENBQUM7S0FDcEYsQ0FBQTtBQUNILENBQUM7QUFFRCxvQ0FBb0MscUJBQTRDO0lBQzlFLElBQU0sV0FBVyxHQUFHLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFBO0lBQ2pELFdBQVcsQ0FBQyxLQUFLLEVBQUUsQ0FBQTtJQUNuQixPQUFPLFdBQVcsQ0FBQTtBQUNwQixDQUFDO0FBRUQsSUFBTSxNQUFNLEdBQUcsQ0FBQztJQUdkLDJCQUFzRCxXQUFjO1FBQ2xFOztZQUNFLE9BQU8sT0FBTyxDQUFDLFNBQVMsQ0FBQyxXQUFXLEVBQUUsU0FBUyxhQUFhLENBQUE7UUFDOUQsQ0FBQztRQUVELFVBQVUsQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsU0FBUyxFQUFFO1lBQzFELFdBQVcsRUFBRSxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUU7U0FDbkMsQ0FBQyxDQUFBO1FBRUYsT0FBTyxDQUFDLGNBQWMsQ0FBQyxVQUFVLEVBQUUsV0FBVyxDQUFDLENBQUE7UUFDL0MsT0FBTyxVQUFpQixDQUFBO0lBQzFCLENBQUM7SUFFRDtRQUNFLElBQU0sQ0FBQyxHQUFHLGNBQXNCLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBLENBQUMsQ0FBUSxDQUFBO1FBQzFELElBQU0sQ0FBQyxHQUFHLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQzlCLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxHQUFHLGNBQVksQ0FBQyxDQUFBO1FBQzdCLE9BQU8sSUFBSSxDQUFDLENBQUE7SUFDZCxDQUFDO0lBRUQsSUFBSTtRQUNGLG9CQUFvQixFQUFFLENBQUE7UUFDdEIsT0FBTyxpQkFBaUIsQ0FBQTtLQUN6QjtJQUFDLE9BQU8sS0FBSyxFQUFFO1FBQ2QsT0FBTyxVQUE0QixXQUFjLElBQUs7WUFBeUIsOEJBQVc7WUFBcEM7O1lBQXNDLENBQUM7WUFBRCxpQkFBQztRQUFELENBQUMsQUFBdkMsQ0FBeUIsV0FBVyxJQUFwQyxDQUF1QyxDQUFBO0tBQzlGO0FBQ0gsQ0FBQyxDQUFDLEVBQUUsQ0FBQSJ9","import { EventListener } from \"./event_listener\";\nvar Dispatcher = /** @class */ (function () {\n    function Dispatcher(application) {\n        this.application = application;\n        this.eventListenerMaps = new Map;\n        this.started = false;\n    }\n    Dispatcher.prototype.start = function () {\n        if (!this.started) {\n            this.started = true;\n            this.eventListeners.forEach(function (eventListener) { return eventListener.connect(); });\n        }\n    };\n    Dispatcher.prototype.stop = function () {\n        if (this.started) {\n            this.started = false;\n            this.eventListeners.forEach(function (eventListener) { return eventListener.disconnect(); });\n        }\n    };\n    Object.defineProperty(Dispatcher.prototype, \"eventListeners\", {\n        get: function () {\n            return Array.from(this.eventListenerMaps.values())\n                .reduce(function (listeners, map) { return listeners.concat(Array.from(map.values())); }, []);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // Binding observer delegate\n    /** @hidden */\n    Dispatcher.prototype.bindingConnected = function (binding) {\n        this.fetchEventListenerForBinding(binding).bindingConnected(binding);\n    };\n    /** @hidden */\n    Dispatcher.prototype.bindingDisconnected = function (binding) {\n        this.fetchEventListenerForBinding(binding).bindingDisconnected(binding);\n    };\n    // Error handling\n    Dispatcher.prototype.handleError = function (error, message, detail) {\n        if (detail === void 0) { detail = {}; }\n        this.application.handleError(error, \"Error \" + message, detail);\n    };\n    Dispatcher.prototype.fetchEventListenerForBinding = function (binding) {\n        var eventTarget = binding.eventTarget, eventName = binding.eventName;\n        return this.fetchEventListener(eventTarget, eventName);\n    };\n    Dispatcher.prototype.fetchEventListener = function (eventTarget, eventName) {\n        var eventListenerMap = this.fetchEventListenerMapForEventTarget(eventTarget);\n        var eventListener = eventListenerMap.get(eventName);\n        if (!eventListener) {\n            eventListener = this.createEventListener(eventTarget, eventName);\n            eventListenerMap.set(eventName, eventListener);\n        }\n        return eventListener;\n    };\n    Dispatcher.prototype.createEventListener = function (eventTarget, eventName) {\n        var eventListener = new EventListener(eventTarget, eventName);\n        if (this.started) {\n            eventListener.connect();\n        }\n        return eventListener;\n    };\n    Dispatcher.prototype.fetchEventListenerMapForEventTarget = function (eventTarget) {\n        var eventListenerMap = this.eventListenerMaps.get(eventTarget);\n        if (!eventListenerMap) {\n            eventListenerMap = new Map;\n            this.eventListenerMaps.set(eventTarget, eventListenerMap);\n        }\n        return eventListenerMap;\n    };\n    return Dispatcher;\n}());\nexport { Dispatcher };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlzcGF0Y2hlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kaXNwYXRjaGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQTtBQUVoRDtJQUtFLG9CQUFZLFdBQXdCO1FBQ2xDLElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFBO1FBQzlCLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLEdBQUcsQ0FBQTtRQUNoQyxJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQTtJQUN0QixDQUFDO0lBRUQsMEJBQUssR0FBTDtRQUNFLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFO1lBQ2pCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFBO1lBQ25CLElBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLFVBQUEsYUFBYSxJQUFJLE9BQUEsYUFBYSxDQUFDLE9BQU8sRUFBRSxFQUF2QixDQUF1QixDQUFDLENBQUE7U0FDdEU7SUFDSCxDQUFDO0lBRUQseUJBQUksR0FBSjtRQUNFLElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNoQixJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQTtZQUNwQixJQUFJLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxVQUFBLGFBQWEsSUFBSSxPQUFBLGFBQWEsQ0FBQyxVQUFVLEVBQUUsRUFBMUIsQ0FBMEIsQ0FBQyxDQUFBO1NBQ3pFO0lBQ0gsQ0FBQztJQUVELHNCQUFJLHNDQUFjO2FBQWxCO1lBQ0UsT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLEVBQUUsQ0FBQztpQkFDL0MsTUFBTSxDQUFDLFVBQUMsU0FBUyxFQUFFLEdBQUcsSUFBSyxPQUFBLFNBQVMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxFQUExQyxDQUEwQyxFQUFFLEVBQXFCLENBQUMsQ0FBQTtRQUNsRyxDQUFDOzs7T0FBQTtJQUVELDRCQUE0QjtJQUU1QixjQUFjO0lBQ2QscUNBQWdCLEdBQWhCLFVBQWlCLE9BQWdCO1FBQy9CLElBQUksQ0FBQyw0QkFBNEIsQ0FBQyxPQUFPLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQTtJQUN0RSxDQUFDO0lBRUQsY0FBYztJQUNkLHdDQUFtQixHQUFuQixVQUFvQixPQUFnQjtRQUNsQyxJQUFJLENBQUMsNEJBQTRCLENBQUMsT0FBTyxDQUFDLENBQUMsbUJBQW1CLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDekUsQ0FBQztJQUVELGlCQUFpQjtJQUVqQixnQ0FBVyxHQUFYLFVBQVksS0FBWSxFQUFFLE9BQWUsRUFBRSxNQUFtQjtRQUFuQix1QkFBQSxFQUFBLFdBQW1CO1FBQzVELElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxXQUFTLE9BQVMsRUFBRSxNQUFNLENBQUMsQ0FBQTtJQUNqRSxDQUFDO0lBRU8saURBQTRCLEdBQXBDLFVBQXFDLE9BQWdCO1FBQzNDLElBQUEsaUNBQVcsRUFBRSw2QkFBUyxDQUFZO1FBQzFDLE9BQU8sSUFBSSxDQUFDLGtCQUFrQixDQUFDLFdBQVcsRUFBRSxTQUFTLENBQUMsQ0FBQTtJQUN4RCxDQUFDO0lBRU8sdUNBQWtCLEdBQTFCLFVBQTJCLFdBQXdCLEVBQUUsU0FBaUI7UUFDcEUsSUFBTSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsbUNBQW1DLENBQUMsV0FBVyxDQUFDLENBQUE7UUFDOUUsSUFBSSxhQUFhLEdBQUcsZ0JBQWdCLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFBO1FBQ25ELElBQUksQ0FBQyxhQUFhLEVBQUU7WUFDbEIsYUFBYSxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxXQUFXLEVBQUUsU0FBUyxDQUFDLENBQUE7WUFDaEUsZ0JBQWdCLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxhQUFhLENBQUMsQ0FBQTtTQUMvQztRQUNELE9BQU8sYUFBYSxDQUFBO0lBQ3RCLENBQUM7SUFFTyx3Q0FBbUIsR0FBM0IsVUFBNEIsV0FBd0IsRUFBRSxTQUFpQjtRQUNyRSxJQUFNLGFBQWEsR0FBRyxJQUFJLGFBQWEsQ0FBQyxXQUFXLEVBQUUsU0FBUyxDQUFDLENBQUE7UUFDL0QsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFO1lBQ2hCLGFBQWEsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtTQUN4QjtRQUNELE9BQU8sYUFBYSxDQUFBO0lBQ3RCLENBQUM7SUFFTyx3REFBbUMsR0FBM0MsVUFBNEMsV0FBd0I7UUFDbEUsSUFBSSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFBO1FBQzlELElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtZQUNyQixnQkFBZ0IsR0FBRyxJQUFJLEdBQUcsQ0FBQTtZQUMxQixJQUFJLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFBO1NBQzFEO1FBQ0QsT0FBTyxnQkFBZ0IsQ0FBQTtJQUN6QixDQUFDO0lBQ0gsaUJBQUM7QUFBRCxDQUFDLEFBL0VELElBK0VDIn0=","var EventListener = /** @class */ (function () {\n    function EventListener(eventTarget, eventName) {\n        this.eventTarget = eventTarget;\n        this.eventName = eventName;\n        this.unorderedBindings = new Set;\n    }\n    EventListener.prototype.connect = function () {\n        this.eventTarget.addEventListener(this.eventName, this, false);\n    };\n    EventListener.prototype.disconnect = function () {\n        this.eventTarget.removeEventListener(this.eventName, this, false);\n    };\n    // Binding observer delegate\n    /** @hidden */\n    EventListener.prototype.bindingConnected = function (binding) {\n        this.unorderedBindings.add(binding);\n    };\n    /** @hidden */\n    EventListener.prototype.bindingDisconnected = function (binding) {\n        this.unorderedBindings.delete(binding);\n    };\n    EventListener.prototype.handleEvent = function (event) {\n        var extendedEvent = extendEvent(event);\n        for (var _i = 0, _a = this.bindings; _i < _a.length; _i++) {\n            var binding = _a[_i];\n            if (extendedEvent.immediatePropagationStopped) {\n                break;\n            }\n            else {\n                binding.handleEvent(extendedEvent);\n            }\n        }\n    };\n    Object.defineProperty(EventListener.prototype, \"bindings\", {\n        get: function () {\n            return Array.from(this.unorderedBindings).sort(function (left, right) {\n                var leftIndex = left.index, rightIndex = right.index;\n                return leftIndex < rightIndex ? -1 : leftIndex > rightIndex ? 1 : 0;\n            });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return EventListener;\n}());\nexport { EventListener };\nfunction extendEvent(event) {\n    if (\"immediatePropagationStopped\" in event) {\n        return event;\n    }\n    else {\n        var stopImmediatePropagation_1 = event.stopImmediatePropagation;\n        return Object.assign(event, {\n            immediatePropagationStopped: false,\n            stopImmediatePropagation: function () {\n                this.immediatePropagationStopped = true;\n                stopImmediatePropagation_1.call(this);\n            }\n        });\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXZlbnRfbGlzdGVuZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZXZlbnRfbGlzdGVuZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUE7SUFLRSx1QkFBWSxXQUF3QixFQUFFLFNBQWlCO1FBQ3JELElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFBO1FBQzlCLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFBO1FBQzFCLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLEdBQUcsQ0FBQTtJQUNsQyxDQUFDO0lBRUQsK0JBQU8sR0FBUDtRQUNFLElBQUksQ0FBQyxXQUFXLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUE7SUFDaEUsQ0FBQztJQUVELGtDQUFVLEdBQVY7UUFDRSxJQUFJLENBQUMsV0FBVyxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFBO0lBQ25FLENBQUM7SUFFRCw0QkFBNEI7SUFFNUIsY0FBYztJQUNkLHdDQUFnQixHQUFoQixVQUFpQixPQUFnQjtRQUMvQixJQUFJLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBQ3JDLENBQUM7SUFFRCxjQUFjO0lBQ2QsMkNBQW1CLEdBQW5CLFVBQW9CLE9BQWdCO1FBQ2xDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDeEMsQ0FBQztJQUVELG1DQUFXLEdBQVgsVUFBWSxLQUFZO1FBQ3RCLElBQU0sYUFBYSxHQUFHLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQTtRQUN4QyxLQUFzQixVQUFhLEVBQWIsS0FBQSxJQUFJLENBQUMsUUFBUSxFQUFiLGNBQWEsRUFBYixJQUFhLEVBQUU7WUFBaEMsSUFBTSxPQUFPLFNBQUE7WUFDaEIsSUFBSSxhQUFhLENBQUMsMkJBQTJCLEVBQUU7Z0JBQzdDLE1BQUs7YUFDTjtpQkFBTTtnQkFDTCxPQUFPLENBQUMsV0FBVyxDQUFDLGFBQWEsQ0FBQyxDQUFBO2FBQ25DO1NBQ0Y7SUFDSCxDQUFDO0lBRUQsc0JBQUksbUNBQVE7YUFBWjtZQUNFLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBQyxJQUFJLEVBQUUsS0FBSztnQkFDekQsSUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLEtBQUssRUFBRSxVQUFVLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQTtnQkFDdEQsT0FBTyxTQUFTLEdBQUcsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7WUFDckUsQ0FBQyxDQUFDLENBQUE7UUFDSixDQUFDOzs7T0FBQTtJQUNILG9CQUFDO0FBQUQsQ0FBQyxBQWhERCxJQWdEQzs7QUFFRCxxQkFBcUIsS0FBWTtJQUMvQixJQUFJLDZCQUE2QixJQUFJLEtBQUssRUFBRTtRQUMxQyxPQUFPLEtBQUssQ0FBQTtLQUNiO1NBQU07UUFDRyxJQUFBLDJEQUF3QixDQUFVO1FBQzFDLE9BQU8sTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUU7WUFDMUIsMkJBQTJCLEVBQUUsS0FBSztZQUNsQyx3QkFBd0I7Z0JBQ3RCLElBQUksQ0FBQywyQkFBMkIsR0FBRyxJQUFJLENBQUE7Z0JBQ3ZDLDBCQUF3QixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtZQUNyQyxDQUFDO1NBQ0YsQ0FBQyxDQUFBO0tBQ0g7QUFDSCxDQUFDIn0=","import { Context } from \"./context\";\nimport { blessDefinition } from \"./definition\";\nvar Module = /** @class */ (function () {\n    function Module(application, definition) {\n        this.application = application;\n        this.definition = blessDefinition(definition);\n        this.contextsByScope = new WeakMap;\n        this.connectedContexts = new Set;\n    }\n    Object.defineProperty(Module.prototype, \"identifier\", {\n        get: function () {\n            return this.definition.identifier;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Module.prototype, \"controllerConstructor\", {\n        get: function () {\n            return this.definition.controllerConstructor;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Module.prototype, \"contexts\", {\n        get: function () {\n            return Array.from(this.connectedContexts);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Module.prototype.connectContextForScope = function (scope) {\n        var context = this.fetchContextForScope(scope);\n        this.connectedContexts.add(context);\n        context.connect();\n    };\n    Module.prototype.disconnectContextForScope = function (scope) {\n        var context = this.contextsByScope.get(scope);\n        if (context) {\n            this.connectedContexts.delete(context);\n            context.disconnect();\n        }\n    };\n    Module.prototype.fetchContextForScope = function (scope) {\n        var context = this.contextsByScope.get(scope);\n        if (!context) {\n            context = new Context(this, scope);\n            this.contextsByScope.set(scope, context);\n        }\n        return context;\n    };\n    return Module;\n}());\nexport { Module };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL21vZHVsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sV0FBVyxDQUFBO0FBRW5DLE9BQU8sRUFBYyxlQUFlLEVBQUUsTUFBTSxjQUFjLENBQUE7QUFHMUQ7SUFNRSxnQkFBWSxXQUF3QixFQUFFLFVBQXNCO1FBQzFELElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFBO1FBQzlCLElBQUksQ0FBQyxVQUFVLEdBQUcsZUFBZSxDQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQzdDLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxPQUFPLENBQUE7UUFDbEMsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksR0FBRyxDQUFBO0lBQ2xDLENBQUM7SUFFRCxzQkFBSSw4QkFBVTthQUFkO1lBQ0UsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQTtRQUNuQyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLHlDQUFxQjthQUF6QjtZQUNFLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxxQkFBcUIsQ0FBQTtRQUM5QyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLDRCQUFRO2FBQVo7WUFDRSxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUE7UUFDM0MsQ0FBQzs7O09BQUE7SUFFRCx1Q0FBc0IsR0FBdEIsVUFBdUIsS0FBWTtRQUNqQyxJQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsb0JBQW9CLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDaEQsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQTtRQUNuQyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUE7SUFDbkIsQ0FBQztJQUVELDBDQUF5QixHQUF6QixVQUEwQixLQUFZO1FBQ3BDLElBQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFBO1FBQy9DLElBQUksT0FBTyxFQUFFO1lBQ1gsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQTtZQUN0QyxPQUFPLENBQUMsVUFBVSxFQUFFLENBQUE7U0FDckI7SUFDSCxDQUFDO0lBRU8scUNBQW9CLEdBQTVCLFVBQTZCLEtBQVk7UUFDdkMsSUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDN0MsSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNaLE9BQU8sR0FBRyxJQUFJLE9BQU8sQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUE7WUFDbEMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFBO1NBQ3pDO1FBQ0QsT0FBTyxPQUFPLENBQUE7SUFDaEIsQ0FBQztJQUNILGFBQUM7QUFBRCxDQUFDLEFBL0NELElBK0NDIn0=","import { Module } from \"./module\";\nimport { Multimap } from \"@stimulus/multimap\";\nimport { ScopeObserver } from \"./scope_observer\";\nvar Router = /** @class */ (function () {\n    function Router(application) {\n        this.application = application;\n        this.scopeObserver = new ScopeObserver(this.element, this.schema, this);\n        this.scopesByIdentifier = new Multimap;\n        this.modulesByIdentifier = new Map;\n    }\n    Object.defineProperty(Router.prototype, \"element\", {\n        get: function () {\n            return this.application.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Router.prototype, \"schema\", {\n        get: function () {\n            return this.application.schema;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Router.prototype, \"controllerAttribute\", {\n        get: function () {\n            return this.schema.controllerAttribute;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Router.prototype, \"modules\", {\n        get: function () {\n            return Array.from(this.modulesByIdentifier.values());\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Router.prototype, \"contexts\", {\n        get: function () {\n            return this.modules.reduce(function (contexts, module) { return contexts.concat(module.contexts); }, []);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Router.prototype.start = function () {\n        this.scopeObserver.start();\n    };\n    Router.prototype.stop = function () {\n        this.scopeObserver.stop();\n    };\n    Router.prototype.loadDefinition = function (definition) {\n        this.unloadIdentifier(definition.identifier);\n        var module = new Module(this.application, definition);\n        this.connectModule(module);\n    };\n    Router.prototype.unloadIdentifier = function (identifier) {\n        var module = this.modulesByIdentifier.get(identifier);\n        if (module) {\n            this.disconnectModule(module);\n        }\n    };\n    Router.prototype.getContextForElementAndIdentifier = function (element, identifier) {\n        var module = this.modulesByIdentifier.get(identifier);\n        if (module) {\n            return module.contexts.find(function (context) { return context.element == element; });\n        }\n    };\n    // Error handler delegate\n    /** @hidden */\n    Router.prototype.handleError = function (error, message, detail) {\n        this.application.handleError(error, message, detail);\n    };\n    // Scope observer delegate\n    /** @hidden */\n    Router.prototype.scopeConnected = function (scope) {\n        this.scopesByIdentifier.add(scope.identifier, scope);\n        var module = this.modulesByIdentifier.get(scope.identifier);\n        if (module) {\n            module.connectContextForScope(scope);\n        }\n    };\n    /** @hidden */\n    Router.prototype.scopeDisconnected = function (scope) {\n        this.scopesByIdentifier.delete(scope.identifier, scope);\n        var module = this.modulesByIdentifier.get(scope.identifier);\n        if (module) {\n            module.disconnectContextForScope(scope);\n        }\n    };\n    // Modules\n    Router.prototype.connectModule = function (module) {\n        this.modulesByIdentifier.set(module.identifier, module);\n        var scopes = this.scopesByIdentifier.getValuesForKey(module.identifier);\n        scopes.forEach(function (scope) { return module.connectContextForScope(scope); });\n    };\n    Router.prototype.disconnectModule = function (module) {\n        this.modulesByIdentifier.delete(module.identifier);\n        var scopes = this.scopesByIdentifier.getValuesForKey(module.identifier);\n        scopes.forEach(function (scope) { return module.disconnectContextForScope(scope); });\n    };\n    return Router;\n}());\nexport { Router };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91dGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3JvdXRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFHQSxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sVUFBVSxDQUFBO0FBQ2pDLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQTtBQUc3QyxPQUFPLEVBQUUsYUFBYSxFQUF5QixNQUFNLGtCQUFrQixDQUFBO0FBRXZFO0lBTUUsZ0JBQVksV0FBd0I7UUFDbEMsSUFBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUE7UUFDOUIsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLGFBQWEsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUE7UUFDdkUsSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUksUUFBUSxDQUFBO1FBQ3RDLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLEdBQUcsQ0FBQTtJQUNwQyxDQUFDO0lBRUQsc0JBQUksMkJBQU87YUFBWDtZQUNFLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUE7UUFDakMsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSwwQkFBTTthQUFWO1lBQ0UsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQTtRQUNoQyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLHVDQUFtQjthQUF2QjtZQUNFLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQTtRQUN4QyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLDJCQUFPO2FBQVg7WUFDRSxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUE7UUFDdEQsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSw0QkFBUTthQUFaO1lBQ0UsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FB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","export var defaultSchema = {\n    controllerAttribute: \"data-controller\",\n    actionAttribute: \"data-action\",\n    targetAttribute: \"data-target\"\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NoZW1hLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3NjaGVtYS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFNQSxNQUFNLENBQUMsSUFBTSxhQUFhLEdBQVc7SUFDbkMsbUJBQW1CLEVBQUUsaUJBQWlCO0lBQ3RDLGVBQWUsRUFBRSxhQUFhO0lBQzlCLGVBQWUsRUFBRSxhQUFhO0NBQy9CLENBQUEifQ==","import { DataMap } from \"./data_map\";\nimport { TargetSet } from \"./target_set\";\nimport { attributeValueContainsToken } from \"./selectors\";\nvar Scope = /** @class */ (function () {\n    function Scope(schema, identifier, element) {\n        this.schema = schema;\n        this.identifier = identifier;\n        this.element = element;\n        this.targets = new TargetSet(this);\n        this.data = new DataMap(this);\n    }\n    Scope.prototype.findElement = function (selector) {\n        return this.findAllElements(selector)[0];\n    };\n    Scope.prototype.findAllElements = function (selector) {\n        var head = this.element.matches(selector) ? [this.element] : [];\n        var tail = this.filterElements(Array.from(this.element.querySelectorAll(selector)));\n        return head.concat(tail);\n    };\n    Scope.prototype.filterElements = function (elements) {\n        var _this = this;\n        return elements.filter(function (element) { return _this.containsElement(element); });\n    };\n    Scope.prototype.containsElement = function (element) {\n        return element.closest(this.controllerSelector) === this.element;\n    };\n    Object.defineProperty(Scope.prototype, \"controllerSelector\", {\n        get: function () {\n            return attributeValueContainsToken(this.schema.controllerAttribute, this.identifier);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Scope;\n}());\nexport { Scope };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NvcGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc2NvcGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLFlBQVksQ0FBQTtBQUVwQyxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sY0FBYyxDQUFBO0FBQ3hDLE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLGFBQWEsQ0FBQTtBQUV6RDtJQU9FLGVBQVksTUFBYyxFQUFFLFVBQWtCLEVBQUUsT0FBZ0I7UUFDOUQsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUE7UUFDcEIsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUE7UUFDNUIsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUE7UUFDdEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUNsQyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFBO0lBQy9CLENBQUM7SUFFRCwyQkFBVyxHQUFYLFVBQVksUUFBZ0I7UUFDMUIsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO0lBQzFDLENBQUM7SUFFRCwrQkFBZSxHQUFmLFVBQWdCLFFBQWdCO1FBQzlCLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFBO1FBQ2pFLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUNyRixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUE7SUFDMUIsQ0FBQztJQUVELDhCQUFjLEdBQWQsVUFBZSxRQUFtQjtRQUFsQyxpQkFFQztRQURDLE9BQU8sUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFBLE9BQU8sSUFBSSxPQUFBLEtBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLEVBQTdCLENBQTZCLENBQUMsQ0FBQTtJQUNsRSxDQUFDO0lBRUQsK0JBQWUsR0FBZixVQUFnQixPQUFnQjtRQUM5QixPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEtBQUssSUFBSSxDQUFDLE9BQU8sQ0FBQTtJQUNsRSxDQUFDO0lBRUQsc0JBQVkscUNBQWtCO2FBQTlCO1lBQ0UsT0FBTywyQkFBMkIsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLG1CQUFtQixFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQTtRQUN0RixDQUFDOzs7T0FBQTtJQUNILFlBQUM7QUFBRCxDQUFDLEFBcENELElBb0NDIn0=","import { Scope } from \"./scope\";\nimport { ValueListObserver } from \"@stimulus/mutation-observers\";\nvar ScopeObserver = /** @class */ (function () {\n    function ScopeObserver(element, schema, delegate) {\n        this.element = element;\n        this.schema = schema;\n        this.delegate = delegate;\n        this.valueListObserver = new ValueListObserver(this.element, this.controllerAttribute, this);\n        this.scopesByIdentifierByElement = new WeakMap;\n        this.scopeReferenceCounts = new WeakMap;\n    }\n    ScopeObserver.prototype.start = function () {\n        this.valueListObserver.start();\n    };\n    ScopeObserver.prototype.stop = function () {\n        this.valueListObserver.stop();\n    };\n    Object.defineProperty(ScopeObserver.prototype, \"controllerAttribute\", {\n        get: function () {\n            return this.schema.controllerAttribute;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // Value observer delegate\n    /** @hidden */\n    ScopeObserver.prototype.parseValueForToken = function (token) {\n        var element = token.element, identifier = token.content;\n        var scopesByIdentifier = this.fetchScopesByIdentifierForElement(element);\n        var scope = scopesByIdentifier.get(identifier);\n        if (!scope) {\n            scope = new Scope(this.schema, identifier, element);\n            scopesByIdentifier.set(identifier, scope);\n        }\n        return scope;\n    };\n    /** @hidden */\n    ScopeObserver.prototype.elementMatchedValue = function (element, value) {\n        var referenceCount = (this.scopeReferenceCounts.get(value) || 0) + 1;\n        this.scopeReferenceCounts.set(value, referenceCount);\n        if (referenceCount == 1) {\n            this.delegate.scopeConnected(value);\n        }\n    };\n    /** @hidden */\n    ScopeObserver.prototype.elementUnmatchedValue = function (element, value) {\n        var referenceCount = this.scopeReferenceCounts.get(value);\n        if (referenceCount) {\n            this.scopeReferenceCounts.set(value, referenceCount - 1);\n            if (referenceCount == 1) {\n                this.delegate.scopeDisconnected(value);\n            }\n        }\n    };\n    ScopeObserver.prototype.fetchScopesByIdentifierForElement = function (element) {\n        var scopesByIdentifier = this.scopesByIdentifierByElement.get(element);\n        if (!scopesByIdentifier) {\n            scopesByIdentifier = new Map;\n            this.scopesByIdentifierByElement.set(element, scopesByIdentifier);\n        }\n        return scopesByIdentifier;\n    };\n    return ScopeObserver;\n}());\nexport { ScopeObserver };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NvcGVfb2JzZXJ2ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc2NvcGVfb2JzZXJ2ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLFNBQVMsQ0FBQTtBQUMvQixPQUFPLEVBQVMsaUJBQWlCLEVBQTZCLE1BQU0sOEJBQThCLENBQUE7QUFPbEc7SUFRRSx1QkFBWSxPQUFnQixFQUFFLE1BQWMsRUFBRSxRQUErQjtRQUMzRSxJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQTtRQUN0QixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQTtRQUNwQixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQTtRQUN4QixJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUM1RixJQUFJLENBQUMsMkJBQTJCLEdBQUcsSUFBSSxPQUFPLENBQUE7UUFDOUMsSUFBSSxDQUFDLG9CQUFvQixHQUFHLElBQUksT0FBTyxDQUFBO0lBQ3pDLENBQUM7SUFFRCw2QkFBSyxHQUFMO1FBQ0UsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEtBQUssRUFBRSxDQUFBO0lBQ2hDLENBQUM7SUFFRCw0QkFBSSxHQUFKO1FBQ0UsSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksRUFBRSxDQUFBO0lBQy9CLENBQUM7SUFFRCxzQkFBSSw4Q0FBbUI7YUFBdkI7WUFDRSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsbUJBQW1CLENBQUE7UUFDeEMsQ0FBQzs7O09BQUE7SUFFRCwwQkFBMEI7SUFFMUIsY0FBYztJQUNkLDBDQUFrQixHQUFsQixVQUFtQixLQUFZO1FBQ3JCLElBQUEsdUJBQU8sRUFBRSwwQkFBbUIsQ0FBVTtRQUM5QyxJQUFNLGtCQUFrQixHQUFHLElBQUksQ0FBQyxpQ0FBaUMsQ0FBQyxPQUFPLENBQUMsQ0FBQTtRQUUxRSxJQUFJLEtBQUssR0FBRyxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUE7UUFDOUMsSUFBSSxDQUFDLEtBQUssRUFBRTtZQUNWLEtBQUssR0FBRyxJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLFVBQVUsRUFBRSxPQUFPLENBQUMsQ0FBQTtZQUNuRCxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLEtBQUssQ0FBQyxDQUFBO1NBQzFDO1FBRUQsT0FBTyxLQUFLLENBQUE7SUFDZCxDQUFDO0lBRUQsY0FBYztJQUNkLDJDQUFtQixHQUFuQixVQUFvQixPQUFnQixFQUFFLEtBQVk7UUFDaEQsSUFBTSxjQUFjLEdBQUcsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUN0RSxJQUFJLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxjQUFjLENBQUMsQ0FBQTtRQUNwRCxJQUFJLGNBQWMsSUFBSSxDQUFDLEVBQUU7WUFDdkIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUE7U0FDcEM7SUFDSCxDQUFDO0lBRUQsY0FBYztJQUNkLDZDQUFxQixHQUFyQixVQUFzQixPQUFnQixFQUFFLEtBQVk7UUFDbEQsSUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQTtRQUMzRCxJQUFJLGNBQWMsRUFBRTtZQUNsQixJQUFJLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxjQUFjLEdBQUcsQ0FBQyxDQUFDLENBQUE7WUFDeEQsSUFBSSxjQUFjLElBQUksQ0FBQyxFQUFFO2dCQUN2QixJQUFJLENBQUMsUUFBUSxDQUFDLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxDQUFBO2FBQ3ZDO1NBQ0Y7SUFDSCxDQUFDO0lBRU8seURBQWlDLEdBQXpDLFVBQTBDLE9BQWdCO1FBQ3hELElBQUksa0JBQWtCLEdBQUcsSUFBSSxDQUFDLDJCQUEyQixDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQTtRQUN0RSxJQUFJLENBQUMsa0JBQWtCLEVBQUU7WUFDdkIsa0JBQWtCLEdBQUcsSUFBSSxHQUFHLENBQUE7WUFDNUIsSUFBSSxDQUFDLDJCQUEyQixDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsa0JBQWtCLENBQUMsQ0FBQTtTQUNsRTtRQUNELE9BQU8sa0JBQWtCLENBQUE7SUFDM0IsQ0FBQztJQUNILG9CQUFDO0FBQUQsQ0FBQyxBQXpFRCxJQXlFQyJ9","/** @hidden */\nexport function attributeValueContainsToken(attributeName, token) {\n    return \"[\" + attributeName + \"~=\\\"\" + token + \"\\\"]\";\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VsZWN0b3JzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3NlbGVjdG9ycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxjQUFjO0FBQ2QsTUFBTSxzQ0FBc0MsYUFBcUIsRUFBRSxLQUFhO0lBQzlFLE9BQU8sTUFBSSxhQUFhLFlBQU0sS0FBSyxRQUFJLENBQUE7QUFDekMsQ0FBQyJ9","/** @hidden */\nexport function defineTargetProperties(constructor) {\n    var prototype = constructor.prototype;\n    var targetNames = getTargetNamesForConstructor(constructor);\n    targetNames.forEach(function (name) {\n        var _a;\n        return defineLinkedProperties(prototype, (_a = {},\n            _a[name + \"Target\"] = {\n                get: function () {\n                    var target = this.targets.find(name);\n                    if (target) {\n                        return target;\n                    }\n                    else {\n                        throw new Error(\"Missing target element \\\"\" + this.identifier + \".\" + name + \"\\\"\");\n                    }\n                }\n            },\n            _a[name + \"Targets\"] = {\n                get: function () {\n                    return this.targets.findAll(name);\n                }\n            },\n            _a[\"has\" + capitalize(name) + \"Target\"] = {\n                get: function () {\n                    return this.targets.has(name);\n                }\n            },\n            _a));\n    });\n}\nfunction getTargetNamesForConstructor(constructor) {\n    var ancestors = getAncestorsForConstructor(constructor);\n    return Array.from(ancestors.reduce(function (targetNames, constructor) {\n        getOwnTargetNamesForConstructor(constructor).forEach(function (name) { return targetNames.add(name); });\n        return targetNames;\n    }, new Set));\n}\nfunction getAncestorsForConstructor(constructor) {\n    var ancestors = [];\n    while (constructor) {\n        ancestors.push(constructor);\n        constructor = Object.getPrototypeOf(constructor);\n    }\n    return ancestors;\n}\nfunction getOwnTargetNamesForConstructor(constructor) {\n    var definition = constructor[\"targets\"];\n    return Array.isArray(definition) ? definition : [];\n}\nfunction defineLinkedProperties(object, properties) {\n    Object.keys(properties).forEach(function (name) {\n        if (!(name in object)) {\n            var descriptor = properties[name];\n            Object.defineProperty(object, name, descriptor);\n        }\n    });\n}\nfunction capitalize(name) {\n    return name.charAt(0).toUpperCase() + name.slice(1);\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFyZ2V0X3Byb3BlcnRpZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvdGFyZ2V0X3Byb3BlcnRpZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsY0FBYztBQUNkLE1BQU0saUNBQWlDLFdBQXFCO0lBQzFELElBQU0sU0FBUyxHQUFHLFdBQVcsQ0FBQyxTQUFTLENBQUE7SUFDdkMsSUFBTSxXQUFXLEdBQUcsNEJBQTRCLENBQUMsV0FBVyxDQUFDLENBQUE7SUFDN0QsV0FBVyxDQUFDLE9BQU8sQ0FBQyxVQUFBLElBQUk7O1FBQUksT0FBQSxzQkFBc0IsQ0FBQyxTQUFTO1lBQzFELEdBQUksSUFBSSxXQUFRLElBQUc7Z0JBQ2pCLEdBQUc7b0JBQ0QsSUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7b0JBQ3RDLElBQUksTUFBTSxFQUFFO3dCQUNWLE9BQU8sTUFBTSxDQUFBO3FCQUNkO3lCQUFNO3dCQUNMLE1BQU0sSUFBSSxLQUFLLENBQUMsOEJBQTJCLElBQUksQ0FBQyxVQUFVLFNBQUksSUFBSSxPQUFHLENBQUMsQ0FBQTtxQkFDdkU7Z0JBQ0gsQ0FBQzthQUNGO1lBQ0QsR0FBSSxJQUFJLFlBQVMsSUFBRztnQkFDbEIsR0FBRztvQkFDRCxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFBO2dCQUNuQyxDQUFDO2FBQ0Y7WUFDRCxHQUFDLFFBQU0sVUFBVSxDQUFDLElBQUksQ0FBQyxXQUFRLElBQUc7Z0JBQ2hDLEdBQUc7b0JBQ0QsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQTtnQkFDL0IsQ0FBQzthQUNGO2dCQUNEO0lBckIwQixDQXFCMUIsQ0FBQyxDQUFBO0FBQ0wsQ0FBQztBQUVELHNDQUFzQyxXQUFxQjtJQUN6RCxJQUFNLFNBQVMsR0FBRywwQkFBMEIsQ0FBQyxXQUFXLENBQUMsQ0FBQTtJQUN6RCxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFDLFdBQVcsRUFBRSxXQUFXO1FBQzFELCtCQUErQixDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxVQUFBLElBQUksSUFBSSxPQUFBLFdBQVcsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQXJCLENBQXFCLENBQUMsQ0FBQTtRQUNuRixPQUFPLFdBQVcsQ0FBQTtJQUNwQixDQUFDLEVBQUUsSUFBSSxHQUFrQixDQUFDLENBQUMsQ0FBQTtBQUM3QixDQUFDO0FBRUQsb0NBQW9DLFdBQXFCO0lBQ3ZELElBQU0sU0FBUyxHQUFlLEVBQUUsQ0FBQTtJQUNoQyxPQUFPLFdBQVcsRUFBRTtRQUNsQixTQUFTLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFBO1FBQzNCLFdBQVcsR0FBRyxNQUFNLENBQUMsY0FBYyxDQUFDLFdBQVcsQ0FBQyxDQUFBO0tBQ2pEO0lBQ0QsT0FBTyxTQUFTLENBQUE7QUFDbEIsQ0FBQztBQUVELHlDQUF5QyxXQUFxQjtJQUM1RCxJQUFNLFVBQVUsR0FBSSxXQUFtQixDQUFDLFNBQVMsQ0FBQyxDQUFBO0lBQ2xELE9BQU8sS0FBSyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUE7QUFDcEQsQ0FBQztBQUVELGdDQUFnQyxNQUFXLEVBQUUsVUFBaUM7SUFDNUUsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBQyxJQUFJO1FBQ25DLElBQUksQ0FBQyxDQUFDLElBQUksSUFBSSxNQUFNLENBQUMsRUFBRTtZQUNyQixJQUFNLFVBQVUsR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUE7WUFDbkMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLFVBQVUsQ0FBQyxDQUFBO1NBQ2hEO0lBQ0gsQ0FBQyxDQUFDLENBQUE7QUFDSixDQUFDO0FBRUQsb0JBQW9CLElBQVk7SUFDOUIsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDckQsQ0FBQyJ9","import { attributeValueContainsToken } from \"./selectors\";\nvar TargetSet = /** @class */ (function () {\n    function TargetSet(scope) {\n        this.scope = scope;\n    }\n    Object.defineProperty(TargetSet.prototype, \"element\", {\n        get: function () {\n            return this.scope.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TargetSet.prototype, \"identifier\", {\n        get: function () {\n            return this.scope.identifier;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TargetSet.prototype, \"schema\", {\n        get: function () {\n            return this.scope.schema;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TargetSet.prototype.has = function (targetName) {\n        return this.find(targetName) != null;\n    };\n    TargetSet.prototype.find = function () {\n        var targetNames = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            targetNames[_i] = arguments[_i];\n        }\n        var selector = this.getSelectorForTargetNames(targetNames);\n        return this.scope.findElement(selector);\n    };\n    TargetSet.prototype.findAll = function () {\n        var targetNames = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            targetNames[_i] = arguments[_i];\n        }\n        var selector = this.getSelectorForTargetNames(targetNames);\n        return this.scope.findAllElements(selector);\n    };\n    TargetSet.prototype.getSelectorForTargetNames = function (targetNames) {\n        var _this = this;\n        return targetNames.map(function (targetName) { return _this.getSelectorForTargetName(targetName); }).join(\", \");\n    };\n    TargetSet.prototype.getSelectorForTargetName = function (targetName) {\n        var targetDescriptor = this.identifier + \".\" + targetName;\n        return attributeValueContainsToken(this.schema.targetAttribute, targetDescriptor);\n    };\n    return TargetSet;\n}());\nexport { TargetSet };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFyZ2V0X3NldC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90YXJnZXRfc2V0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLGFBQWEsQ0FBQTtBQUV6RDtJQUdFLG1CQUFZLEtBQVk7UUFDdEIsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUE7SUFDcEIsQ0FBQztJQUVELHNCQUFJLDhCQUFPO2FBQVg7WUFDRSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFBO1FBQzNCLENBQUM7OztPQUFBO0lBRUQsc0JBQUksaUNBQVU7YUFBZDtZQUNFLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUE7UUFDOUIsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSw2QkFBTTthQUFWO1lBQ0UsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQTtRQUMxQixDQUFDOzs7T0FBQTtJQUVELHVCQUFHLEdBQUgsVUFBSSxVQUFrQjtRQUNwQixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksSUFBSSxDQUFBO0lBQ3RDLENBQUM7SUFFRCx3QkFBSSxHQUFKO1FBQUsscUJBQXdCO2FBQXhCLFVBQXdCLEVBQXhCLHFCQUF3QixFQUF4QixJQUF3QjtZQUF4QixnQ0FBd0I7O1FBQzNCLElBQU0sUUFBUSxHQUFHLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxXQUFXLENBQUMsQ0FBQTtRQUM1RCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFBO0lBQ3pDLENBQUM7SUFFRCwyQkFBTyxHQUFQO1FBQVEscUJBQXdCO2FBQXhCLFVBQXdCLEVBQXhCLHFCQUF3QixFQUF4QixJQUF3QjtZQUF4QixnQ0FBd0I7O1FBQzlCLElBQU0sUUFBUSxHQUFHLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxXQUFXLENBQUMsQ0FBQTtRQUM1RCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFBO0lBQzdDLENBQUM7SUFFTyw2Q0FBeUIsR0FBakMsVUFBa0MsV0FBcUI7UUFBdkQsaUJBRUM7UUFEQyxPQUFPLFdBQVcsQ0FBQyxHQUFHLENBQUMsVUFBQSxVQUFVLElBQUksT0FBQSxLQUFJLENBQUMsd0JBQXdCLENBQUMsVUFBVSxDQUFDLEVBQXpDLENBQXlDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7SUFDNUYsQ0FBQztJQUVPLDRDQUF3QixHQUFoQyxVQUFpQyxVQUFrQjtRQUNqRCxJQUFNLGdCQUFnQixHQUFNLElBQUksQ0FBQyxVQUFVLFNBQUksVUFBWSxDQUFBO1FBQzNELE9BQU8sMkJBQTJCLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxlQUFlLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQTtJQUNuRixDQUFDO0lBQ0gsZ0JBQUM7QUFBRCxDQUFDLEFBekNELElBeUNDIn0=","export * from \"./src/multimap\";\nexport * from \"./src/indexed_multimap\";\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxjQUFjLGdCQUFnQixDQUFBO0FBQzlCLGNBQWMsd0JBQXdCLENBQUEifQ==","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Multimap } from \"./multimap\";\nimport { add, del } from \"./set_operations\";\nvar IndexedMultimap = /** @class */ (function (_super) {\n    __extends(IndexedMultimap, _super);\n    function IndexedMultimap() {\n        var _this = _super.call(this) || this;\n        _this.keysByValue = new Map;\n        return _this;\n    }\n    Object.defineProperty(IndexedMultimap.prototype, \"values\", {\n        get: function () {\n            return Array.from(this.keysByValue.keys());\n        },\n        enumerable: true,\n        configurable: true\n    });\n    IndexedMultimap.prototype.add = function (key, value) {\n        _super.prototype.add.call(this, key, value);\n        add(this.keysByValue, value, key);\n    };\n    IndexedMultimap.prototype.delete = function (key, value) {\n        _super.prototype.delete.call(this, key, value);\n        del(this.keysByValue, value, key);\n    };\n    IndexedMultimap.prototype.hasValue = function (value) {\n        return this.keysByValue.has(value);\n    };\n    IndexedMultimap.prototype.getKeysForValue = function (value) {\n        var set = this.keysByValue.get(value);\n        return set ? Array.from(set) : [];\n    };\n    return IndexedMultimap;\n}(Multimap));\nexport { IndexedMultimap };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXhlZF9tdWx0aW1hcC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbmRleGVkX211bHRpbWFwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sWUFBWSxDQUFBO0FBQ3JDLE9BQU8sRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLE1BQU0sa0JBQWtCLENBQUE7QUFFM0M7SUFBMkMsbUNBQWM7SUFHdkQ7UUFBQSxZQUNFLGlCQUFPLFNBRVI7UUFEQyxLQUFJLENBQUMsV0FBVyxHQUFHLElBQUksR0FBRyxDQUFBOztJQUM1QixDQUFDO0lBRUQsc0JBQUksbUNBQU07YUFBVjtZQUNFLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUE7UUFDNUMsQ0FBQzs7O09BQUE7SUFFRCw2QkFBRyxHQUFILFVBQUksR0FBTSxFQUFFLEtBQVE7UUFDbEIsaUJBQU0sR0FBRyxZQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQTtRQUNyQixHQUFHLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUE7SUFDbkMsQ0FBQztJQUVELGdDQUFNLEdBQU4sVUFBTyxHQUFNLEVBQUUsS0FBUTtRQUNyQixpQkFBTSxNQUFNLFlBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFBO1FBQ3hCLEdBQUcsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQTtJQUNuQyxDQUFDO0lBRUQsa0NBQVEsR0FBUixVQUFTLEtBQVE7UUFDZixPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFBO0lBQ3BDLENBQUM7SUFFRCx5Q0FBZSxHQUFmLFVBQWdCLEtBQVE7UUFDdEIsSUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDdkMsT0FBTyxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtJQUNuQyxDQUFDO0lBQ0gsc0JBQUM7QUFBRCxDQUFDLEFBOUJELENBQTJDLFFBQVEsR0E4QmxEIn0=","import { add, del } from \"./set_operations\";\nvar Multimap = /** @class */ (function () {\n    function Multimap() {\n        this.valuesByKey = new Map();\n    }\n    Object.defineProperty(Multimap.prototype, \"values\", {\n        get: function () {\n            var sets = Array.from(this.valuesByKey.values());\n            return sets.reduce(function (values, set) { return values.concat(Array.from(set)); }, []);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Multimap.prototype, \"size\", {\n        get: function () {\n            var sets = Array.from(this.valuesByKey.values());\n            return sets.reduce(function (size, set) { return size + set.size; }, 0);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Multimap.prototype.add = function (key, value) {\n        add(this.valuesByKey, key, value);\n    };\n    Multimap.prototype.delete = function (key, value) {\n        del(this.valuesByKey, key, value);\n    };\n    Multimap.prototype.has = function (key, value) {\n        var values = this.valuesByKey.get(key);\n        return values != null && values.has(value);\n    };\n    Multimap.prototype.hasKey = function (key) {\n        return this.valuesByKey.has(key);\n    };\n    Multimap.prototype.hasValue = function (value) {\n        var sets = Array.from(this.valuesByKey.values());\n        return sets.some(function (set) { return set.has(value); });\n    };\n    Multimap.prototype.getValuesForKey = function (key) {\n        var values = this.valuesByKey.get(key);\n        return values ? Array.from(values) : [];\n    };\n    Multimap.prototype.getKeysForValue = function (value) {\n        return Array.from(this.valuesByKey)\n            .filter(function (_a) {\n            var key = _a[0], values = _a[1];\n            return values.has(value);\n        })\n            .map(function (_a) {\n            var key = _a[0], values = _a[1];\n            return key;\n        });\n    };\n    return Multimap;\n}());\nexport { Multimap };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXVsdGltYXAuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvbXVsdGltYXAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQTtBQUUzQztJQUdFO1FBQ0UsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLEdBQUcsRUFBYSxDQUFBO0lBQ3pDLENBQUM7SUFFRCxzQkFBSSw0QkFBTTthQUFWO1lBQ0UsSUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUE7WUFDbEQsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQUMsTUFBTSxFQUFFLEdBQUcsSUFBSyxPQUFBLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUE5QixDQUE4QixFQUFRLEVBQUUsQ0FBQyxDQUFBO1FBQy9FLENBQUM7OztPQUFBO0lBRUQsc0JBQUksMEJBQUk7YUFBUjtZQUNFLElBQU0sSUFBSSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFBO1lBQ2xELE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFDLElBQUksRUFBRSxHQUFHLElBQUssT0FBQSxJQUFJLEdBQUcsR0FBRyxDQUFDLElBQUksRUFBZixDQUFlLEVBQUUsQ0FBQyxDQUFDLENBQUE7UUFDdkQsQ0FBQzs7O09BQUE7SUFFRCxzQkFBRyxHQUFILFVBQUksR0FBTSxFQUFFLEtBQVE7UUFDbEIsR0FBRyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFBO0lBQ25DLENBQUM7SUFFRCx5QkFBTSxHQUFOLFVBQU8sR0FBTSxFQUFFLEtBQVE7UUFDckIsR0FBRyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFBO0lBQ25DLENBQUM7SUFFRCxzQkFBRyxHQUFILFVBQUksR0FBTSxFQUFFLEtBQVE7UUFDbEIsSUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDeEMsT0FBTyxNQUFNLElBQUksSUFBSSxJQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUE7SUFDNUMsQ0FBQztJQUVELHlCQUFNLEdBQU4sVUFBTyxHQUFNO1FBQ1gsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUNsQyxDQUFDO0lBRUQsMkJBQVEsR0FBUixVQUFTLEtBQVE7UUFDZixJQUFNLElBQUksR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQTtRQUNsRCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBQSxHQUFHLElBQUksT0FBQSxHQUFHLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFkLENBQWMsQ0FBQyxDQUFBO0lBQ3pDLENBQUM7SUFFRCxrQ0FBZSxHQUFmLFVBQWdCLEdBQU07UUFDcEIsSUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDeEMsT0FBTyxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtJQUN6QyxDQUFDO0lBRUQsa0NBQWUsR0FBZixVQUFnQixLQUFRO1FBQ3RCLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDO2FBQ2hDLE1BQU0sQ0FBQyxVQUFDLEVBQWE7Z0JBQVosV0FBRyxFQUFFLGNBQU07WUFBTSxPQUFBLE1BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDO1FBQWpCLENBQWlCLENBQUM7YUFDNUMsR0FBRyxDQUFDLFVBQUMsRUFBYTtnQkFBWixXQUFHLEVBQUUsY0FBTTtZQUFNLE9BQUEsR0FBRztRQUFILENBQUcsQ0FBQyxDQUFBO0lBQ2hDLENBQUM7SUFDSCxlQUFDO0FBQUQsQ0FBQyxBQWpERCxJQWlEQyJ9","export function add(map, key, value) {\n    fetch(map, key).add(value);\n}\nexport function del(map, key, value) {\n    fetch(map, key).delete(value);\n    prune(map, key);\n}\nexport function fetch(map, key) {\n    var values = map.get(key);\n    if (!values) {\n        values = new Set();\n        map.set(key, values);\n    }\n    return values;\n}\nexport function prune(map, key) {\n    var values = map.get(key);\n    if (values != null && values.size == 0) {\n        map.delete(key);\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2V0X29wZXJhdGlvbnMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc2V0X29wZXJhdGlvbnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSxjQUFvQixHQUFtQixFQUFFLEdBQU0sRUFBRSxLQUFRO0lBQzdELEtBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFBO0FBQzVCLENBQUM7QUFFRCxNQUFNLGNBQW9CLEdBQW1CLEVBQUUsR0FBTSxFQUFFLEtBQVE7SUFDN0QsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUE7SUFDN0IsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQTtBQUNqQixDQUFDO0FBRUQsTUFBTSxnQkFBc0IsR0FBbUIsRUFBRSxHQUFNO0lBQ3JELElBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUE7SUFDekIsSUFBSSxDQUFDLE1BQU0sRUFBRTtRQUNYLE1BQU0sR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFBO1FBQ2xCLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFBO0tBQ3JCO0lBQ0QsT0FBTyxNQUFNLENBQUE7QUFDZixDQUFDO0FBRUQsTUFBTSxnQkFBc0IsR0FBbUIsRUFBRSxHQUFNO0lBQ3JELElBQU0sTUFBTSxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUE7SUFDM0IsSUFBSSxNQUFNLElBQUksSUFBSSxJQUFJLE1BQU0sQ0FBQyxJQUFJLElBQUksQ0FBQyxFQUFFO1FBQ3RDLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUE7S0FDaEI7QUFDSCxDQUFDIn0=","export * from \"./src/attribute_observer\";\nexport * from \"./src/element_observer\";\nexport * from \"./src/token_list_observer\";\nexport * from \"./src/value_list_observer\";\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxjQUFjLDBCQUEwQixDQUFBO0FBQ3hDLGNBQWMsd0JBQXdCLENBQUE7QUFDdEMsY0FBYywyQkFBMkIsQ0FBQTtBQUN6QyxjQUFjLDJCQUEyQixDQUFBIn0=","import { ElementObserver } from \"./element_observer\";\nvar AttributeObserver = /** @class */ (function () {\n    function AttributeObserver(element, attributeName, delegate) {\n        this.attributeName = attributeName;\n        this.delegate = delegate;\n        this.elementObserver = new ElementObserver(element, this);\n    }\n    Object.defineProperty(AttributeObserver.prototype, \"element\", {\n        get: function () {\n            return this.elementObserver.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AttributeObserver.prototype, \"selector\", {\n        get: function () {\n            return \"[\" + this.attributeName + \"]\";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AttributeObserver.prototype.start = function () {\n        this.elementObserver.start();\n    };\n    AttributeObserver.prototype.stop = function () {\n        this.elementObserver.stop();\n    };\n    AttributeObserver.prototype.refresh = function () {\n        this.elementObserver.refresh();\n    };\n    Object.defineProperty(AttributeObserver.prototype, \"started\", {\n        get: function () {\n            return this.elementObserver.started;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // Element observer delegate\n    AttributeObserver.prototype.matchElement = function (element) {\n        return element.hasAttribute(this.attributeName);\n    };\n    AttributeObserver.prototype.matchElementsInTree = function (tree) {\n        var match = this.matchElement(tree) ? [tree] : [];\n        var matches = Array.from(tree.querySelectorAll(this.selector));\n        return match.concat(matches);\n    };\n    AttributeObserver.prototype.elementMatched = function (element) {\n        if (this.delegate.elementMatchedAttribute) {\n            this.delegate.elementMatchedAttribute(element, this.attributeName);\n        }\n    };\n    AttributeObserver.prototype.elementUnmatched = function (element) {\n        if (this.delegate.elementUnmatchedAttribute) {\n            this.delegate.elementUnmatchedAttribute(element, this.attributeName);\n        }\n    };\n    AttributeObserver.prototype.elementAttributeChanged = function (element, attributeName) {\n        if (this.delegate.elementAttributeValueChanged && this.attributeName == attributeName) {\n            this.delegate.elementAttributeValueChanged(element, attributeName);\n        }\n    };\n    return AttributeObserver;\n}());\nexport { AttributeObserver };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXR0cmlidXRlX29ic2VydmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2F0dHJpYnV0ZV9vYnNlcnZlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsZUFBZSxFQUEyQixNQUFNLG9CQUFvQixDQUFBO0FBUTdFO0lBTUUsMkJBQVksT0FBZ0IsRUFBRSxhQUFxQixFQUFFLFFBQW1DO1FBQ3RGLElBQUksQ0FBQyxhQUFhLEdBQUcsYUFBYSxDQUFBO1FBQ2xDLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFBO1FBRXhCLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxlQUFlLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFBO0lBQzNELENBQUM7SUFFRCxzQkFBSSxzQ0FBTzthQUFYO1lBQ0UsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQTtRQUNyQyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLHVDQUFRO2FBQVo7WUFDRSxPQUFPLE1BQUksSUFBSSxDQUFDLGFBQWEsTUFBRyxDQUFBO1FBQ2xDLENBQUM7OztPQUFBO0lBRUQsaUNBQUssR0FBTDtRQUNFLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxFQUFFLENBQUE7SUFDOUIsQ0FBQztJQUVELGdDQUFJLEdBQUo7UUFDRSxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksRUFBRSxDQUFBO0lBQzdCLENBQUM7SUFFRCxtQ0FBTyxHQUFQO1FBQ0UsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtJQUNoQyxDQUFDO0lBRUQsc0JBQUksc0NBQU87YUFBWDtZQUNFLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUE7UUFDckMsQ0FBQzs7O09BQUE7SUFFRCw0QkFBNEI7SUFFNUIsd0NBQVksR0FBWixVQUFhLE9BQWdCO1FBQzNCLE9BQU8sT0FBTyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUE7SUFDakQsQ0FBQztJQUVELCtDQUFtQixHQUFuQixVQUFvQixJQUFhO1FBQy9CLElBQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtRQUNuRCxJQUFNLE9BQU8sR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQTtRQUNoRSxPQUFPLEtBQUssQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDOUIsQ0FBQztJQUVELDBDQUFjLEdBQWQsVUFBZSxPQUFnQjtRQUM3QixJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsdUJBQXVCLEVBQUU7WUFDekMsSUFBSSxDQUFDLFFBQVEsQ0FBQyx1QkFBdUIsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFBO1NBQ25FO0lBQ0gsQ0FBQztJQUVELDRDQUFnQixHQUFoQixVQUFpQixPQUFnQjtRQUMvQixJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMseUJBQXlCLEVBQUU7WUFDM0MsSUFBSSxDQUFDLFFBQVEsQ0FBQyx5QkFBeUIsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFBO1NBQ3JFO0lBQ0gsQ0FBQztJQUVELG1EQUF1QixHQUF2QixVQUF3QixPQUFnQixFQUFFLGFBQXFCO1FBQzdELElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyw0QkFBNEIsSUFBSSxJQUFJLENBQUMsYUFBYSxJQUFJLGFBQWEsRUFBRTtZQUNyRixJQUFJLENBQUMsUUFBUSxDQUFDLDRCQUE0QixDQUFDLE9BQU8sRUFBRSxhQUFhLENBQUMsQ0FBQTtTQUNuRTtJQUNILENBQUM7SUFDSCx3QkFBQztBQUFELENBQUMsQUFsRUQsSUFrRUMifQ==","var ElementObserver = /** @class */ (function () {\n    function ElementObserver(element, delegate) {\n        var _this = this;\n        this.element = element;\n        this.started = false;\n        this.delegate = delegate;\n        this.elements = new Set;\n        this.mutationObserver = new MutationObserver(function (mutations) { return _this.processMutations(mutations); });\n    }\n    ElementObserver.prototype.start = function () {\n        if (!this.started) {\n            this.started = true;\n            this.mutationObserver.observe(this.element, { attributes: true, childList: true, subtree: true });\n            this.refresh();\n        }\n    };\n    ElementObserver.prototype.stop = function () {\n        if (this.started) {\n            this.mutationObserver.takeRecords();\n            this.mutationObserver.disconnect();\n            this.started = false;\n        }\n    };\n    ElementObserver.prototype.refresh = function () {\n        if (this.started) {\n            var matches = new Set(this.matchElementsInTree());\n            for (var _i = 0, _a = Array.from(this.elements); _i < _a.length; _i++) {\n                var element = _a[_i];\n                if (!matches.has(element)) {\n                    this.removeElement(element);\n                }\n            }\n            for (var _b = 0, _c = Array.from(matches); _b < _c.length; _b++) {\n                var element = _c[_b];\n                this.addElement(element);\n            }\n        }\n    };\n    // Mutation record processing\n    ElementObserver.prototype.processMutations = function (mutations) {\n        if (this.started) {\n            for (var _i = 0, mutations_1 = mutations; _i < mutations_1.length; _i++) {\n                var mutation = mutations_1[_i];\n                this.processMutation(mutation);\n            }\n        }\n    };\n    ElementObserver.prototype.processMutation = function (mutation) {\n        if (mutation.type == \"attributes\") {\n            this.processAttributeChange(mutation.target, mutation.attributeName);\n        }\n        else if (mutation.type == \"childList\") {\n            this.processRemovedNodes(mutation.removedNodes);\n            this.processAddedNodes(mutation.addedNodes);\n        }\n    };\n    ElementObserver.prototype.processAttributeChange = function (node, attributeName) {\n        var element = node;\n        if (this.elements.has(element)) {\n            if (this.delegate.elementAttributeChanged && this.matchElement(element)) {\n                this.delegate.elementAttributeChanged(element, attributeName);\n            }\n            else {\n                this.removeElement(element);\n            }\n        }\n        else if (this.matchElement(element)) {\n            this.addElement(element);\n        }\n    };\n    ElementObserver.prototype.processRemovedNodes = function (nodes) {\n        for (var _i = 0, _a = Array.from(nodes); _i < _a.length; _i++) {\n            var node = _a[_i];\n            var element = this.elementFromNode(node);\n            if (element) {\n                this.processTree(element, this.removeElement);\n            }\n        }\n    };\n    ElementObserver.prototype.processAddedNodes = function (nodes) {\n        for (var _i = 0, _a = Array.from(nodes); _i < _a.length; _i++) {\n            var node = _a[_i];\n            var element = this.elementFromNode(node);\n            if (element && this.elementIsActive(element)) {\n                this.processTree(element, this.addElement);\n            }\n        }\n    };\n    // Element matching\n    ElementObserver.prototype.matchElement = function (element) {\n        return this.delegate.matchElement(element);\n    };\n    ElementObserver.prototype.matchElementsInTree = function (tree) {\n        if (tree === void 0) { tree = this.element; }\n        return this.delegate.matchElementsInTree(tree);\n    };\n    ElementObserver.prototype.processTree = function (tree, processor) {\n        for (var _i = 0, _a = this.matchElementsInTree(tree); _i < _a.length; _i++) {\n            var element = _a[_i];\n            processor.call(this, element);\n        }\n    };\n    ElementObserver.prototype.elementFromNode = function (node) {\n        if (node.nodeType == Node.ELEMENT_NODE) {\n            return node;\n        }\n    };\n    ElementObserver.prototype.elementIsActive = function (element) {\n        if (element.isConnected != this.element.isConnected) {\n            return false;\n        }\n        else {\n            return this.element.contains(element);\n        }\n    };\n    // Element tracking\n    ElementObserver.prototype.addElement = function (element) {\n        if (!this.elements.has(element)) {\n            if (this.elementIsActive(element)) {\n                this.elements.add(element);\n                if (this.delegate.elementMatched) {\n                    this.delegate.elementMatched(element);\n                }\n            }\n        }\n    };\n    ElementObserver.prototype.removeElement = function (element) {\n        if (this.elements.has(element)) {\n            this.elements.delete(element);\n            if (this.delegate.elementUnmatched) {\n                this.delegate.elementUnmatched(element);\n            }\n        }\n    };\n    return ElementObserver;\n}());\nexport { ElementObserver };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZWxlbWVudF9vYnNlcnZlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9lbGVtZW50X29ic2VydmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQVNBO0lBUUUseUJBQVksT0FBZ0IsRUFBRSxRQUFpQztRQUEvRCxpQkFPQztRQU5DLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFBO1FBQ3RCLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFBO1FBQ3BCLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFBO1FBRXhCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxHQUFHLENBQUE7UUFDdkIsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksZ0JBQWdCLENBQUMsVUFBQyxTQUFTLElBQUssT0FBQSxLQUFJLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLEVBQWhDLENBQWdDLENBQUMsQ0FBQTtJQUMvRixDQUFDO0lBRUQsK0JBQUssR0FBTDtRQUNFLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFO1lBQ2pCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFBO1lBQ25CLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQTtZQUNqRyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUE7U0FDZjtJQUNILENBQUM7SUFFRCw4QkFBSSxHQUFKO1FBQ0UsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFO1lBQ2hCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtZQUNuQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsVUFBVSxFQUFFLENBQUE7WUFDbEMsSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUE7U0FDckI7SUFDSCxDQUFDO0lB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","import { AttributeObserver } from \"./attribute_observer\";\nimport { Multimap } from \"@stimulus/multimap\";\nvar TokenListObserver = /** @class */ (function () {\n    function TokenListObserver(element, attributeName, delegate) {\n        this.attributeObserver = new AttributeObserver(element, attributeName, this);\n        this.delegate = delegate;\n        this.tokensByElement = new Multimap;\n    }\n    Object.defineProperty(TokenListObserver.prototype, \"started\", {\n        get: function () {\n            return this.attributeObserver.started;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TokenListObserver.prototype.start = function () {\n        this.attributeObserver.start();\n    };\n    TokenListObserver.prototype.stop = function () {\n        this.attributeObserver.stop();\n    };\n    TokenListObserver.prototype.refresh = function () {\n        this.attributeObserver.refresh();\n    };\n    Object.defineProperty(TokenListObserver.prototype, \"element\", {\n        get: function () {\n            return this.attributeObserver.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TokenListObserver.prototype, \"attributeName\", {\n        get: function () {\n            return this.attributeObserver.attributeName;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // Attribute observer delegate\n    TokenListObserver.prototype.elementMatchedAttribute = function (element) {\n        this.tokensMatched(this.readTokensForElement(element));\n    };\n    TokenListObserver.prototype.elementAttributeValueChanged = function (element) {\n        var _a = this.refreshTokensForElement(element), unmatchedTokens = _a[0], matchedTokens = _a[1];\n        this.tokensUnmatched(unmatchedTokens);\n        this.tokensMatched(matchedTokens);\n    };\n    TokenListObserver.prototype.elementUnmatchedAttribute = function (element) {\n        this.tokensUnmatched(this.tokensByElement.getValuesForKey(element));\n    };\n    TokenListObserver.prototype.tokensMatched = function (tokens) {\n        var _this = this;\n        tokens.forEach(function (token) { return _this.tokenMatched(token); });\n    };\n    TokenListObserver.prototype.tokensUnmatched = function (tokens) {\n        var _this = this;\n        tokens.forEach(function (token) { return _this.tokenUnmatched(token); });\n    };\n    TokenListObserver.prototype.tokenMatched = function (token) {\n        this.delegate.tokenMatched(token);\n        this.tokensByElement.add(token.element, token);\n    };\n    TokenListObserver.prototype.tokenUnmatched = function (token) {\n        this.delegate.tokenUnmatched(token);\n        this.tokensByElement.delete(token.element, token);\n    };\n    TokenListObserver.prototype.refreshTokensForElement = function (element) {\n        var previousTokens = this.tokensByElement.getValuesForKey(element);\n        var currentTokens = this.readTokensForElement(element);\n        var firstDifferingIndex = zip(previousTokens, currentTokens)\n            .findIndex(function (_a) {\n            var previousToken = _a[0], currentToken = _a[1];\n            return !tokensAreEqual(previousToken, currentToken);\n        });\n        if (firstDifferingIndex == -1) {\n            return [[], []];\n        }\n        else {\n            return [previousTokens.slice(firstDifferingIndex), currentTokens.slice(firstDifferingIndex)];\n        }\n    };\n    TokenListObserver.prototype.readTokensForElement = function (element) {\n        var attributeName = this.attributeName;\n        var tokenString = element.getAttribute(attributeName) || \"\";\n        return parseTokenString(tokenString, element, attributeName);\n    };\n    return TokenListObserver;\n}());\nexport { TokenListObserver };\nfunction parseTokenString(tokenString, element, attributeName) {\n    return tokenString.trim().split(/\\s+/).filter(function (content) { return content.length; })\n        .map(function (content, index) { return ({ element: element, attributeName: attributeName, content: content, index: index }); });\n}\nfunction zip(left, right) {\n    var length = Math.max(left.length, right.length);\n    return Array.from({ length: length }, function (_, index) { return [left[index], right[index]]; });\n}\nfunction tokensAreEqual(left, right) {\n    return left && right && left.index == right.index && left.content == right.content;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9rZW5fbGlzdF9vYnNlcnZlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90b2tlbl9saXN0X29ic2VydmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxpQkFBaUIsRUFBNkIsTUFBTSxzQkFBc0IsQ0FBQTtBQUNuRixPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sb0JBQW9CLENBQUE7QUFjN0M7SUFLRSwyQkFBWSxPQUFnQixFQUFFLGFBQXFCLEVBQUUsUUFBbUM7UUFDdEYsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksaUJBQWlCLENBQUMsT0FBTyxFQUFFLGFBQWEsRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUM1RSxJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQTtRQUN4QixJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksUUFBUSxDQUFBO0lBQ3JDLENBQUM7SUFFRCxzQkFBSSxzQ0FBTzthQUFYO1lBQ0UsT0FBTyxJQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFBO1FBQ3ZDLENBQUM7OztPQUFBO0lBRUQsaUNBQUssR0FBTDtRQUNFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLEVBQUUsQ0FBQTtJQUNoQyxDQUFDO0lBRUQsZ0NBQUksR0FBSjtRQUNFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsQ0FBQTtJQUMvQixDQUFDO0lBRUQsbUNBQU8sR0FBUDtRQUNFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtJQUNsQyxDQUFDO0lBRUQsc0JBQUksc0NBQU87YUFBWDtZQUNFLE9BQU8sSUFBSSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQTtRQUN2QyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLDRDQUFhO2FBQWpCO1lBQ0UsT0FBTyxJQUFJLENBQUMsaUJBQWlCLENBQUMsYUFBYSxDQUFBO1FBQzdDLENBQUM7OztPQUFBO0lBRUQsOEJBQThCO0lB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","import { TokenListObserver } from \"./token_list_observer\";\nvar ValueListObserver = /** @class */ (function () {\n    function ValueListObserver(element, attributeName, delegate) {\n        this.tokenListObserver = new TokenListObserver(element, attributeName, this);\n        this.delegate = delegate;\n        this.parseResultsByToken = new WeakMap;\n        this.valuesByTokenByElement = new WeakMap;\n    }\n    Object.defineProperty(ValueListObserver.prototype, \"started\", {\n        get: function () {\n            return this.tokenListObserver.started;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ValueListObserver.prototype.start = function () {\n        this.tokenListObserver.start();\n    };\n    ValueListObserver.prototype.stop = function () {\n        this.tokenListObserver.stop();\n    };\n    ValueListObserver.prototype.refresh = function () {\n        this.tokenListObserver.refresh();\n    };\n    Object.defineProperty(ValueListObserver.prototype, \"element\", {\n        get: function () {\n            return this.tokenListObserver.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ValueListObserver.prototype, \"attributeName\", {\n        get: function () {\n            return this.tokenListObserver.attributeName;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ValueListObserver.prototype.tokenMatched = function (token) {\n        var element = token.element;\n        var value = this.fetchParseResultForToken(token).value;\n        if (value) {\n            this.fetchValuesByTokenForElement(element).set(token, value);\n            this.delegate.elementMatchedValue(element, value);\n        }\n    };\n    ValueListObserver.prototype.tokenUnmatched = function (token) {\n        var element = token.element;\n        var value = this.fetchParseResultForToken(token).value;\n        if (value) {\n            this.fetchValuesByTokenForElement(element).delete(token);\n            this.delegate.elementUnmatchedValue(element, value);\n        }\n    };\n    ValueListObserver.prototype.fetchParseResultForToken = function (token) {\n        var parseResult = this.parseResultsByToken.get(token);\n        if (!parseResult) {\n            parseResult = this.parseToken(token);\n            this.parseResultsByToken.set(token, parseResult);\n        }\n        return parseResult;\n    };\n    ValueListObserver.prototype.fetchValuesByTokenForElement = function (element) {\n        var valuesByToken = this.valuesByTokenByElement.get(element);\n        if (!valuesByToken) {\n            valuesByToken = new Map;\n            this.valuesByTokenByElement.set(element, valuesByToken);\n        }\n        return valuesByToken;\n    };\n    ValueListObserver.prototype.parseToken = function (token) {\n        try {\n            var value = this.delegate.parseValueForToken(token);\n            return { value: value };\n        }\n        catch (error) {\n            return { error: error };\n        }\n    };\n    return ValueListObserver;\n}());\nexport { ValueListObserver };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmFsdWVfbGlzdF9vYnNlcnZlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy92YWx1ZV9saXN0X29ic2VydmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBUyxpQkFBaUIsRUFBNkIsTUFBTSx1QkFBdUIsQ0FBQTtBQWEzRjtJQU1FLDJCQUFZLE9BQWdCLEVBQUUsYUFBcUIsRUFBRSxRQUFzQztRQUN6RixJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxpQkFBaUIsQ0FBQyxPQUFPLEVBQUUsYUFBYSxFQUFFLElBQUksQ0FBQyxDQUFBO1FBQzVFLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFBO1FBQ3hCLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLE9BQU8sQ0FBQTtRQUN0QyxJQUFJLENBQUMsc0JBQXNCLEdBQUcsSUFBSSxPQUFPLENBQUE7SUFDM0MsQ0FBQztJQUVELHNCQUFJLHNDQUFPO2FBQVg7WUFDRSxPQUFPLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLENBQUE7UUFDdkMsQ0FBQzs7O09BQUE7SUFFRCxpQ0FBSyxHQUFMO1FBQ0UsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEtBQUssRUFBRSxDQUFBO0lBQ2hDLENBQUM7SUFFRCxnQ0FBSSxHQUFKO1FBQ0UsSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksRUFBRSxDQUFBO0lBQy9CLENBQUM7SUFFRCxtQ0FBTyxHQUFQO1FBQ0UsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sRUFBRSxDQUFBO0lBQ2xDLENBQUM7SUFFRCxzQkFBSSxzQ0FBTzthQUFYO1lBQ0UsT0FBTyxJQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFBO1FBQ3ZDLENBQUM7OztPQUFBO0lBRUQsc0JBQUksNENBQWE7YUFBakI7WUFDRSxPQUFPLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxhQUFhLENBQUE7UUFDN0MsQ0FBQzs7O09BQUE7SUFFRCx3Q0FBWSxHQUFaLFVBQWEsS0FBWTtRQUNmLElBQUEsdUJBQU8sQ0FBVTtRQUNqQixJQUFBLGtEQUFLLENBQXlDO1FBQ3RELElBQUksS0FBSyxFQUFFO1lBQ1QsSUFBSSxDQUFDLDRCQUE0QixDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUE7WUFDNUQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUE7U0FDbEQ7SUFDSCxDQUFDO0lBRUQsMENBQWMsR0FBZCxVQUFlLEtBQVk7UUFDakIsSUFBQSx1QkFBTyxDQUFVO1FBQ2pCLElBQUEsa0RBQUssQ0FBeUM7UUFDdEQsSUFBSSxLQUFLLEVBQUU7WUFDVCxJQUFJLENBQUMsNEJBQTRCLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFBO1lBQ3hELElBQUksQ0FBQyxRQUFRLENBQUMscUJBQXFCLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFBO1NBQ3BEO0lBQ0gsQ0FBQztJQUVPLG9EQUF3QixHQUFoQyxVQUFpQyxLQUFZO1FBQzNDLElBQUksV0FBVyxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDckQsSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUNoQixXQUFXLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQTtZQUNwQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxXQUFXLENBQUMsQ0FBQTtTQUNqRDtRQUNELE9BQU8sV0FBVyxDQUFBO0lBQ3BCLENBQUM7SUFFTyx3REFBNEIsR0FBcEMsVUFBcUMsT0FBZ0I7UUFDbkQsSUFBSSxhQUFhLEdBQUcsSUFBSSxDQUFDLHNCQUFzQixDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQTtRQUM1RCxJQUFJLENBQUMsYUFBYSxFQUFFO1lBQ2xCLGFBQWEsR0FBRyxJQUFJLEdBQUcsQ0FBQTtZQUN2QixJQUFJLENBQUMsc0JBQXNCLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxhQUFhLENBQUMsQ0FBQTtTQUN4RDtRQUNELE9BQU8sYUFBYSxDQUFBO0lBQ3RCLENBQUM7SUFFTyxzQ0FBVSxHQUFsQixVQUFtQixLQUFZO1FBQzdCLElBQUk7WUFDRixJQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxDQUFBO1lBQ3JELE9BQU8sRUFBRSxLQUFLLE9BQUEsRUFBRSxDQUFBO1NBQ2pCO1FBQUMsT0FBTyxLQUFLLEVBQUU7WUFDZCxPQUFPLEVBQUUsS0FBSyxPQUFBLEVBQUUsQ0FBQTtTQUNqQjtJQUNILENBQUM7SUFDSCx3QkFBQztBQUFELENBQUMsQUFqRkQsSUFpRkMifQ==","export function definitionsFromContext(context) {\n    return context.keys()\n        .map(function (key) { return definitionForModuleWithContextAndKey(context, key); })\n        .filter(function (value) { return value; });\n}\nfunction definitionForModuleWithContextAndKey(context, key) {\n    var identifier = identifierForContextKey(key);\n    if (identifier) {\n        return definitionForModuleAndIdentifier(context(key), identifier);\n    }\n}\nfunction definitionForModuleAndIdentifier(module, identifier) {\n    var controllerConstructor = module.default;\n    if (typeof controllerConstructor == \"function\") {\n        return { identifier: identifier, controllerConstructor: controllerConstructor };\n    }\n}\nexport function identifierForContextKey(key) {\n    var logicalName = (key.match(/^(?:\\.\\/)?(.+)(?:[_-]controller\\..+?)$/) || [])[1];\n    if (logicalName) {\n        return logicalName.replace(/_/g, \"-\").replace(/\\//g, \"--\");\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFPQSxNQUFNLGlDQUFpQyxPQUEwQztJQUMvRSxPQUFPLE9BQU8sQ0FBQyxJQUFJLEVBQUU7U0FDbEIsR0FBRyxDQUFDLFVBQUEsR0FBRyxJQUFJLE9BQUEsb0NBQW9DLENBQUMsT0FBTyxFQUFFLEdBQUcsQ0FBQyxFQUFsRCxDQUFrRCxDQUFDO1NBQzlELE1BQU0sQ0FBQyxVQUFBLEtBQUssSUFBSSxPQUFBLEtBQUssRUFBTCxDQUFLLENBQWlCLENBQUE7QUFDM0MsQ0FBQztBQUVELDhDQUE4QyxPQUEwQyxFQUFFLEdBQVc7SUFDbkcsSUFBTSxVQUFVLEdBQUcsdUJBQXVCLENBQUMsR0FBRyxDQUFDLENBQUE7SUFDL0MsSUFBSSxVQUFVLEVBQUU7UUFDZCxPQUFPLGdDQUFnQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRSxVQUFVLENBQUMsQ0FBQTtLQUNsRTtBQUNILENBQUM7QUFFRCwwQ0FBMEMsTUFBd0IsRUFBRSxVQUFrQjtJQUNwRixJQUFNLHFCQUFxQixHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUE7SUFDNUMsSUFBSSxPQUFPLHFCQUFxQixJQUFJLFVBQVUsRUFBRTtRQUM5QyxPQUFPLEVBQUUsVUFBVSxZQUFBLEVBQUUscUJBQXFCLHVCQUFBLEVBQUUsQ0FBQTtLQUM3QztBQUNILENBQUM7QUFFRCxNQUFNLGtDQUFrQyxHQUFXO0lBQ2pELElBQU0sV0FBVyxHQUFHLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyx3Q0FBd0MsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO0lBQ2xGLElBQUksV0FBVyxFQUFFO1FBQ2YsT0FBTyxXQUFXLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFBO0tBQzNEO0FBQ0gsQ0FBQyJ9","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","// Use strict mode (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode)\n\"use strict\";\n\n\n// Requires\nvar Typo = require(\"typo-js\");\n\n\n// Create function\nfunction CodeMirrorSpellChecker(options) {\n\t// Initialize\n\toptions = options || {};\n\n\n\t// Verify\n\tif(typeof options.codeMirrorInstance !== \"function\" || typeof options.codeMirrorInstance.defineMode !== \"function\") {\n\t\tconsole.log(\"CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`\");\n\t\treturn;\n\t}\n\n\n\t// Because some browsers don't support this functionality yet\n\tif(!String.prototype.includes) {\n\t\tString.prototype.includes = function() {\n\t\t\t\"use strict\";\n\t\t\treturn String.prototype.indexOf.apply(this, arguments) !== -1;\n\t\t};\n\t}\n\n\n\t// Define the new mode\n\toptions.codeMirrorInstance.defineMode(\"spell-checker\", function(config) {\n\t\t// Load AFF/DIC data\n\t\tif(!CodeMirrorSpellChecker.aff_loading) {\n\t\t\tCodeMirrorSpellChecker.aff_loading = true;\n\t\t\tvar xhr_aff = new XMLHttpRequest();\n\t\t\txhr_aff.open(\"GET\", \"https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff\", true);\n\t\t\txhr_aff.onload = function() {\n\t\t\t\tif(xhr_aff.readyState === 4 && xhr_aff.status === 200) {\n\t\t\t\t\tCodeMirrorSpellChecker.aff_data = xhr_aff.responseText;\n\t\t\t\t\tCodeMirrorSpellChecker.num_loaded++;\n\n\t\t\t\t\tif(CodeMirrorSpellChecker.num_loaded == 2) {\n\t\t\t\t\t\tCodeMirrorSpellChecker.typo = new Typo(\"en_US\", CodeMirrorSpellChecker.aff_data, CodeMirrorSpellChecker.dic_data, {\n\t\t\t\t\t\t\tplatform: \"any\"\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\txhr_aff.send(null);\n\t\t}\n\n\t\tif(!CodeMirrorSpellChecker.dic_loading) {\n\t\t\tCodeMirrorSpellChecker.dic_loading = true;\n\t\t\tvar xhr_dic = new XMLHttpRequest();\n\t\t\txhr_dic.open(\"GET\", \"https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic\", true);\n\t\t\txhr_dic.onload = function() {\n\t\t\t\tif(xhr_dic.readyState === 4 && xhr_dic.status === 200) {\n\t\t\t\t\tCodeMirrorSpellChecker.dic_data = xhr_dic.responseText;\n\t\t\t\t\tCodeMirrorSpellChecker.num_loaded++;\n\n\t\t\t\t\tif(CodeMirrorSpellChecker.num_loaded == 2) {\n\t\t\t\t\t\tCodeMirrorSpellChecker.typo = new Typo(\"en_US\", CodeMirrorSpellChecker.aff_data, CodeMirrorSpellChecker.dic_data, {\n\t\t\t\t\t\t\tplatform: \"any\"\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\txhr_dic.send(null);\n\t\t}\n\n\n\t\t// Define what separates a word\n\t\tvar rx_word = \"!\\\"#$%&()*+,-./:;<=>?@[\\\\]^_`{|}~ \";\n\n\n\t\t// Create the overlay and such\n\t\tvar overlay = {\n\t\t\ttoken: function(stream) {\n\t\t\t\tvar ch = stream.peek();\n\t\t\t\tvar word = \"\";\n\n\t\t\t\tif(rx_word.includes(ch)) {\n\t\t\t\t\tstream.next();\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\twhile((ch = stream.peek()) != null && !rx_word.includes(ch)) {\n\t\t\t\t\tword += ch;\n\t\t\t\t\tstream.next();\n\t\t\t\t}\n\n\t\t\t\tif(CodeMirrorSpellChecker.typo && !CodeMirrorSpellChecker.typo.check(word))\n\t\t\t\t\treturn \"spell-error\"; // CSS class: cm-spell-error\n\n\t\t\t\treturn null;\n\t\t\t}\n\t\t};\n\n\t\tvar mode = options.codeMirrorInstance.getMode(\n\t\t\tconfig, config.backdrop || \"text/plain\"\n\t\t);\n\n\t\treturn options.codeMirrorInstance.overlayMode(mode, overlay, true);\n\t});\n}\n\n\n// Initialize data globally to reduce memory consumption\nCodeMirrorSpellChecker.num_loaded = 0;\nCodeMirrorSpellChecker.aff_loading = false;\nCodeMirrorSpellChecker.dic_loading = false;\nCodeMirrorSpellChecker.aff_data = \"\";\nCodeMirrorSpellChecker.dic_data = \"\";\nCodeMirrorSpellChecker.typo;\n\n\n// Export\nmodule.exports = CodeMirrorSpellChecker;","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","const Renderer = require('./Renderer.js');\nconst { defaults } = require('./defaults.js');\nconst { inline } = require('./rules.js');\nconst {\n  findClosingBracket,\n  escape\n} = require('./helpers.js');\n\n/**\n * Inline Lexer & Compiler\n */\nmodule.exports = class InlineLexer {\n  constructor(links, options) {\n    this.options = options || defaults;\n    this.links = links;\n    this.rules = inline.normal;\n    this.options.renderer = this.options.renderer || new Renderer();\n    this.renderer = this.options.renderer;\n    this.renderer.options = this.options;\n\n    if (!this.links) {\n      throw new Error('Tokens array requires a `links` property.');\n    }\n\n    if (this.options.pedantic) {\n      this.rules = inline.pedantic;\n    } else if (this.options.gfm) {\n      if (this.options.breaks) {\n        this.rules = inline.breaks;\n      } else {\n        this.rules = inline.gfm;\n      }\n    }\n  }\n\n  /**\n   * Expose Inline Rules\n   */\n  static get rules() {\n    return inline;\n  }\n\n  /**\n   * Static Lexing/Compiling Method\n   */\n  static output(src, links, options) {\n    const inline = new InlineLexer(links, options);\n    return inline.output(src);\n  }\n\n  /**\n   * Lexing/Compiling\n   */\n  output(src) {\n    let out = '',\n      link,\n      text,\n      href,\n      title,\n      cap,\n      prevCapZero;\n\n    while (src) {\n      // escape\n      if (cap = this.rules.escape.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += escape(cap[1]);\n        continue;\n      }\n\n      // tag\n      if (cap = this.rules.tag.exec(src)) {\n        if (!this.inLink && /^<a /i.test(cap[0])) {\n          this.inLink = true;\n        } else if (this.inLink && /^<\\/a>/i.test(cap[0])) {\n          this.inLink = false;\n        }\n        if (!this.inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          this.inRawBlock = true;\n        } else if (this.inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          this.inRawBlock = false;\n        }\n\n        src = src.substring(cap[0].length);\n        out += this.options.sanitize\n          ? this.options.sanitizer\n            ? this.options.sanitizer(cap[0])\n            : escape(cap[0])\n          : cap[0];\n        continue;\n      }\n\n      // link\n      if (cap = this.rules.link.exec(src)) {\n        const lastParenIndex = findClosingBracket(cap[2], '()');\n        if (lastParenIndex > -1) {\n          const start = cap[0].indexOf('!') === 0 ? 5 : 4;\n          const linkLen = start + cap[1].length + lastParenIndex;\n          cap[2] = cap[2].substring(0, lastParenIndex);\n          cap[0] = cap[0].substring(0, linkLen).trim();\n          cap[3] = '';\n        }\n        src = src.substring(cap[0].length);\n        this.inLink = true;\n        href = cap[2];\n        if (this.options.pedantic) {\n          link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n          if (link) {\n            href = link[1];\n            title = link[3];\n          } else {\n            title = '';\n          }\n        } else {\n          title = cap[3] ? cap[3].slice(1, -1) : '';\n        }\n        href = href.trim().replace(/^<([\\s\\S]*)>$/, '$1');\n        out += this.outputLink(cap, {\n          href: InlineLexer.escapes(href),\n          title: InlineLexer.escapes(title)\n        });\n        this.inLink = false;\n        continue;\n      }\n\n      // reflink, nolink\n      if ((cap = this.rules.reflink.exec(src))\n          || (cap = this.rules.nolink.exec(src))) {\n        src = src.substring(cap[0].length);\n        link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n        link = this.links[link.toLowerCase()];\n        if (!link || !link.href) {\n          out += cap[0].charAt(0);\n          src = cap[0].substring(1) + src;\n          continue;\n        }\n        this.inLink = true;\n        out += this.outputLink(cap, link);\n        this.inLink = false;\n        continue;\n      }\n\n      // strong\n      if (cap = this.rules.strong.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.strong(this.output(cap[4] || cap[3] || cap[2] || cap[1]));\n        continue;\n      }\n\n      // em\n      if (cap = this.rules.em.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.em(this.output(cap[6] || cap[5] || cap[4] || cap[3] || cap[2] || cap[1]));\n        continue;\n      }\n\n      // code\n      if (cap = this.rules.code.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.codespan(escape(cap[2].trim(), true));\n        continue;\n      }\n\n      // br\n      if (cap = this.rules.br.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.br();\n        continue;\n      }\n\n      // del (gfm)\n      if (cap = this.rules.del.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.del(this.output(cap[1]));\n        continue;\n      }\n\n      // autolink\n      if (cap = this.rules.autolink.exec(src)) {\n        src = src.substring(cap[0].length);\n        if (cap[2] === '@') {\n          text = escape(this.mangle(cap[1]));\n          href = 'mailto:' + text;\n        } else {\n          text = escape(cap[1]);\n          href = text;\n        }\n        out += this.renderer.link(href, null, text);\n        continue;\n      }\n\n      // url (gfm)\n      if (!this.inLink && (cap = this.rules.url.exec(src))) {\n        if (cap[2] === '@') {\n          text = escape(cap[0]);\n          href = 'mailto:' + text;\n        } else {\n          // do extended autolink path validation\n          do {\n            prevCapZero = cap[0];\n            cap[0] = this.rules._backpedal.exec(cap[0])[0];\n          } while (prevCapZero !== cap[0]);\n          text = escape(cap[0]);\n          if (cap[1] === 'www.') {\n            href = 'http://' + text;\n          } else {\n            href = text;\n          }\n        }\n        src = src.substring(cap[0].length);\n        out += this.renderer.link(href, null, text);\n        continue;\n      }\n\n      // text\n      if (cap = this.rules.text.exec(src)) {\n        src = src.substring(cap[0].length);\n        if (this.inRawBlock) {\n          out += this.renderer.text(this.options.sanitize ? (this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0])) : cap[0]);\n        } else {\n          out += this.renderer.text(escape(this.smartypants(cap[0])));\n        }\n        continue;\n      }\n\n      if (src) {\n        throw new Error('Infinite loop on byte: ' + src.charCodeAt(0));\n      }\n    }\n\n    return out;\n  }\n\n  static escapes(text) {\n    return text ? text.replace(InlineLexer.rules._escapes, '$1') : text;\n  }\n\n  /**\n   * Compile Link\n   */\n  outputLink(cap, link) {\n    const href = link.href,\n      title = link.title ? escape(link.title) : null;\n\n    return cap[0].charAt(0) !== '!'\n      ? this.renderer.link(href, title, this.output(cap[1]))\n      : this.renderer.image(href, title, escape(cap[1]));\n  }\n\n  /**\n   * Smartypants Transformations\n   */\n  smartypants(text) {\n    if (!this.options.smartypants) return text;\n    return text\n      // em-dashes\n      .replace(/---/g, '\\u2014')\n      // en-dashes\n      .replace(/--/g, '\\u2013')\n      // opening singles\n      .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, '$1\\u2018')\n      // closing singles & apostrophes\n      .replace(/'/g, '\\u2019')\n      // opening doubles\n      .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, '$1\\u201c')\n      // closing doubles\n      .replace(/\"/g, '\\u201d')\n      // ellipses\n      .replace(/\\.{3}/g, '\\u2026');\n  }\n\n  /**\n   * Mangle Links\n   */\n  mangle(text) {\n    if (!this.options.mangle) return text;\n    const l = text.length;\n    let out = '',\n      i = 0,\n      ch;\n\n    for (; i < l; i++) {\n      ch = text.charCodeAt(i);\n      if (Math.random() > 0.5) {\n        ch = 'x' + ch.toString(16);\n      }\n      out += '&#' + ch + ';';\n    }\n\n    return out;\n  }\n};\n","const { defaults } = require('./defaults.js');\nconst { block } = require('./rules.js');\nconst {\n  rtrim,\n  splitCells,\n  escape\n} = require('./helpers.js');\n\n/**\n * Block Lexer\n */\nmodule.exports = class Lexer {\n  constructor(options) {\n    this.tokens = [];\n    this.tokens.links = Object.create(null);\n    this.options = options || defaults;\n    this.rules = block.normal;\n\n    if (this.options.pedantic) {\n      this.rules = block.pedantic;\n    } else if (this.options.gfm) {\n      this.rules = block.gfm;\n    }\n  }\n\n  /**\n   * Expose Block Rules\n   */\n  static get rules() {\n    return block;\n  }\n\n  /**\n   * Static Lex Method\n   */\n  static lex(src, options) {\n    const lexer = new Lexer(options);\n    return lexer.lex(src);\n  };\n\n  /**\n   * Preprocessing\n   */\n  lex(src) {\n    src = src\n      .replace(/\\r\\n|\\r/g, '\\n')\n      .replace(/\\t/g, '    ');\n\n    return this.token(src, true);\n  };\n\n  /**\n   * Lexing\n   */\n  token(src, top) {\n    src = src.replace(/^ +$/gm, '');\n    let next,\n      loose,\n      cap,\n      bull,\n      b,\n      item,\n      listStart,\n      listItems,\n      t,\n      space,\n      i,\n      tag,\n      l,\n      isordered,\n      istask,\n      ischecked;\n\n    while (src) {\n      // newline\n      if (cap = this.rules.newline.exec(src)) {\n        src = src.substring(cap[0].length);\n        if (cap[0].length > 1) {\n          this.tokens.push({\n            type: 'space'\n          });\n        }\n      }\n\n      // code\n      if (cap = this.rules.code.exec(src)) {\n        const lastToken = this.tokens[this.tokens.length - 1];\n        src = src.substring(cap[0].length);\n        // An indented code block cannot interrupt a paragraph.\n        if (lastToken && lastToken.type === 'paragraph') {\n          lastToken.text += '\\n' + cap[0].trimRight();\n        } else {\n          cap = cap[0].replace(/^ {4}/gm, '');\n          this.tokens.push({\n            type: 'code',\n            codeBlockStyle: 'indented',\n            text: !this.options.pedantic\n              ? rtrim(cap, '\\n')\n              : cap\n          });\n        }\n        continue;\n      }\n\n      // fences\n      if (cap = this.rules.fences.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'code',\n          lang: cap[2] ? cap[2].trim() : cap[2],\n          text: cap[3] || ''\n        });\n        continue;\n      }\n\n      // heading\n      if (cap = this.rules.heading.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'heading',\n          depth: cap[1].length,\n          text: cap[2]\n        });\n        continue;\n      }\n\n      // table no leading pipe (gfm)\n      if (cap = this.rules.nptable.exec(src)) {\n        item = {\n          type: 'table',\n          header: splitCells(cap[1].replace(/^ *| *\\| *$/g, '')),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n        };\n\n        if (item.header.length === item.align.length) {\n          src = src.substring(cap[0].length);\n\n          for (i = 0; i < item.align.length; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          for (i = 0; i < item.cells.length; i++) {\n            item.cells[i] = splitCells(item.cells[i], item.header.length);\n          }\n\n          this.tokens.push(item);\n\n          continue;\n        }\n      }\n\n      // hr\n      if (cap = this.rules.hr.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'hr'\n        });\n        continue;\n      }\n\n      // blockquote\n      if (cap = this.rules.blockquote.exec(src)) {\n        src = src.substring(cap[0].length);\n\n        this.tokens.push({\n          type: 'blockquote_start'\n        });\n\n        cap = cap[0].replace(/^ *> ?/gm, '');\n\n        // Pass `top` to keep the current\n        // \"toplevel\" state. This is exactly\n        // how markdown.pl works.\n        this.token(cap, top);\n\n        this.tokens.push({\n          type: 'blockquote_end'\n        });\n\n        continue;\n      }\n\n      // list\n      if (cap = this.rules.list.exec(src)) {\n        src = src.substring(cap[0].length);\n        bull = cap[2];\n        isordered = bull.length > 1;\n\n        listStart = {\n          type: 'list_start',\n          ordered: isordered,\n          start: isordered ? +bull : '',\n          loose: false\n        };\n\n        this.tokens.push(listStart);\n\n        // Get each top-level item.\n        cap = cap[0].match(this.rules.item);\n\n        listItems = [];\n        next = false;\n        l = cap.length;\n        i = 0;\n\n        for (; i < l; i++) {\n          item = cap[i];\n\n          // Remove the list item's bullet\n          // so it is seen as the next token.\n          space = item.length;\n          item = item.replace(/^ *([*+-]|\\d+\\.) */, '');\n\n          // Outdent whatever the\n          // list item contains. Hacky.\n          if (~item.indexOf('\\n ')) {\n            space -= item.length;\n            item = !this.options.pedantic\n              ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')\n              : item.replace(/^ {1,4}/gm, '');\n          }\n\n          // Determine whether the next list item belongs here.\n          // Backpedal if it does not belong in this list.\n          if (i !== l - 1) {\n            b = block.bullet.exec(cap[i + 1])[0];\n            if (bull.length > 1 ? b.length === 1\n              : (b.length > 1 || (this.options.smartLists && b !== bull))) {\n              src = cap.slice(i + 1).join('\\n') + src;\n              i = l - 1;\n            }\n          }\n\n          // Determine whether item is loose or not.\n          // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n          // for discount behavior.\n          loose = next || /\\n\\n(?!\\s*$)/.test(item);\n          if (i !== l - 1) {\n            next = item.charAt(item.length - 1) === '\\n';\n            if (!loose) loose = next;\n          }\n\n          if (loose) {\n            listStart.loose = true;\n          }\n\n          // Check for task list items\n          istask = /^\\[[ xX]\\] /.test(item);\n          ischecked = undefined;\n          if (istask) {\n            ischecked = item[1] !== ' ';\n            item = item.replace(/^\\[[ xX]\\] +/, '');\n          }\n\n          t = {\n            type: 'list_item_start',\n            task: istask,\n            checked: ischecked,\n            loose: loose\n          };\n\n          listItems.push(t);\n          this.tokens.push(t);\n\n          // Recurse.\n          this.token(item, false);\n\n          this.tokens.push({\n            type: 'list_item_end'\n          });\n        }\n\n        if (listStart.loose) {\n          l = listItems.length;\n          i = 0;\n          for (; i < l; i++) {\n            listItems[i].loose = true;\n          }\n        }\n\n        this.tokens.push({\n          type: 'list_end'\n        });\n\n        continue;\n      }\n\n      // html\n      if (cap = this.rules.html.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: this.options.sanitize\n            ? 'paragraph'\n            : 'html',\n          pre: !this.options.sanitizer\n            && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n          text: this.options.sanitize ? (this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0])) : cap[0]\n        });\n        continue;\n      }\n\n      // def\n      if (top && (cap = this.rules.def.exec(src))) {\n        src = src.substring(cap[0].length);\n        if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n        tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n        if (!this.tokens.links[tag]) {\n          this.tokens.links[tag] = {\n            href: cap[2],\n            title: cap[3]\n          };\n        }\n        continue;\n      }\n\n      // table (gfm)\n      if (cap = this.rules.table.exec(src)) {\n        item = {\n          type: 'table',\n          header: splitCells(cap[1].replace(/^ *| *\\| *$/g, '')),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n        };\n\n        if (item.header.length === item.align.length) {\n          src = src.substring(cap[0].length);\n\n          for (i = 0; i < item.align.length; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          for (i = 0; i < item.cells.length; i++) {\n            item.cells[i] = splitCells(\n              item.cells[i].replace(/^ *\\| *| *\\| *$/g, ''),\n              item.header.length);\n          }\n\n          this.tokens.push(item);\n\n          continue;\n        }\n      }\n\n      // lheading\n      if (cap = this.rules.lheading.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'heading',\n          depth: cap[2].charAt(0) === '=' ? 1 : 2,\n          text: cap[1]\n        });\n        continue;\n      }\n\n      // top-level paragraph\n      if (top && (cap = this.rules.paragraph.exec(src))) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'paragraph',\n          text: cap[1].charAt(cap[1].length - 1) === '\\n'\n            ? cap[1].slice(0, -1)\n            : cap[1]\n        });\n        continue;\n      }\n\n      // text\n      if (cap = this.rules.text.exec(src)) {\n        // Top-level should never reach here.\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'text',\n          text: cap[0]\n        });\n        continue;\n      }\n\n      if (src) {\n        throw new Error('Infinite loop on byte: ' + src.charCodeAt(0));\n      }\n    }\n\n    return this.tokens;\n  };\n};\n","const Renderer = require('./Renderer.js');\nconst Slugger = require('./Slugger.js');\nconst InlineLexer = require('./InlineLexer.js');\nconst TextRenderer = require('./TextRenderer.js');\nconst { defaults } = require('./defaults.js');\nconst {\n  merge,\n  unescape\n} = require('./helpers.js');\n\n/**\n * Parsing & Compiling\n */\nmodule.exports = class Parser {\n  constructor(options) {\n    this.tokens = [];\n    this.token = null;\n    this.options = options || defaults;\n    this.options.renderer = this.options.renderer || new Renderer();\n    this.renderer = this.options.renderer;\n    this.renderer.options = this.options;\n    this.slugger = new Slugger();\n  }\n\n  /**\n   * Static Parse Method\n   */\n  static parse(tokens, options) {\n    const parser = new Parser(options);\n    return parser.parse(tokens);\n  };\n\n  /**\n   * Parse Loop\n   */\n  parse(tokens) {\n    this.inline = new InlineLexer(tokens.links, this.options);\n    // use an InlineLexer with a TextRenderer to extract pure text\n    this.inlineText = new InlineLexer(\n      tokens.links,\n      merge({}, this.options, { renderer: new TextRenderer() })\n    );\n    this.tokens = tokens.reverse();\n\n    let out = '';\n    while (this.next()) {\n      out += this.tok();\n    }\n\n    return out;\n  };\n\n  /**\n   * Next Token\n   */\n  next() {\n    this.token = this.tokens.pop();\n    return this.token;\n  };\n\n  /**\n   * Preview Next Token\n   */\n  peek() {\n    return this.tokens[this.tokens.length - 1] || 0;\n  };\n\n  /**\n   * Parse Text Tokens\n   */\n  parseText() {\n    let body = this.token.text;\n\n    while (this.peek().type === 'text') {\n      body += '\\n' + this.next().text;\n    }\n\n    return this.inline.output(body);\n  };\n\n  /**\n   * Parse Current Token\n   */\n  tok() {\n    let body = '';\n    switch (this.token.type) {\n      case 'space': {\n        return '';\n      }\n      case 'hr': {\n        return this.renderer.hr();\n      }\n      case 'heading': {\n        return this.renderer.heading(\n          this.inline.output(this.token.text),\n          this.token.depth,\n          unescape(this.inlineText.output(this.token.text)),\n          this.slugger);\n      }\n      case 'code': {\n        return this.renderer.code(this.token.text,\n          this.token.lang,\n          this.token.escaped);\n      }\n      case 'table': {\n        let header = '',\n          i,\n          row,\n          cell,\n          j;\n\n        // header\n        cell = '';\n        for (i = 0; i < this.token.header.length; i++) {\n          cell += this.renderer.tablecell(\n            this.inline.output(this.token.header[i]),\n            { header: true, align: this.token.align[i] }\n          );\n        }\n        header += this.renderer.tablerow(cell);\n\n        for (i = 0; i < this.token.cells.length; i++) {\n          row = this.token.cells[i];\n\n          cell = '';\n          for (j = 0; j < row.length; j++) {\n            cell += this.renderer.tablecell(\n              this.inline.output(row[j]),\n              { header: false, align: this.token.align[j] }\n            );\n          }\n\n          body += this.renderer.tablerow(cell);\n        }\n        return this.renderer.table(header, body);\n      }\n      case 'blockquote_start': {\n        body = '';\n\n        while (this.next().type !== 'blockquote_end') {\n          body += this.tok();\n        }\n\n        return this.renderer.blockquote(body);\n      }\n      case 'list_start': {\n        body = '';\n        const ordered = this.token.ordered,\n          start = this.token.start;\n\n        while (this.next().type !== 'list_end') {\n          body += this.tok();\n        }\n\n        return this.renderer.list(body, ordered, start);\n      }\n      case 'list_item_start': {\n        body = '';\n        const loose = this.token.loose;\n        const checked = this.token.checked;\n        const task = this.token.task;\n\n        if (this.token.task) {\n          if (loose) {\n            if (this.peek().type === 'text') {\n              const nextToken = this.peek();\n              nextToken.text = this.renderer.checkbox(checked) + ' ' + nextToken.text;\n            } else {\n              this.tokens.push({\n                type: 'text',\n                text: this.renderer.checkbox(checked)\n              });\n            }\n          } else {\n            body += this.renderer.checkbox(checked);\n          }\n        }\n\n        while (this.next().type !== 'list_item_end') {\n          body += !loose && this.token.type === 'text'\n            ? this.parseText()\n            : this.tok();\n        }\n        return this.renderer.listitem(body, task, checked);\n      }\n      case 'html': {\n        // TODO parse inline content if parameter markdown=1\n        return this.renderer.html(this.token.text);\n      }\n      case 'paragraph': {\n        return this.renderer.paragraph(this.inline.output(this.token.text));\n      }\n      case 'text': {\n        return this.renderer.paragraph(this.parseText());\n      }\n      default: {\n        const errMsg = 'Token with \"' + this.token.type + '\" type was not found.';\n        if (this.options.silent) {\n          console.log(errMsg);\n        } else {\n          throw new Error(errMsg);\n        }\n      }\n    }\n  };\n};\n","const { defaults } = require('./defaults.js');\nconst {\n  cleanUrl,\n  escape\n} = require('./helpers.js');\n\n/**\n * Renderer\n */\nmodule.exports = class Renderer {\n  constructor(options) {\n    this.options = options || defaults;\n  }\n\n  code(code, infostring, escaped) {\n    const lang = (infostring || '').match(/\\S*/)[0];\n    if (this.options.highlight) {\n      const out = this.options.highlight(code, lang);\n      if (out != null && out !== code) {\n        escaped = true;\n        code = out;\n      }\n    }\n\n    if (!lang) {\n      return '<pre><code>'\n        + (escaped ? code : escape(code, true))\n        + '</code></pre>';\n    }\n\n    return '<pre><code class=\"'\n      + this.options.langPrefix\n      + escape(lang, true)\n      + '\">'\n      + (escaped ? code : escape(code, true))\n      + '</code></pre>\\n';\n  };\n\n  blockquote(quote) {\n    return '<blockquote>\\n' + quote + '</blockquote>\\n';\n  };\n\n  html(html) {\n    return html;\n  };\n\n  heading(text, level, raw, slugger) {\n    if (this.options.headerIds) {\n      return '<h'\n        + level\n        + ' id=\"'\n        + this.options.headerPrefix\n        + slugger.slug(raw)\n        + '\">'\n        + text\n        + '</h'\n        + level\n        + '>\\n';\n    }\n    // ignore IDs\n    return '<h' + level + '>' + text + '</h' + level + '>\\n';\n  };\n\n  hr() {\n    return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n  };\n\n  list(body, ordered, start) {\n    const type = ordered ? 'ol' : 'ul',\n      startatt = (ordered && start !== 1) ? (' start=\"' + start + '\"') : '';\n    return '<' + type + startatt + '>\\n' + body + '</' + type + '>\\n';\n  };\n\n  listitem(text) {\n    return '<li>' + text + '</li>\\n';\n  };\n\n  checkbox(checked) {\n    return '<input '\n      + (checked ? 'checked=\"\" ' : '')\n      + 'disabled=\"\" type=\"checkbox\"'\n      + (this.options.xhtml ? ' /' : '')\n      + '> ';\n  };\n\n  paragraph(text) {\n    return '<p>' + text + '</p>\\n';\n  };\n\n  table(header, body) {\n    if (body) body = '<tbody>' + body + '</tbody>';\n\n    return '<table>\\n'\n      + '<thead>\\n'\n      + header\n      + '</thead>\\n'\n      + body\n      + '</table>\\n';\n  };\n\n  tablerow(content) {\n    return '<tr>\\n' + content + '</tr>\\n';\n  };\n\n  tablecell(content, flags) {\n    const type = flags.header ? 'th' : 'td';\n    const tag = flags.align\n      ? '<' + type + ' align=\"' + flags.align + '\">'\n      : '<' + type + '>';\n    return tag + content + '</' + type + '>\\n';\n  };\n\n  // span level renderer\n  strong(text) {\n    return '<strong>' + text + '</strong>';\n  };\n\n  em(text) {\n    return '<em>' + text + '</em>';\n  };\n\n  codespan(text) {\n    return '<code>' + text + '</code>';\n  };\n\n  br() {\n    return this.options.xhtml ? '<br/>' : '<br>';\n  };\n\n  del(text) {\n    return '<del>' + text + '</del>';\n  };\n\n  link(href, title, text) {\n    href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n    if (href === null) {\n      return text;\n    }\n    let out = '<a href=\"' + escape(href) + '\"';\n    if (title) {\n      out += ' title=\"' + title + '\"';\n    }\n    out += '>' + text + '</a>';\n    return out;\n  };\n\n  image(href, title, text) {\n    href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n    if (href === null) {\n      return text;\n    }\n\n    let out = '<img src=\"' + href + '\" alt=\"' + text + '\"';\n    if (title) {\n      out += ' title=\"' + title + '\"';\n    }\n    out += this.options.xhtml ? '/>' : '>';\n    return out;\n  };\n\n  text(text) {\n    return text;\n  };\n};\n","/**\n * Slugger generates header id\n */\nmodule.exports = class Slugger {\n  constructor() {\n    this.seen = {};\n  }\n\n  /**\n   * Convert string to unique id\n   */\n  slug(value) {\n    let slug = value\n      .toLowerCase()\n      .trim()\n      .replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,./:;<=>?@[\\]^`{|}~]/g, '')\n      .replace(/\\s/g, '-');\n\n    if (this.seen.hasOwnProperty(slug)) {\n      const originalSlug = slug;\n      do {\n        this.seen[originalSlug]++;\n        slug = originalSlug + '-' + this.seen[originalSlug];\n      } while (this.seen.hasOwnProperty(slug));\n    }\n    this.seen[slug] = 0;\n\n    return slug;\n  };\n};\n","/**\n * TextRenderer\n * returns only the textual part of the token\n */\nmodule.exports = class TextRenderer {\n  // no need for block level renderers\n  strong(text) {\n    return text;\n  }\n\n  em(text) {\n    return text;\n  }\n\n  codespan(text) {\n    return text;\n  }\n\n  del(text) {\n    return text;\n  }\n\n  text(text) {\n    return text;\n  }\n\n  link(href, title, text) {\n    return '' + text;\n  }\n\n  image(href, title, text) {\n    return '' + text;\n  }\n\n  br() {\n    return '';\n  }\n};\n","function getDefaults() {\n  return {\n    baseUrl: null,\n    breaks: false,\n    gfm: true,\n    headerIds: true,\n    headerPrefix: '',\n    highlight: null,\n    langPrefix: 'language-',\n    mangle: true,\n    pedantic: false,\n    renderer: null,\n    sanitize: false,\n    sanitizer: null,\n    silent: false,\n    smartLists: false,\n    smartypants: false,\n    xhtml: false\n  };\n}\n\nfunction changeDefaults(newDefaults) {\n  module.exports.defaults = newDefaults;\n}\n\nmodule.exports = {\n  defaults: getDefaults(),\n  getDefaults,\n  changeDefaults\n};\n","/**\n * Helpers\n */\nconst escapeTest = /[&<>\"']/;\nconst escapeReplace = /[&<>\"']/g;\nconst escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\nconst escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\nconst escapeReplacements = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n};\nconst getEscapeReplacement = (ch) => escapeReplacements[ch];\nfunction escape(html, encode) {\n  if (encode) {\n    if (escapeTest.test(html)) {\n      return html.replace(escapeReplace, getEscapeReplacement);\n    }\n  } else {\n    if (escapeTestNoEncode.test(html)) {\n      return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n    }\n  }\n\n  return html;\n}\n\nconst unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\n\nfunction unescape(html) {\n  // explicitly match decimal, hex, and named HTML entities\n  return html.replace(unescapeTest, (_, n) => {\n    n = n.toLowerCase();\n    if (n === 'colon') return ':';\n    if (n.charAt(0) === '#') {\n      return n.charAt(1) === 'x'\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\n        : String.fromCharCode(+n.substring(1));\n    }\n    return '';\n  });\n}\n\nconst caret = /(^|[^\\[])\\^/g;\nfunction edit(regex, opt) {\n  regex = regex.source || regex;\n  opt = opt || '';\n  const obj = {\n    replace: (name, val) => {\n      val = val.source || val;\n      val = val.replace(caret, '$1');\n      regex = regex.replace(name, val);\n      return obj;\n    },\n    getRegex: () => {\n      return new RegExp(regex, opt);\n    }\n  };\n  return obj;\n}\n\nconst nonWordAndColonTest = /[^\\w:]/g;\nconst originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\nfunction cleanUrl(sanitize, base, href) {\n  if (sanitize) {\n    let prot;\n    try {\n      prot = decodeURIComponent(unescape(href))\n        .replace(nonWordAndColonTest, '')\n        .toLowerCase();\n    } catch (e) {\n      return null;\n    }\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n      return null;\n    }\n  }\n  if (base && !originIndependentUrl.test(href)) {\n    href = resolveUrl(base, href);\n  }\n  try {\n    href = encodeURI(href).replace(/%25/g, '%');\n  } catch (e) {\n    return null;\n  }\n  return href;\n}\n\nconst baseUrls = {};\nconst justDomain = /^[^:]+:\\/*[^/]*$/;\nconst protocol = /^([^:]+:)[\\s\\S]*$/;\nconst domain = /^([^:]+:\\/*[^/]*)[\\s\\S]*$/;\n\nfunction resolveUrl(base, href) {\n  if (!baseUrls[' ' + base]) {\n    // we can ignore everything in base after the last slash of its path component,\n    // but we might need to add _that_\n    // https://tools.ietf.org/html/rfc3986#section-3\n    if (justDomain.test(base)) {\n      baseUrls[' ' + base] = base + '/';\n    } else {\n      baseUrls[' ' + base] = rtrim(base, '/', true);\n    }\n  }\n  base = baseUrls[' ' + base];\n  const relativeBase = base.indexOf(':') === -1;\n\n  if (href.substring(0, 2) === '//') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(protocol, '$1') + href;\n  } else if (href.charAt(0) === '/') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(domain, '$1') + href;\n  } else {\n    return base + href;\n  }\n}\n\nconst noopTest = { exec: function noopTest() {} };\n\nfunction merge(obj) {\n  let i = 1,\n    target,\n    key;\n\n  for (; i < arguments.length; i++) {\n    target = arguments[i];\n    for (key in target) {\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\n        obj[key] = target[key];\n      }\n    }\n  }\n\n  return obj;\n}\n\nfunction splitCells(tableRow, count) {\n  // ensure that every cell-delimiting pipe has a space\n  // before it to distinguish it from an escaped pipe\n  const row = tableRow.replace(/\\|/g, (match, offset, str) => {\n      let escaped = false,\n        curr = offset;\n      while (--curr >= 0 && str[curr] === '\\\\') escaped = !escaped;\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n    cells = row.split(/ \\|/);\n  let i = 0;\n\n  if (cells.length > count) {\n    cells.splice(count);\n  } else {\n    while (cells.length < count) cells.push('');\n  }\n\n  for (; i < cells.length; i++) {\n    // leading or trailing whitespace is ignored per the gfm spec\n    cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n  }\n  return cells;\n}\n\n// Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n// /c*$/ is vulnerable to REDOS.\n// invert: Remove suffix of non-c chars instead. Default falsey.\nfunction rtrim(str, c, invert) {\n  const l = str.length;\n  if (l === 0) {\n    return '';\n  }\n\n  // Length of suffix matching the invert condition.\n  let suffLen = 0;\n\n  // Step left until we fail to match the invert condition.\n  while (suffLen < l) {\n    const currChar = str.charAt(l - suffLen - 1);\n    if (currChar === c && !invert) {\n      suffLen++;\n    } else if (currChar !== c && invert) {\n      suffLen++;\n    } else {\n      break;\n    }\n  }\n\n  return str.substr(0, l - suffLen);\n}\n\nfunction findClosingBracket(str, b) {\n  if (str.indexOf(b[1]) === -1) {\n    return -1;\n  }\n  const l = str.length;\n  let level = 0,\n    i = 0;\n  for (; i < l; i++) {\n    if (str[i] === '\\\\') {\n      i++;\n    } else if (str[i] === b[0]) {\n      level++;\n    } else if (str[i] === b[1]) {\n      level--;\n      if (level < 0) {\n        return i;\n      }\n    }\n  }\n  return -1;\n}\n\nfunction checkSanitizeDeprecation(opt) {\n  if (opt && opt.sanitize && !opt.silent) {\n    console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n  }\n}\n\nmodule.exports = {\n  escape,\n  unescape,\n  edit,\n  cleanUrl,\n  resolveUrl,\n  noopTest,\n  merge,\n  splitCells,\n  rtrim,\n  findClosingBracket,\n  checkSanitizeDeprecation\n};\n","const Lexer = require('./Lexer.js');\nconst Parser = require('./Parser.js');\nconst Renderer = require('./Renderer.js');\nconst TextRenderer = require('./TextRenderer.js');\nconst InlineLexer = require('./InlineLexer.js');\nconst Slugger = require('./Slugger.js');\nconst {\n  merge,\n  checkSanitizeDeprecation,\n  escape\n} = require('./helpers.js');\nconst {\n  getDefaults,\n  changeDefaults,\n  defaults\n} = require('./defaults.js');\n\n/**\n * Marked\n */\nfunction marked(src, opt, callback) {\n  // throw error in case of non string input\n  if (typeof src === 'undefined' || src === null) {\n    throw new Error('marked(): input parameter is undefined or null');\n  }\n  if (typeof src !== 'string') {\n    throw new Error('marked(): input parameter is of type '\n      + Object.prototype.toString.call(src) + ', string expected');\n  }\n\n  if (callback || typeof opt === 'function') {\n    if (!callback) {\n      callback = opt;\n      opt = null;\n    }\n\n    opt = merge({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation(opt);\n    const highlight = opt.highlight;\n    let tokens,\n      pending,\n      i = 0;\n\n    try {\n      tokens = Lexer.lex(src, opt);\n    } catch (e) {\n      return callback(e);\n    }\n\n    pending = tokens.length;\n\n    const done = function(err) {\n      if (err) {\n        opt.highlight = highlight;\n        return callback(err);\n      }\n\n      let out;\n\n      try {\n        out = Parser.parse(tokens, opt);\n      } catch (e) {\n        err = e;\n      }\n\n      opt.highlight = highlight;\n\n      return err\n        ? callback(err)\n        : callback(null, out);\n    };\n\n    if (!highlight || highlight.length < 3) {\n      return done();\n    }\n\n    delete opt.highlight;\n\n    if (!pending) return done();\n\n    for (; i < tokens.length; i++) {\n      (function(token) {\n        if (token.type !== 'code') {\n          return --pending || done();\n        }\n        return highlight(token.text, token.lang, function(err, code) {\n          if (err) return done(err);\n          if (code == null || code === token.text) {\n            return --pending || done();\n          }\n          token.text = code;\n          token.escaped = true;\n          --pending || done();\n        });\n      })(tokens[i]);\n    }\n\n    return;\n  }\n  try {\n    opt = merge({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation(opt);\n    return Parser.parse(Lexer.lex(src, opt), opt);\n  } catch (e) {\n    e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n    if ((opt || marked.defaults).silent) {\n      return '<p>An error occurred:</p><pre>'\n        + escape(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n}\n\n/**\n * Options\n */\n\nmarked.options =\nmarked.setOptions = function(opt) {\n  merge(marked.defaults, opt);\n  changeDefaults(marked.defaults);\n  return marked;\n};\n\nmarked.getDefaults = getDefaults;\n\nmarked.defaults = defaults;\n\n/**\n * Expose\n */\n\nmarked.Parser = Parser;\nmarked.parser = Parser.parse;\n\nmarked.Renderer = Renderer;\nmarked.TextRenderer = TextRenderer;\n\nmarked.Lexer = Lexer;\nmarked.lexer = Lexer.lex;\n\nmarked.InlineLexer = InlineLexer;\nmarked.inlineLexer = InlineLexer.output;\n\nmarked.Slugger = Slugger;\n\nmarked.parse = marked;\n\nmodule.exports = marked;\n","const {\n  noopTest,\n  edit,\n  merge\n} = require('./helpers.js');\n\n/**\n * Block-Level Grammar\n */\nconst block = {\n  newline: /^\\n+/,\n  code: /^( {4}[^\\n]+\\n*)+/,\n  fences: /^ {0,3}(`{3,}|~{3,})([^`~\\n]*)\\n(?:|([\\s\\S]*?)\\n)(?: {0,3}\\1[~`]* *(?:\\n+|$)|$)/,\n  hr: /^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)/,\n  heading: /^ {0,3}(#{1,6}) +([^\\n]*?)(?: +#+)? *(?:\\n+|$)/,\n  blockquote: /^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/,\n  list: /^( {0,3})(bull) [\\s\\S]+?(?:hr|def|\\n{2,}(?! )(?!\\1bull )\\n*|\\s*$)/,\n  html: '^ {0,3}(?:' // optional indentation\n    + '<(script|pre|style)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)' // (1)\n    + '|comment[^\\\\n]*(\\\\n+|$)' // (2)\n    + '|<\\\\?[\\\\s\\\\S]*?\\\\?>\\\\n*' // (3)\n    + '|<![A-Z][\\\\s\\\\S]*?>\\\\n*' // (4)\n    + '|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>\\\\n*' // (5)\n    + '|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (6)\n    + '|<(?!script|pre|style)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (7) open tag\n    + '|</(?!script|pre|style)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (7) closing tag\n    + ')',\n  def: /^ {0,3}\\[(label)\\]: *\\n? *<?([^\\s>]+)>?(?:(?: +\\n? *| *\\n *)(title))? *(?:\\n+|$)/,\n  nptable: noopTest,\n  table: noopTest,\n  lheading: /^([^\\n]+)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n  // regex template, placeholders will be replaced according to different paragraph\n  // interruption rules of commonmark and the original markdown spec:\n  _paragraph: /^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\\n]+)*)/,\n  text: /^[^\\n]+/\n};\n\nblock._label = /(?!\\s*\\])(?:\\\\[\\[\\]]|[^\\[\\]])+/;\nblock._title = /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/;\nblock.def = edit(block.def)\n  .replace('label', block._label)\n  .replace('title', block._title)\n  .getRegex();\n\nblock.bullet = /(?:[*+-]|\\d{1,9}\\.)/;\nblock.item = /^( *)(bull) ?[^\\n]*(?:\\n(?!\\1bull ?)[^\\n]*)*/;\nblock.item = edit(block.item, 'gm')\n  .replace(/bull/g, block.bullet)\n  .getRegex();\n\nblock.list = edit(block.list)\n  .replace(/bull/g, block.bullet)\n  .replace('hr', '\\\\n+(?=\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$))')\n  .replace('def', '\\\\n+(?=' + block.def.source + ')')\n  .getRegex();\n\nblock._tag = 'address|article|aside|base|basefont|blockquote|body|caption'\n  + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption'\n  + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe'\n  + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option'\n  + '|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr'\n  + '|track|ul';\nblock._comment = /<!--(?!-?>)[\\s\\S]*?-->/;\nblock.html = edit(block.html, 'i')\n  .replace('comment', block._comment)\n  .replace('tag', block._tag)\n  .replace('attribute', / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/)\n  .getRegex();\n\nblock.paragraph = edit(block._paragraph)\n  .replace('hr', block.hr)\n  .replace('heading', ' {0,3}#{1,6} +')\n  .replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('blockquote', ' {0,3}>')\n  .replace('fences', ' {0,3}(?:`{3,}|~{3,})[^`\\\\n]*\\\\n')\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|!--)')\n  .replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n\nblock.blockquote = edit(block.blockquote)\n  .replace('paragraph', block.paragraph)\n  .getRegex();\n\n/**\n * Normal Block Grammar\n */\n\nblock.normal = merge({}, block);\n\n/**\n * GFM Block Grammar\n */\n\nblock.gfm = merge({}, block.normal, {\n  nptable: /^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:.*[^>\\n ].*(?:\\n|$))*)\\n*|$)/,\n  table: /^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n((?: *[^>\\n ].*(?:\\n|$))*)\\n*|$)/\n});\n\n/**\n * Pedantic grammar (original John Gruber's loose markdown specification)\n */\n\nblock.pedantic = merge({}, block.normal, {\n  html: edit(\n    '^ *(?:comment *(?:\\\\n|\\\\s*$)'\n    + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)' // closed tag\n    + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|\\\\s[^\\'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))')\n    .replace('comment', block._comment)\n    .replace(/tag/g, '(?!(?:'\n      + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub'\n      + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)'\n      + '\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b')\n    .getRegex(),\n  def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,\n  heading: /^ *(#{1,6}) *([^\\n]+?) *(?:#+ *)?(?:\\n+|$)/,\n  fences: noopTest, // fences not supported\n  paragraph: edit(block.normal._paragraph)\n    .replace('hr', block.hr)\n    .replace('heading', ' *#{1,6} *[^\\n]')\n    .replace('lheading', block.lheading)\n    .replace('blockquote', ' {0,3}>')\n    .replace('|fences', '')\n    .replace('|list', '')\n    .replace('|html', '')\n    .getRegex()\n});\n\n/**\n * Inline-Level Grammar\n */\nconst inline = {\n  escape: /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,\n  autolink: /^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/,\n  url: noopTest,\n  tag: '^comment'\n    + '|^</[a-zA-Z][\\\\w:-]*\\\\s*>' // self-closing tag\n    + '|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>' // open tag\n    + '|^<\\\\?[\\\\s\\\\S]*?\\\\?>' // processing instruction, e.g. <?php ?>\n    + '|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\n    + '|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>', // CDATA section\n  link: /^!?\\[(label)\\]\\(\\s*(href)(?:\\s+(title))?\\s*\\)/,\n  reflink: /^!?\\[(label)\\]\\[(?!\\s*\\])((?:\\\\[\\[\\]]?|[^\\[\\]\\\\])+)\\]/,\n  nolink: /^!?\\[(?!\\s*\\])((?:\\[[^\\[\\]]*\\]|\\\\[\\[\\]]|[^\\[\\]])*)\\](?:\\[\\])?/,\n  strong: /^__([^\\s_])__(?!_)|^\\*\\*([^\\s*])\\*\\*(?!\\*)|^__([^\\s][\\s\\S]*?[^\\s])__(?!_)|^\\*\\*([^\\s][\\s\\S]*?[^\\s])\\*\\*(?!\\*)/,\n  em: /^_([^\\s_])_(?!_)|^\\*([^\\s*<\\[])\\*(?!\\*)|^_([^\\s<][\\s\\S]*?[^\\s_])_(?!_|[^\\spunctuation])|^_([^\\s_<][\\s\\S]*?[^\\s])_(?!_|[^\\spunctuation])|^\\*([^\\s<\"][\\s\\S]*?[^\\s\\*])\\*(?!\\*|[^\\spunctuation])|^\\*([^\\s*\"<\\[][\\s\\S]*?[^\\s])\\*(?!\\*)/,\n  code: /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,\n  br: /^( {2,}|\\\\)\\n(?!\\s*$)/,\n  del: noopTest,\n  text: /^(`+|[^`])(?:[\\s\\S]*?(?:(?=[\\\\<!\\[`*]|\\b_|$)|[^ ](?= {2,}\\n))|(?= {2,}\\n))/\n};\n\n// list of punctuation marks from common mark spec\n// without ` and ] to workaround Rule 17 (inline code blocks/links)\ninline._punctuation = '!\"#$%&\\'()*+,\\\\-./:;<=>?@\\\\[^_{|}~';\ninline.em = edit(inline.em).replace(/punctuation/g, inline._punctuation).getRegex();\n\ninline._escapes = /\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/g;\n\ninline._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;\ninline._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;\ninline.autolink = edit(inline.autolink)\n  .replace('scheme', inline._scheme)\n  .replace('email', inline._email)\n  .getRegex();\n\ninline._attribute = /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/;\n\ninline.tag = edit(inline.tag)\n  .replace('comment', block._comment)\n  .replace('attribute', inline._attribute)\n  .getRegex();\n\ninline._label = /(?:\\[[^\\[\\]]*\\]|\\\\.|`[^`]*`|[^\\[\\]\\\\`])*?/;\ninline._href = /<(?:\\\\[<>]?|[^\\s<>\\\\])*>|[^\\s\\x00-\\x1f]*/;\ninline._title = /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/;\n\ninline.link = edit(inline.link)\n  .replace('label', inline._label)\n  .replace('href', inline._href)\n  .replace('title', inline._title)\n  .getRegex();\n\ninline.reflink = edit(inline.reflink)\n  .replace('label', inline._label)\n  .getRegex();\n\n/**\n * Normal Inline Grammar\n */\n\ninline.normal = merge({}, inline);\n\n/**\n * Pedantic Inline Grammar\n */\n\ninline.pedantic = merge({}, inline.normal, {\n  strong: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n  em: /^_(?=\\S)([\\s\\S]*?\\S)_(?!_)|^\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)/,\n  link: edit(/^!?\\[(label)\\]\\((.*?)\\)/)\n    .replace('label', inline._label)\n    .getRegex(),\n  reflink: edit(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/)\n    .replace('label', inline._label)\n    .getRegex()\n});\n\n/**\n * GFM Inline Grammar\n */\n\ninline.gfm = merge({}, inline.normal, {\n  escape: edit(inline.escape).replace('])', '~|])').getRegex(),\n  _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,\n  url: /^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/,\n  _backpedal: /(?:[^?!.,:;*_~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,\n  del: /^~+(?=\\S)([\\s\\S]*?\\S)~+/,\n  text: /^(`+|[^`])(?:[\\s\\S]*?(?:(?=[\\\\<!\\[`*~]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@))|(?= {2,}\\n|[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@))/\n});\n\ninline.gfm.url = edit(inline.gfm.url, 'i')\n  .replace('email', inline.gfm._extended_email)\n  .getRegex();\n/**\n * GFM + Line Breaks Inline Grammar\n */\n\ninline.breaks = merge({}, inline.gfm, {\n  br: edit(inline.br).replace('{2,}', '*').getRegex(),\n  text: edit(inline.gfm.text)\n    .replace('\\\\b_', '\\\\b_| {2,}\\\\n')\n    .replace(/\\{2,\\}/g, '*')\n    .getRegex()\n});\n\nmodule.exports = {\n  block,\n  inline\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","import { Application, Controller } from 'stimulus';\nimport { definitionsFromContext } from 'stimulus/webpack-helpers';\nimport platform from \"./platform\";\n\nglobal.$ = global.jQuery = require('jquery');\n\nrequire('popper.js');\nrequire('bootstrap');\nrequire('select2');\n\nwindow.platform = platform();\nwindow.application = Application.start();\nwindow.Controller = Controller;\n\nconst context = require.context('./controllers', true, /\\.js$/);\napplication.load(definitionsFromContext(context));\n","var map = {\n\t\"./fields/code_controller.js\": \"./resources/js/controllers/fields/code_controller.js\",\n\t\"./fields/cropper_controller.js\": \"./resources/js/controllers/fields/cropper_controller.js\",\n\t\"./fields/datetime_controller.js\": \"./resources/js/controllers/fields/datetime_controller.js\",\n\t\"./fields/input_controller.js\": \"./resources/js/controllers/fields/input_controller.js\",\n\t\"./fields/map_controller.js\": \"./resources/js/controllers/fields/map_controller.js\",\n\t\"./fields/matrix_controller.js\": \"./resources/js/controllers/fields/matrix_controller.js\",\n\t\"./fields/password_controller.js\": \"./resources/js/controllers/fields/password_controller.js\",\n\t\"./fields/picture_controller.js\": \"./resources/js/controllers/fields/picture_controller.js\",\n\t\"./fields/popover_controller.js\": \"./resources/js/controllers/fields/popover_controller.js\",\n\t\"./fields/quill_controller.js\": \"./resources/js/controllers/fields/quill_controller.js\",\n\t\"./fields/radiobutton_controller.js\": \"./resources/js/controllers/fields/radiobutton_controller.js\",\n\t\"./fields/relation_controller.js\": \"./resources/js/controllers/fields/relation_controller.js\",\n\t\"./fields/select_controller.js\": \"./resources/js/controllers/fields/select_controller.js\",\n\t\"./fields/simplemde_controller.js\": \"./resources/js/controllers/fields/simplemde_controller.js\",\n\t\"./fields/tinymce_controller.js\": \"./resources/js/controllers/fields/tinymce_controller.js\",\n\t\"./fields/upload_controller.js\": \"./resources/js/controllers/fields/upload_controller.js\",\n\t\"./fields/utm_controller.js\": \"./resources/js/controllers/fields/utm_controller.js\",\n\t\"./layouts/form_controller.js\": \"./resources/js/controllers/layouts/form_controller.js\",\n\t\"./layouts/html_load_controller.js\": \"./resources/js/controllers/layouts/html_load_controller.js\",\n\t\"./layouts/listener_controller.js\": \"./resources/js/controllers/layouts/listener_controller.js\",\n\t\"./layouts/notification_controller.js\": \"./resources/js/controllers/layouts/notification_controller.js\",\n\t\"./layouts/reload_controller.js\": \"./resources/js/controllers/layouts/reload_controller.js\",\n\t\"./layouts/search_controller.js\": \"./resources/js/controllers/layouts/search_controller.js\",\n\t\"./layouts/systems_controller.js\": \"./resources/js/controllers/layouts/systems_controller.js\",\n\t\"./layouts/table_controller.js\": \"./resources/js/controllers/layouts/table_controller.js\",\n\t\"./layouts/toast_controller.js\": \"./resources/js/controllers/layouts/toast_controller.js\",\n\t\"./layouts/tooltip_controller.js\": \"./resources/js/controllers/layouts/tooltip_controller.js\",\n\t\"./screen/base_controller.js\": \"./resources/js/controllers/screen/base_controller.js\",\n\t\"./screen/chart_controller.js\": \"./resources/js/controllers/screen/chart_controller.js\",\n\t\"./screen/filter_controller.js\": \"./resources/js/controllers/screen/filter_controller.js\",\n\t\"./screen/modal_controller.js\": \"./resources/js/controllers/screen/modal_controller.js\",\n\t\"./screen/tabs_controller.js\": \"./resources/js/controllers/screen/tabs_controller.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./resources/js/controllers sync recursive \\\\.js$\";","import { Controller } from 'stimulus';\nimport CodeFlask from 'codeflask';\n\nexport default class extends Controller {\n    /**\n     *\n     */\n    connect() {\n        const input = this.element.querySelector('input');\n\n        const flask = new CodeFlask(this.element.querySelector('.code'), {\n            language: this.data.get('language'),\n            lineNumbers: this.data.get('lineNumbers'),\n            defaultTheme: this.data.get('defaultTheme'),\n            readonly: input.readOnly,\n        });\n\n        flask.updateCode(input.value);\n\n        flask.onUpdate((code) => {\n            input.value = code;\n        });\n    }\n}\n","import {Controller} from \"stimulus\";\nimport Cropper from 'cropperjs';\n\nexport default class extends Controller {\n\n    /**\n     * @type {string[]}\n     */\n\n    static targets = [\n        \"source\",\n        \"upload\"\n    ];\n\n    /**\n     *\n     */\n    connect() {\n        let image = this.data.get('url') ? this.data.get('url') : this.data.get(`value`);\n\n        if (image) {\n            this.element.querySelector('.cropper-preview').src = image;\n        } else {\n            this.element.querySelector('.cropper-preview').classList.add('none');\n            this.element.querySelector('.cropper-remove').classList.add('none');\n        }\n\n        let cropPanel = this.element.querySelector('.upload-panel');\n\n        cropPanel.width = this.data.get('width');\n        cropPanel.height = this.data.get('height');\n\n        this.cropper = new Cropper(cropPanel, {\n            viewMode: 2,\n            aspectRatio: this.data.get('width') / this.data.get('height'),\n            minContainerHeight: 500,\n        });\n    }\n\n    /**\n     * Event for uploading image\n     *\n     * @param event\n     */\n    upload(event) {\n\n        let maxFileSize = this.data.get('max-file-size');\n        if (event.target.files[0].size / 1024 / 1024 > maxFileSize) {\n            window.platform.alert('Validation error', `The download file is too large. Max size: ${maxFileSize} MB`);\n            event.target.value = null;\n            return;\n        }\n\n        if (!event.target.files[0]) {\n            $(this.element.querySelector('.modal')).modal('show');\n            return;\n        }\n\n        let reader = new FileReader();\n        reader.readAsDataURL(event.target.files[0]);\n\n        reader.onloadend = () => {\n            this.cropper.replace(reader.result)\n        };\n\n        $(this.element.querySelector('.modal')).modal('show');\n    }\n\n    /**\n     *\n     */\n    openModal(event)\n    {\n        if (!event.target.files[0]) {\n            return;\n        }\n\n        $(this.element.querySelector('.modal')).modal('show');\n    }\n\n    /**\n     * Action on click button \"Crop\"\n     */\n    crop() {\n\n        this.cropper.getCroppedCanvas({\n            width: this.data.get('width'),\n            height: this.data.get('height'),\n            imageSmoothingQuality: 'medium',\n        }).toBlob((blob) => {\n            const formData = new FormData();\n\n            formData.append('file', blob);\n            formData.append('storage', this.data.get('storage'));\n\n            let element = this.element;\n            axios.post(platform.prefix('/systems/files'), formData)\n                .then((response) => {\n                    let image = response.data.url;\n                    let targetValue = this.data.get('target');\n\n                    element.querySelector('.cropper-preview').src = image;\n                    element.querySelector('.cropper-preview').classList.remove('none');\n                    element.querySelector('.cropper-remove').classList.remove('none');\n                    element.querySelector('.cropper-path').value = response.data[targetValue];\n                    $(element.querySelector('.modal')).modal('hide');\n                })\n                .catch((error) => {\n                    window.platform.alert('Validation error', 'File upload error');\n                    console.warn(error);\n                });\n        });\n\n    }\n\n    /**\n     *\n     */\n    clear() {\n        this.element.querySelector('.cropper-path').value = '';\n        this.element.querySelector('.cropper-preview').src = '';\n        this.element.querySelector('.cropper-preview').classList.add('none');\n        this.element.querySelector('.cropper-remove').classList.add('none');\n    }\n\n    /**\n     * Action on click buttons\n     */\n    moveleft() {\n        this.cropper.move(-10, 0);\n    }\n\n    moveright() {\n        this.cropper.move(10, 0);\n    }\n\n    moveup() {\n        this.cropper.move(0, -10);\n    }\n\n    movedown() {\n        this.cropper.move(0, 10);\n    }\n\n    zoomin() {\n        this.cropper.zoom(0.1);\n    }\n\n    zoomout() {\n        this.cropper.zoom(-0.1);\n    }\n\n    rotateleft() {\n        this.cropper.rotate(-5);\n    }\n\n    rotateright() {\n        this.cropper.rotate(5);\n    }\n\n    scalex() {\n        const dataScaleX = this.element.querySelector('.cropper-dataScaleX');\n        this.cropper.scaleX(-dataScaleX.value);\n    }\n\n    scaley() {\n        const dataScaleY = this.element.querySelector('.cropper-dataScaleY');\n        this.cropper.scaleY(-dataScaleY.value)\n    }\n\n    aspectratiowh() {\n        this.cropper.setAspectRatio(this.data.get('width') / this.data.get('height'));\n    }\n\n    aspectratiofree() {\n        this.cropper.setAspectRatio(NaN);\n    }\n\n}\n","import Flatpickr from 'stimulus-flatpickr';\nimport rangePlugin from 'flatpickr/dist/plugins/rangePlugin';\nimport 'flatpickr/dist/l10n';\n\nexport default class extends Flatpickr {\n    /**\n     *\n     */\n    initialize() {\n        const plugins = [];\n        if (this.data.get('range')) {\n            plugins.push(new rangePlugin({ input: this.data.get('range') }));\n        }\n\n        this.config = {\n            locale: document.documentElement.lang,\n            plugins,\n        };\n    }\n\n    /**\n     * Clear input time\n     */\n    clear() {\n        this.fp.clear();\n    }\n}\n","import {Controller} from 'stimulus';\nimport Inputmask from 'inputmask';\n\nexport default class extends Controller {\n\n    /**\n     *\n     * @returns {string|object}\n     */\n    get mask() {\n        let mask = this.data.get('mask');\n\n        try {\n            mask = JSON.parse(mask);\n            mask.autoUnmask = mask.autoUnmask || mask.removeMaskOnSubmit || undefined;\n\n            return mask;\n        } catch (e) {\n            // as string\n            return mask;\n        }\n    }\n\n    /**\n     *\n     */\n    connect() {\n        const element = this.element.querySelector('input');\n        let mask = this.mask;\n\n        // mask\n        if (mask.length < 1) {\n            return;\n        }\n\n        if (mask.removeMaskOnSubmit) {\n            let form = element.form || this.element.closest('form')\n\n            form.addEventListener('orchid:screen-submit', () => {\n                element.inputmask.remove();\n            });\n            mask.removeMaskOnSubmit = undefined;\n        }\n\n        Inputmask(mask).mask(element);\n    }\n}\n","import {Controller} from \"stimulus\";\nimport L            from 'leaflet';\n\nexport default class extends Controller {\n\n    /**\n     *\n     * @type {string[]}\n     */\n    static targets = [\n        \"search\",\n        \"lat\",\n        \"lng\"\n    ];\n\n    /**\n     *\n     */\n    connect() {\n        const default_lat = this.latTarget.value;\n        const default_lng = this.lngTarget.value;\n        const default_zoom = this.data.get('zoom');\n        const max_zoom = '18';\n\n        let base64icon = 'data:image/png;base64,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';\n        let base64shadow = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAYAAACoYAD2AAAC5ElEQVRYw+2YW4/TMBCF45S0S1luXZCABy5CgLQgwf//S4BYBLTdJLax0fFqmB07nnQfEGqkIydpVH85M+NLjPe++dcPc4Q8Qh4hj5D/AaQJx6H/4TMwB0PeBNwU7EGQAmAtsNfAzoZkgIa0ZgLMa4Aj6CxIAsjhjOCoL5z7Glg1JAOkaicgvQBXuncwJAWjksLtBTWZe04CnYRktUGdilALppZBOgHGZcBzL6OClABvMSVIzyBjazOgrvACf1ydC5mguqAVg6RhdkSWQFj2uxfaq/BrIZOLEWgZdALIDvcMcZLD8ZbLC9de4yR1sYMi4G20S4Q/PWeJYxTOZn5zJXANZHIxAd4JWhPIloTJZhzMQduM89WQ3MUVAE/RnhAXpTycqys3NZALOBbB7kFrgLesQl2h45Fcj8L1tTSohUwuxhy8H/Qg6K7gIs+3kkaigQCOcyEXCHN07wyQazhrmIulvKMQAwMcmLNqyCVyMAI+BuxSMeTk3OPikLY2J1uE+VHQk6ANrhds+tNARqBeaGc72cK550FP4WhXmFmcMGhTwAR1ifOe3EvPqIegFmF+C8gVy0OfAaWQPMR7gF1OQKqGoBjq90HPMP01BUjPOqGFksC4emE48tWQAH0YmvOgF3DST6xieJgHAWxPAHMuNhrImIdvoNOKNWIOcE+UXE0pYAnkX6uhWsgVXDxHdTfCmrEEmMB2zMFimLVOtiiajxiGWrbU52EeCdyOwPEQD8LqyPH9Ti2kgYMf4OhSKB7qYILbBv3CuVTJ11Y80oaseiMWOONc/Y7kJYe0xL2f0BaiFTxknHO5HaMGMublKwxFGzYdWsBF174H/QDknhTHmHHN39iWFnkZx8lPyM8WHfYELmlLKtgWNmFNzQcC1b47gJ4hL19i7o65dhH0Negbca8vONZoP7doIeOC9zXm8RjuL0Gf4d4OYaU5ljo3GYiqzrWQHfJxA6ALhDpVKv9qYeZA8eM3EhfPSCmpuD0AAAAASUVORK5CYII=';\n        let markerIcon = L.icon({\n            iconUrl: base64icon,\n            iconAnchor: [12, 41],\n            iconSize: [25, 41],\n            popupAnchor: [1, -34],\n            shadowSize: [41, 41],\n            shadowUrl: base64shadow\n        });\n\n        this.leafletMap = L.map(this.data.get('id'), {\n            center: [default_lat, default_lng],\n            zoom: default_zoom\n        });\n\n        this.leafLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n            attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>',\n            maxZoom: max_zoom\n        }).addTo(this.leafletMap);\n\n        this.leafletMarker = L.marker([default_lat, default_lng], {\n            icon: markerIcon,\n            draggable: true,\n            autoPan:true,\n            autoPanPadding:L.point(100, 100)\n        }).addTo(this.leafletMap);\n\n        this.leafletMarker.on('dragend', () => {\n            this.updateCoords();\n        });\n\n        this.leafletMap.on('click', (e) => {\n            this.leafletMarker.setLatLng(e.latlng);\n            this.updateCoords();\n            this.leafletMap.panTo(e.latlng);\n        });\n\n        /**\n         * @see https://stackoverflow.com/questions/36246815/data-toggle-tab-does-not-download-leaflet-map/36257493#36257493\n         */\n        $(document).on('shown.bs.tab', 'a[data-toggle=\"tab\"]', () => {\n            this.leafletMap.invalidateSize();\n        });\n    }\n\n    /**\n     *\n     */\n    updateCoords() {\n        this.latTarget.value = this.leafletMarker.getLatLng().lat;\n        this.lngTarget.value  = this.leafletMarker.getLatLng().lng;\n    }\n\n    /**\n     *\n     */\n    search() {\n\n        const results = this.element.querySelector('.marker-results');\n\n        if (this.searchTarget.value.length <= 3) {\n            return;\n        }\n\n        axios\n            .get('https://nominatim.openstreetmap.org/search?format=json&limit=5&q=' + this.searchTarget.value)\n            .then(response => {\n\n                let items = [];\n\n                $.each(response.data, (key, val) => {\n                    let bb = val.boundingbox;\n                    let lat = val.lat;\n                    let lng = val.lon;\n                    let name = val.display_name;\n                    items.push(\"<li style='cursor:pointer' data-name='\" + name + \"' data-lat='\" + lat + \"' data-lng='\" + lng + \"' data-lat1='\" + bb[0] + \"' data-lat2='\" + bb[1] + \"' data-lng1='\" + bb[2] + \"' data-lng2='\" + bb[3] + \"' data-type='\" + val.osm_type + \"' data-action='click->fields--map#chooseAddr'>\" + val.display_name + \"</li>\");\n                });\n\n                results.innerHTML = null;\n\n                if (items.length !== 0) {\n                    $('<ul/>', {\n                        'class': 'padder-v',\n                        html: items.join('')\n                    }).appendTo(results);\n                    return;\n                }\n\n                $('<small>', {html: \"No results found\"}).appendTo(results);\n            });\n\n    }\n\n    /**\n     *\n     * @param e\n     */\n    chooseAddr(e) {\n\n        const name = e.target.getAttribute(\"data-name\");\n        const lat = e.target.getAttribute(\"data-lat\"); //for centering marker\n        const lng = e.target.getAttribute(\"data-lng\"); //for centering marker\n        const lat1 = e.target.getAttribute(\"data-lat1\");\n        const lat2 = e.target.getAttribute(\"data-lat2\");\n        const lng1 = e.target.getAttribute(\"data-lng1\");\n        const lng2 = e.target.getAttribute(\"data-lng2\");\n        const loc1 = new L.LatLng(lat1, lng1);\n        const loc2 = new L.LatLng(lat2, lng2);\n        const bounds = new L.LatLngBounds(loc1, loc2);\n\n        this.leafletMap.fitBounds(bounds);\n        this.leafletMarker.setLatLng([lat, lng]);\n        this.updateCoords();\n        this.searchTarget.value = name;\n    }\n\n}\n","import {Controller} from 'stimulus';\n\nexport default class extends Controller {\n\n    /**\n     *\n     * @type {string[]}\n     */\n    static targets = [\n        'index'\n    ];\n\n    /**\n     *\n     */\n    connect() {\n        this.template = this.element.querySelector('template');\n        this.keyValueMode = this.data.get('key-value') === 'true';\n\n        this.detectMaxRows();\n    }\n\n    /**\n     *\n     */\n    deleteRow(event) {\n        event.path.forEach((element) => {\n            if(element.tagName !== 'TR'){\n                return;\n            }\n\n            element.parentNode.removeChild(element);\n        });\n\n        this.detectMaxRows();\n        event.preventDefault();\n        return false;\n    }\n\n    /**\n     *\n     */\n    addRow() {\n        this.index++;\n\n        let row = this.template.content.querySelector('tr').cloneNode(true);\n        row.innerHTML = row.innerHTML\n            .replace(/{index}/gi, this.index);\n\n\n        let creatingRows = this.element.querySelector('.add-row');\n\n        this.element.querySelector('tbody').insertBefore(row, creatingRows);\n\n        this.detectMaxRows();\n        event.preventDefault();\n        return false;\n    }\n\n    /**\n     *\n     * @returns {number}\n     */\n    get index() {\n        return parseInt(this.data.get('index'));\n    }\n\n    /**\n     *\n     * @param value\n     */\n    set index(value) {\n        this.data.set('index', value);\n    }\n\n    /**\n     * Shows or hides the addition\n     * of a new line based on line counting\n     */\n    detectMaxRows() {\n        const max = parseInt(this.data.get('rows'));\n        if(max === 0){\n            return;\n        }\n\n        let current = this.element.querySelectorAll('tbody tr:not(.add-row)').length;\n        let addRow = this.element.querySelector('.add-row th');\n        addRow.style.display = max <= current ? 'none' : '';\n    }\n}\n","import {Controller} from 'stimulus';\n\nexport default class extends Controller {\n\n    /**\n     *\n     * @type {string[]}\n     */\n    static targets = [\n        'password',\n        'icon'\n    ];\n\n    /**\n     *\n     */\n    change() {\n        const currentType = this.passwordTarget.type;\n        let type = 'password';\n        let icon = 'icon-eye';\n\n        if (currentType === 'password') {\n            type = 'text';\n            icon = 'icon-lock';\n        }\n\n        this.passwordTarget.setAttribute('type', type);\n        this.iconTarget.setAttribute('class', icon);\n    }\n}\n","import {Controller} from \"stimulus\";\n\nexport default class extends Controller {\n\n    /**\n     * @type {string[]}\n     */\n\n    static targets = [\n        \"source\",\n        \"upload\"\n    ];\n\n    /**\n     *\n     */\n    connect() {\n        let image = this.data.get('url') ? this.data.get('url') : this.data.get(`value`);\n\n        if (image) {\n            this.element.querySelector('.picture-preview').src = image;\n            return;\n        }\n\n        this.element.querySelector('.picture-preview').classList.add('none');\n        this.element.querySelector('.picture-remove').classList.add('none');\n    }\n\n    /**\n     * Event for uploading image\n     *\n     * @param event\n     */\n    upload(event) {\n        if (!event.target.files[0]) {\n            return;\n        }\n\n        let maxFileSize = this.data.get('max-file-size');\n        if (event.target.files[0].size / 1024 / 1024 > maxFileSize) {\n            window.platform.alert('Validation error', `The download file is too large. Max size: ${maxFileSize} MB`);\n            event.target.value = null;\n            return;\n        }\n\n        let reader = new FileReader();\n        reader.readAsDataURL(event.target.files[0]);\n\n        reader.onloadend = () => {\n            const formData = new FormData();\n\n            formData.append('file', event.target.files[0]);\n            formData.append('storage', this.data.get('storage'));\n\n            let element = this.element;\n            axios.post(platform.prefix('/systems/files'), formData)\n                .then((response) => {\n                    let image = response.data.url;\n                    let targetValue = this.data.get('target');\n\n                    element.querySelector('.picture-preview').src = image;\n                    element.querySelector('.picture-preview').classList.remove('none');\n                    element.querySelector('.picture-remove').classList.remove('none');\n                    element.querySelector('.picture-path').value = response.data[targetValue];\n                    $(element.querySelector('.modal')).modal('hide');\n                })\n                .catch((error) => {\n                    window.platform.alert('Validation error', 'File upload error');\n                    console.warn(error);\n                });\n        };\n\n    }\n\n    /**\n     *\n     */\n    clear() {\n        this.element.querySelector('.picture-path').value = '';\n        this.element.querySelector('.picture-preview').src = '';\n        this.element.querySelector('.picture-preview').classList.add('none');\n        this.element.querySelector('.picture-remove').classList.add('none');\n    }\n}\n","import { Controller } from 'stimulus';\n\nexport default class extends Controller {\n    /**\n     *\n     */\n    connect() {\n        $(this.element.querySelectorAll('a')).popover();\n    }\n\n    /**\n     *\n     * @param event\n     */\n    trigger(event) {\n        event.preventDefault();\n        $(this.element).popover('toggle');\n    }\n}\n","import {Controller} from 'stimulus';\nimport Quill        from 'quill';\n\nexport default class extends Controller {\n    /**\n     *\n     */\n    connect() {\n        const selector = this.element.querySelector('.quill').id;\n        const input = this.element.querySelector('input');\n\n        this.editor = new Quill(`#${selector}`, {\n            placeholder: input.placeholder,\n            readOnly: input.readOnly,\n            theme: 'snow',\n            modules: {\n                toolbar: [\n                    ['bold', 'italic', 'underline', 'strike'],\n                    [{ header: '1' }, { header: '2' }, 'blockquote', 'code-block'],\n                    [{ list: 'ordered' }, { list: 'bullet' }, { indent: '-1' }, { indent: '+1' }, { align: [] }],\n                    ['link', 'image', 'video', 'clean'],\n                ],\n            },\n        });\n\n        // quill editor add image handler\n        this.editor.getModule('toolbar').addHandler('image', () => {\n            this.selectLocalImage();\n        });\n\n        // set value\n        // editor.setText(input.value);\n        this.editor.root.innerHTML = input.value;\n\n        // save value\n        this.editor.on('text-change', () => {\n            input.value = this.editor.getText() ? this.editor.root.innerHTML : '';\n        });\n    }\n\n    /**\n     * Step1. select local image\n     *\n     */\n    selectLocalImage() {\n        const input = document.createElement('input');\n        input.setAttribute('type', 'file');\n        input.click();\n\n        // Listen upload local image and save to server\n        input.onchange = () => {\n            const file = input.files[0];\n\n            // file type is only image.\n            if (/^image\\//.test(file.type)) {\n                this.saveToServer(file);\n            } else {\n                window.platform.alert('Validation error', 'You could only upload images.', 'danger');\n                console.warn('You could only upload images.');\n            }\n        };\n    }\n\n    /**\n     * Step2. save to server\n     *\n     * @param {File} file\n     */\n    saveToServer(file) {\n        const formData = new FormData();\n        formData.append('image', file);\n\n        axios\n            .post(platform.prefix('/systems/files'), formData)\n            .then((response) => {\n                this.insertToEditor(response.data.url);\n            })\n            .catch((error) => {\n                window.platform.alert('Validation error', 'Quill image upload failed');\n                console.warn('quill image upload failed');\n                console.warn(error);\n            });\n    }\n\n    /**\n     * Step3. insert image url to rich editor.\n     *\n     * @param {string} url\n     */\n    insertToEditor(url) {\n        // push image url to rich editor.\n        const range = this.editor.getSelection();\n        this.editor.insertEmbed(range.index, 'image', url);\n    }\n}\n","import { Controller } from 'stimulus';\n\nexport default class extends Controller {\n    /**\n     *\n     */\n    checked(event) {\n        event.target.offsetParent.querySelectorAll('input').forEach((input) => {\n            input.removeAttribute('checked');\n        });\n\n        event.target.setAttribute('checked', 'checked');\n    }\n}\n","import { Controller } from 'stimulus';\n\nexport default class extends Controller {\n    static get targets() {\n        return ['select'];\n    }\n\n    connect() {\n        if (document.documentElement.hasAttribute('data-turbolinks-preview')) {\n            return;\n        }\n\n        const select = this.selectTarget;\n        const model = this.data.get('model');\n        const name = this.data.get('name');\n        const key = this.data.get('key');\n        const scope = this.data.get('scope');\n        const append = this.data.get('append');\n\n\n        $.ajaxSetup({\n            headers: {\n                'X-CSRF-TOKEN': $('meta[name=\"csrf_token\"]').attr('content'),\n            },\n        });\n\n        $(select).select2({\n            theme: 'bootstrap',\n            allowClear: !select.hasAttribute('required'),\n            ajax: {\n                type: 'POST',\n                cache: true,\n                delay: 250,\n                url: () => this.data.get('route'),\n                dataType: 'json',\n                processResults: (data) => {\n                    let selectValues = $(select).val();\n                    selectValues = Array.isArray(selectValues) ? selectValues : [selectValues];\n\n                    return {\n                        results: Object.keys(data).reduce((res, id) => {\n                            if (selectValues.includes(id.toString())) {\n                                return res;\n                            }\n\n                            return [...res, {\n                                id,\n                                text: data[id],\n                            }];\n                        }, []),\n                    };\n                },\n                data: params => ({\n                    search: params.term,\n                    model,\n                    name,\n                    key,\n                    scope,\n                    append,\n                }),\n            },\n            placeholder: select.getAttribute('placeholder') || '',\n        });\n\n\n        // force change event for https://github.com/select2/select2/issues/1908\n        let forceChange = () => {\n            setTimeout(()=>{\n                select.dispatchEvent(new Event('change'));\n            },100);\n        }\n        $(select).on('select2:select', forceChange);\n        $(select).on('select2:unselect', forceChange);\n        $(select).on('select2:clear', forceChange);\n\n        if (!this.data.get('value')) {\n            return;\n        }\n\n        const values = JSON.parse(this.data.get('value'));\n\n        values.forEach((value) => {\n            $(select)\n                .append(new Option(value.text, value.id, true, true))\n                .trigger('change');\n        });\n\n        document.addEventListener('turbolinks:before-cache', () => {\n            if (typeof $(select) === 'undefined') {\n                $(select).select2('destroy');\n            }\n        }, { once: true });\n    }\n}\n","import {Controller} from 'stimulus';\n\nexport default class extends Controller {\n    /**\n     *\n     */\n    connect() {\n        if (document.documentElement.hasAttribute('data-turbolinks-preview')) {\n            return;\n        }\n        const select = this.element.querySelector('select');\n\n        $(select).select2({\n            width: '100%',\n            allowClear: !select.hasAttribute('required'),\n            placeholder: select.getAttribute('placeholder') || '',\n            theme: 'bootstrap',\n        });\n\n\n\n        // force change event for https://github.com/select2/select2/issues/1908\n        let forceChange = () => {\n            setTimeout(()=>{\n                select.dispatchEvent(new Event('change'));\n            },100);\n        }\n        $(select).on('select2:select', forceChange);\n        $(select).on('select2:unselect', forceChange);\n        $(select).on('select2:clear', forceChange);\n\n\n\n        document.addEventListener('turbolinks:before-cache', () => {\n            if (typeof $(select) === 'undefined') {\n                $(select).select2('destroy');\n            }\n        }, {once: true});\n    }\n}\n","import {Controller} from 'stimulus';\nimport SimpleMDE from 'simplemde';\n\nexport default class extends Controller {\n    /**\n     *\n     * @returns {Element}\n     */\n    get textarea() {\n        return this.element.querySelector('textarea');\n    }\n\n    /**\n     *\n     */\n    get uploadInput() {\n        return this.element.querySelector('.upload');\n    }\n\n    /**\n     *\n     */\n    connect() {\n        this.editor = new SimpleMDE({\n            autoDownloadFontAwesome: false,\n            forceSync: true,\n            element: this.textarea,\n            toolbar: [\n                {\n                    name: 'bold',\n                    action: SimpleMDE.toggleBold,\n                    className: 'icon-bold',\n                    title: 'Bold',\n                },\n                {\n                    name: 'italic',\n                    action: SimpleMDE.toggleItalic,\n                    className: 'icon-italic',\n                    title: 'Italic',\n                },\n                {\n                    name: 'heading',\n                    action: SimpleMDE.toggleHeadingSmaller,\n                    className: 'icon-font',\n                    title: 'Heading',\n                },\n                '|',\n                {\n                    name: 'quote',\n                    action: SimpleMDE.toggleBlockquote,\n                    className: 'icon-quote',\n                    title: 'Quote',\n                }, {\n                    name: 'code',\n                    action: SimpleMDE.toggleCodeBlock,\n                    className: 'icon-code',\n                    title: 'Code',\n                }, {\n                    name: 'unordered-list',\n                    action: SimpleMDE.toggleUnorderedList,\n                    className: 'icon-list',\n                    title: 'Generic List',\n                }, {\n                    name: 'ordered-list',\n                    action: SimpleMDE.toggleOrderedList,\n                    className: 'icon-number-list',\n                    title: 'Numbered List',\n                },\n                '|',\n                {\n                    name: 'link',\n                    action: SimpleMDE.drawLink,\n                    className: 'icon-link',\n                    title: 'Link',\n                },\n                {\n                    name: 'image',\n                    action: SimpleMDE.drawImage,\n                    className: 'icon-picture',\n                    title: 'Insert Image',\n                }, {\n                    name: 'upload',\n                    action: () => this.showDialogUpload(),\n                    className: 'icon-cloud-upload',\n                    title: 'Upload File',\n                },\n                {\n                    name: 'table',\n                    action: SimpleMDE.drawTable,\n                    className: 'icon-table',\n                    title: 'Insert Table',\n                },\n                '|',\n                {\n                    name: 'preview',\n                    action: SimpleMDE.togglePreview,\n                    className: 'icon-eye no-disable',\n                    title: 'Toggle Preview',\n                }, {\n                    name: 'side-by-side',\n                    action: SimpleMDE.toggleSideBySide,\n                    className: 'icon-browser no-disable no-mobile',\n                    title: 'Toggle Side by Side',\n                }, {\n                    name: 'fullscreen',\n                    action: SimpleMDE.toggleFullScreen,\n                    className: 'icon-full-screen no-disable no-mobile',\n                    title: 'Toggle Fullscreen',\n                },\n                '|',\n                {\n                    name: 'horizontal-rule',\n                    action: SimpleMDE.drawHorizontalRule,\n                    className: 'icon-options',\n                    title: 'Insert Horizontal Line',\n                }, {\n                    name: 'guide',\n                    action: () => this.showModal(),\n                    className: 'icon-help',\n                    title: 'Markdown Guide',\n                },\n            ],\n            placeholder: this.textarea.placeholder,\n            spellChecker: false,\n        });\n\n        // Required attribute https://github.com/sparksuite/simplemde-markdown-editor/issues/324\n        if (this.textarea.required) {\n            this.element.querySelector('.CodeMirror textarea').required = true;\n        }\n    }\n\n    /**\n     *\n     * @returns {Element}\n     */\n    showModal() {\n        $(this.element.querySelector('.modal')).modal('show');\n    }\n\n    /**\n     *\n     */\n    showDialogUpload() {\n        this.uploadInput.click();\n    }\n\n    /**\n     *\n     * @param event\n     */\n    upload(event) {\n        const file = event.target.files[0];\n\n        if (file === undefined || file === null) {\n            return;\n        }\n\n        const formData = new FormData();\n        formData.append('file', file);\n\n        axios\n            .post(platform.prefix('/systems/files'), formData)\n            .then((response) => {\n                this.editor.codemirror.replaceSelection(response.data.url);\n                event.target.value = null;\n            })\n            .catch((error) => {\n                console.warn(error);\n                event.target.value = null;\n            });\n    }\n}\n","import {Controller} from 'stimulus';\n// Core\nimport tinymce from 'tinymce/tinymce';\n\n// A theme is also required\n// import 'tinymce/themes/modern';\n// import 'tinymce/themes/inlite'\n\n// Plugins\n\n/*\nimport 'tinymce/plugins/advlist'\nimport 'tinymce/plugins/anchor'\nimport 'tinymce/plugins/autolink'\nimport 'tinymce/plugins/autoresize'\nimport 'tinymce/plugins/autosave'\nimport 'tinymce/plugins/bbcode'\nimport 'tinymce/plugins/charmap'\nimport 'tinymce/plugins/code'\nimport 'tinymce/plugins/codesample'\nimport 'tinymce/plugins/colorpicker'\nimport 'tinymce/plugins/contextmenu'\nimport 'tinymce/plugins/directionality'\nimport 'tinymce/plugins/emoticons'\nimport 'tinymce/plugins/fullpage'\nimport 'tinymce/plugins/fullscreen'\nimport 'tinymce/plugins/help'\nimport 'tinymce/plugins/hr'\nimport 'tinymce/plugins/image'\nimport 'tinymce/plugins/imagetools'\nimport 'tinymce/plugins/importcss'\nimport 'tinymce/plugins/insertdatetime'\nimport 'tinymce/plugins/legacyoutput'\nimport 'tinymce/plugins/link'\nimport 'tinymce/plugins/lists'\nimport 'tinymce/plugins/media'\nimport 'tinymce/plugins/nonbreaking'\nimport 'tinymce/plugins/noneditable'\nimport 'tinymce/plugins/pagebreak'\nimport 'tinymce/plugins/paste'\nimport 'tinymce/plugins/preview'\nimport 'tinymce/plugins/print'\nimport 'tinymce/plugins/save'\nimport 'tinymce/plugins/searchreplace'\nimport 'tinymce/plugins/spellchecker'\nimport 'tinymce/plugins/tabfocus'\nimport 'tinymce/plugins/table'\nimport 'tinymce/plugins/template'\nimport 'tinymce/plugins/textcolor'\nimport 'tinymce/plugins/textpattern'\nimport 'tinymce/plugins/toc'\nimport 'tinymce/plugins/visualblocks'\nimport 'tinymce/plugins/visualchars'\nimport 'tinymce/plugins/wordcount'\n*/\n\nexport default class extends Controller {\n    /**\n     *\n     */\n    connect() {\n        // require.context(\n        //    'file-loader?name=[path][name].[ext]&context=node_modules/tinymce!tinymce/skins',\n        //    true,\n        //    /.*/\n        // );\n\n        tinymce.baseURL = platform.prefix('/resources/orchid/js/tinymce');\n\n        const selector = this.element.querySelector('.tinymce').id;\n        const input = this.element.querySelector('input');\n\n        let plugins = 'image media table link paste contextmenu textpattern autolink codesample';\n        let toolbar1 = '';\n        let inline = true;\n\n        if (this.element.dataset.theme === 'modern') {\n            plugins = 'print autosave autoresize preview paste code searchreplace autolink directionality visualblocks visualchars fullscreen image link media template codesample table charmap hr pagebreak nonbreaking anchor toc insertdatetime advlist lists textcolor wordcount imagetools contextmenu colorpicker textpattern';\n            toolbar1 = 'formatselect | bold italic strikethrough forecolor backcolor | link | alignleft aligncenter alignright alignjustify | numlist bullist outdent indent | removeformat | ltr rtl';\n            inline = false;\n        }\n\n        // for remove cache\n        tinymce.remove(`#${selector}`);\n\n        tinymce.init({\n            branding: false,\n            selector: `#${selector}`,\n            theme: this.element.dataset.theme,\n            min_height: 300,\n            height: 300,\n            max_height: 600,\n            plugins,\n            toolbar1,\n            insert_toolbar: 'quickimage quicktable media codesample fullscreen',\n            selection_toolbar:\n                'bold italic | quicklink h2 h3 blockquote | alignleft aligncenter alignright alignjustify | outdent indent | removeformat ',\n            inline,\n            convert_urls: false,\n            image_caption: true,\n            image_title: true,\n            image_class_list: [\n                {\n                    title: 'None',\n                    value: '',\n                },\n                {\n                    title: 'Responsive',\n                    value: 'img-fluid',\n                },\n            ],\n            setup: (element) => {\n                element.on('change', () => {\n                    $(input).val(element.getContent());\n                });\n            },\n            images_upload_handler: this.upload,\n        });\n    }\n\n    /**\n     *\n     * @param blobInfo\n     * @param success\n     */\n    upload(blobInfo, success) {\n        const data = new FormData();\n        data.append('file', blobInfo.blob());\n\n        axios\n            .post(platform.prefix('/systems/files'), data)\n            .then((response) => {\n                success(response.data.url);\n            })\n            .catch((error) => {\n                window.platform.alert('Validation error', 'File upload error');\n                console.warn(error);\n            });\n    }\n\n    disconnect() {\n        tinymce.remove(`#${this.element.querySelector('.tinymce').id}`);\n    }\n}\n","import {Controller} from \"stimulus\";\nimport Dropzone from 'dropzone';\nimport Sortable from 'sortablejs';\n\nexport default class extends Controller {\n\n    /**\n     *\n     * @type {string[]}\n     */\n    static targets = [\n        'search',\n        'name',\n        'original',\n        'alt',\n        'description',\n        'url',\n    ];\n\n    /**\n     *\n     * @param props\n     */\n    constructor(props) {\n        super(props);\n        this.attachments = {};\n        this.mediaList = {};\n    }\n\n    /**\n     *\n     * @returns {string}\n     */\n    get dropname() {\n        return '#' + this.data.get('id');\n    }\n\n    /**\n     *\n     * @returns {string|{id: *}}\n     */\n    get activeAttachment() {\n        return {\n            id: this.activeAchivmentId,\n            name: this[this.getAttachmentTargetKey('name')].value || '',\n            alt: this[this.getAttachmentTargetKey('alt')].value || '',\n            description: this[this.getAttachmentTargetKey('description')].value || '',\n            original_name: this[this.getAttachmentTargetKey('original')].value || '',\n        };\n    }\n\n    /**\n     *\n     * @param data\n     */\n    set activeAttachment(data) {\n        this.activeAchivmentId = data.id;\n\n        this[this.getAttachmentTargetKey('name')].value = data.name || '';\n        this[this.getAttachmentTargetKey('original')].value = data.original_name || '';\n        this[this.getAttachmentTargetKey('alt')].value = data.alt || '';\n        this[this.getAttachmentTargetKey('description')].value = data.description || '';\n\n        this.data.set('url', data.url);\n    }\n\n    /**\n     *\n     * @param event\n     */\n    openLink(event) {\n        event.preventDefault();\n        window.open(this.data.get('url'));\n    }\n\n    /**\n     *\n     */\n    connect() {\n        this.initDropZone();\n        this.initSortable();\n    }\n\n    /**\n     *\n     */\n    save() {\n        const attach = this.activeAttachment;\n        $(`${this.dropname} .attachment.modal`).modal('toggle');\n\n        const name = attach.name + attach.id;\n\n        if (this.attachments.hasOwnProperty(name)) {\n            this.attachments[name].name = attach.name;\n            this.attachments[name].alt = attach.alt;\n            this.attachments[name].description = attach.description;\n            this.attachments[name].original_name = attach.original_name;\n        }\n\n        axios\n            .put(platform.prefix(`/systems/files/post/${attach.id}`), attach)\n            .then();\n    }\n\n    /**\n     *\n     * @param dataKey\n     * @returns {string}\n     */\n    getAttachmentTargetKey(dataKey) {\n        return `${dataKey}Target`;\n    }\n\n    /**\n     *\n     * @param data\n     */\n    loadInfo(data) {\n        const name = data.name + data.id;\n\n        if (!this.attachments.hasOwnProperty(name)) {\n            this.attachments[name] = data;\n        }\n        this.activeAttachment = data;\n    }\n\n    /**\n     *\n     */\n    resortElement() {\n        const items = {};\n        const self = this;\n        const dropname = this.dropname;\n        const CancelToken = axios.CancelToken;\n\n        if (typeof this.cancelRequest === 'function') {\n            this.cancelRequest();\n        }\n\n        $(`${dropname} .file-sort`).each((index, value) => {\n            const id = $(value).attr('data-file-id');\n            items[id] = index;\n        });\n\n        axios\n            .post(platform.prefix('/systems/files/sort'), {\n                files: items,\n            }, {\n                cancelToken: new CancelToken(function executor(c) {\n                    self.cancelRequest = c;\n                }),\n            })\n            .then();\n    }\n\n    /**\n     *\n     */\n    initSortable() {\n        new Sortable(document.querySelector(this.dropname + ' .sortable-dropzone'), {\n            animation: 150,\n            onEnd: () => {\n                this.resortElement();\n            },\n        });\n    }\n\n    /**\n     *\n     * @param dropname\n     * @param name\n     * @param file\n     */\n    addSortDataAtributes(dropname, name, file) {\n        $(`${dropname} .dz-complete:last-child`)\n            .attr('data-file-id', file.id)\n            .addClass('file-sort');\n        $(\n            `<input type='hidden' class='files-${file.id}' name='${name}[]' value='${file.id}'  />`\n        ).appendTo(dropname);\n    }\n\n    /**\n     *\n     */\n    initDropZone() {\n        const self = this;\n        const data = this.data.get('data') && JSON.parse(this.data.get('data'));\n        const storage = this.data.get('storage');\n        const name = this.data.get('name');\n        const loadInfo = this.loadInfo.bind(this);\n        const dropname = this.dropname;\n        const groups = this.data.get('groups');\n        const multiple = !!this.data.get('multiple');\n        const isMediaLibrary = this.data.get('is-media-library');\n\n        this.dropZone = new Dropzone(dropname, {\n            url: platform.prefix('/systems/files'),\n            method: 'post',\n            uploadMultiple: true,\n            maxFilesize: this.data.get('max-file-size'),\n            maxFiles: multiple ? this.data.get('max-files') : 1,\n            acceptedFiles: this.data.get('accepted-files'),\n            resizeQuality: this.data.get('resize-quality'),\n            resizeWidth: this.data.get('resize-width'),\n            resizeHeight: this.data.get('resize-height'),\n            paramName: 'files',\n\n            previewsContainer: `${dropname} .visual-dropzone`,\n            addRemoveLinks: false,\n            dictFileTooBig: 'File is big',\n            autoDiscover: false,\n\n            init: function () {\n                this.on('addedfile', (e) => {\n                    console.log('dropzone.addedfile');\n\n                    if (this.files.length > this.options.maxFiles) {\n                        window.platform.alert('Validation error', 'Max files');\n                        this.removeFile(e);\n                    }\n\n                    const removeButton = Dropzone.createElement('<a href=\"javascript:;\" class=\"btn-remove\">&times;</a>');\n                    const editButton = Dropzone.createElement('<a href=\"javascript:;\" class=\"btn-edit\"><i class=\"icon-note\" aria-hidden=\"true\"></i></a>');\n\n                    removeButton.addEventListener('click', (event) => {\n                        event.preventDefault();\n                        event.stopPropagation();\n                        this.removeFile(e);\n                    });\n\n                    editButton.addEventListener('click', () => {\n                        loadInfo(e.data);\n                        $(`${dropname} .attachment.modal`).modal('show');\n                    });\n\n                    e.previewElement.appendChild(removeButton);\n                    e.previewElement.appendChild(editButton);\n\n                    if (e.data !== undefined) {\n                        self.addSortDataAtributes(dropname, name, e.data);\n                    }\n                });\n\n                this.on(\"maxfilesexceeded\", (file) => {\n                    window.platform.alert('Validation error', 'Max files exceeded');\n                    this.removeFile(file);\n                });\n\n                this.on('sending', (file, xhr, formData) => {\n                    formData.append('_token', $('meta[name=\\'csrf_token\\']').attr('content'));\n                    formData.append('storage', storage);\n                    formData.append('group', groups);\n                });\n\n                this.on('removedfile', file => {\n\n                    if(file === null || !file.hasOwnProperty('data')){\n                        return;\n                    }\n\n                    $(`${dropname} .files-${file.data.id}`).remove();\n                    !isMediaLibrary && axios\n                        .delete(platform.prefix(`/systems/files/${file.data.id}`), {\n                            storage: storage,\n                        })\n                        .then();\n                });\n\n                if (!multiple) {\n                    this.hiddenFileInput.removeAttribute('multiple');\n                }\n\n                const images = data;\n\n                if (images) {\n                    Object.values(images).forEach((item) => {\n                        const file = {\n                            id: item.id,\n                            name: item.original_name,\n                            size: item.size,\n                            type: item.mime,\n                            status: Dropzone.ADDED,\n                            url: `${item.url}`,\n                            data: item,\n                        };\n\n                        this.emit('addedfile', file);\n                        this.emit('thumbnail', file, file.url);\n                        this.emit('complete', file);\n                        this.files.push(file);\n                        self.addSortDataAtributes(dropname, name, item);\n                    });\n                }\n\n                $(`${dropname} .dz-progress`).remove();\n            },\n            error(file, response) {\n                window.platform.alert('Validation error', 'File upload error');\n\n                if ($.type(response) === 'string') {\n                    return response;\n                }\n                return response.message;\n            },\n            success(file, response) {\n\n                if (!Array.isArray(response)) {\n                    response = [response];\n                }\n\n                response.forEach((item) => {\n                    if (file.name === item.original_name) {\n                        file.data = item;\n                        return false;\n                    }\n                });\n\n                self.addSortDataAtributes(dropname, name, file.data);\n                self.resortElement();\n            },\n        });\n    }\n\n    /**\n     *\n     */\n    openMedia() {\n        $(`${this.dropname} .media-loader`).show();\n        $(`${this.dropname} .media-results`).hide();\n\n        this.loadMedia();\n    }\n\n    /**\n     *\n     */\n    loadMedia() {\n        const self = this;\n        const CancelToken = axios.CancelToken;\n\n        if (typeof this.cancelRequest === 'function') {\n            this.cancelRequest();\n        }\n\n        axios\n            .post(platform.prefix('/systems/media'), {\n                filter: {\n                    disk: this.data.get('storage'),\n                    original_name: this.searchTarget.value,\n                },\n            }, {\n                cancelToken: new CancelToken(function executor(c) {\n                    self.cancelRequest = c;\n                }),\n            })\n            .then((response) => {\n                this.mediaList = response.data;\n                this.renderMedia();\n                $(`${this.dropname} .media.modal`).modal('show');\n            });\n    }\n\n    /**\n     *\n     */\n    renderMedia() {\n        let html = '';\n\n        /** todo: */\n        this.mediaList.forEach((element, key) => {\n            html += '<div class=\"col-4 col-sm-3 col-md-2 mb-4 media-item\">\\n' +\n                '    <div data-action=\"click->fields--upload#addFile\" data-key=\"' + key + '\">\\n' +\n                '        <img src=\"' + element.url + '\"\\n' +\n                '             class=\"rounded mw-100\"\\n' +\n                '             style=\"max-height: 100px;width: 100%;object-fit: cover;\">\\n' +\n                '        <p class=\"text-ellipsis small text-muted mt-1 mb-0\" title=\"' + element.original_name + '\">' + element.original_name + '</p>\\n' +\n                '    </div>\\n' +\n                '</div>';\n        });\n\n        $(`${this.dropname} .media-results`).html(html);\n        $(`${this.dropname} .media-loader`).hide();\n        $(`${this.dropname} .media-results`).show();\n    }\n\n    /**\n     *\n     */\n    addFile(event) {\n        const key = event.currentTarget.dataset.key;\n        const file = this.mediaList[key];\n\n        this.addedExistFile(file);\n\n        if (this.data.get('close-on-add')) {\n            $(`${this.dropname} .media.modal`).modal('hide');\n        }\n    }\n\n    /**\n     *\n     * @param attachment\n     */\n    addedExistFile(attachment) {\n        const multiple = !!this.data.get('multiple');\n        const maxFiles = multiple ? this.data.get('max-files') : 1;\n\n        if (this.dropZone.files.length >= maxFiles) {\n            alert('Max files exceeded');\n            return;\n        }\n\n        /** todo:   */\n        const file = {\n            id: attachment.id,\n            name: attachment.original_name,\n            size: attachment.size,\n            type: attachment.mime,\n            status: Dropzone.ADDED,\n            url: `${attachment.url}`,\n            data: attachment,\n        };\n\n        this.dropZone.emit('addedfile', file);\n        this.dropZone.emit('thumbnail', file, file.url);\n        this.dropZone.emit('complete', file);\n        this.dropZone.files.push(file);\n        this.resortElement();\n    }\n}\n","import {Controller} from \"stimulus\"\n\nexport default class extends Controller {\n\n    /**\n     *\n     * @type {string[]}\n     */\n    static targets = [\n        \"url\",\n        \"source\",\n        \"medium\",\n        \"campaign\",\n        \"term\",\n        \"content\",\n    ];\n\n    /**\n     *\n     */\n    connect() {\n        if (!this.urlTarget.value) {\n            return;\n        }\n\n        let url = new URL(this.urlTarget.value);\n\n        this.sourceTarget.value = this.loadParam(url, 'source');\n        this.mediumTarget.value = this.loadParam(url, 'medium');\n        this.campaignTarget.value = this.loadParam(url, 'campaign');\n        this.termTarget.value = this.loadParam(url, 'term');\n        this.contentTarget.value = this.loadParam(url, 'content');\n    }\n\n    /**\n     *\n     */\n    generate() {\n        let url = new URL(this.urlTarget.value);\n        this.urlTarget.value = url.protocol + '//' + url.host + url.pathname;\n\n        this.addParams('source', this.sourceTarget.value);\n        this.addParams('medium', this.mediumTarget.value);\n        this.addParams('campaign', this.campaignTarget.value);\n        this.addParams('term', this.termTarget.value);\n        this.addParams('content', this.contentTarget.value);\n    }\n\n    /**\n     *\n     * @param text\n     * @returns {string}\n     */\n    slugify(text) {\n        return text.toString().toLowerCase().trim()\n            .replace(/\\s+/g, '-')           // Replace spaces with -\n            .replace(/&/g, '-and-')         // Replace & with 'and'\n            .replace(/[^\\w\\-]+/g, '')       // Remove all non-word chars\n            .replace(/\\-\\-+/g, '-');        // Replace multiple - with single -\n    }\n\n    /**\n     *\n     * @param replace\n     * @param name\n     * @param value\n     */\n    add(replace, name, value) {\n        this.urlTarget.value += `${replace + name}=${encodeURIComponent(value)}`;\n    }\n\n    /**\n     *\n     * @param replace\n     * @param value\n     */\n    change(replace, value) {\n        this.urlTarget.value = this.urlTarget.value.replace(replace, `$1${encodeURIComponent(value)}`);\n    }\n\n    /**\n     *\n     * @param name\n     * @param value\n     */\n    addParams(name, value) {\n        name = `utm_${name}`;\n        value = this.slugify(value);\n\n        if (value.trim().length === 0) {\n            return;\n        }\n\n        let replace = new RegExp(\"([?&]\" + name + \"=)[^&]+\", \"\");\n\n        if (this.urlTarget.value.indexOf(\"?\") === -1) {\n            this.add(\"?\", name, value);\n            return;\n        }\n\n        if (replace.test(this.link)) {\n            this.change(replace, value);\n            return;\n        }\n\n        this.add(\"&\", name, value);\n    }\n\n    /**\n     *\n     * @param url\n     * @param param\n     * @returns {string | null}\n     */\n    loadParam(url, param) {\n        return url.searchParams.get('utm_' + param);\n    }\n\n}","import {Controller} from 'stimulus';\n\nexport default class extends Controller {\n\n\n    /**\n     * Connect Form\n     */\n    connect() {\n        /**\n         * Added focus button for Mac OS firefox/safari\n         */\n        document.querySelectorAll('button[type=submit]').forEach((button) => {\n            button.addEventListener('click', (event) => {\n                event.target.focus();\n            });\n        });\n    }\n\n    /**\n     *\n     */\n    submitByForm(event) {\n        const formId = this.data.get('id');\n        const formElem = document.getElementById(formId);\n        formElem.submit();\n\n        event.preventDefault();\n        return false;\n    }\n\n    /**\n     *\n     * @param event\n     * @returns {boolean}\n     */\n    submit(event) {\n\n        // disable\n        if (this.getActiveElementAttr('data-turbolinks') === 'false') {\n            return true;\n        }\n\n        if (!this.validateForm(event)) {\n            event.preventDefault();\n            return false;\n        }\n\n        if (this.isSubmit) {\n            event.preventDefault();\n            return false;\n        }\n\n        const action = this.loadFormAction();\n\n        if (action === null) {\n            event.preventDefault();\n            return false;\n        }\n\n        this.isSubmit = true;\n        this.animateButton();\n        event.preventDefault();\n\n        const screenEventSubmit = new Event('orchid:screen-submit');\n        event.target.dispatchEvent(screenEventSubmit);\n\n        const form = new FormData(event.target);\n\n        axios.post(action, form, {\n            headers: {\n                'X-Requested-With': null,\n                Accept: 'text/html,application/xhtml+xml,application/xml',\n            },\n        })\n            .then((response) => {\n                const url = response.request.responseURL;\n                window.Turbolinks.controller.cache.put(\n                    url,\n                    Turbolinks.Snapshot.wrap(response.data),\n                );\n                this.isSubmit = false;\n                window.Turbolinks.visit(url, {action: 'restore'});\n            })\n            .catch((error) => {\n                this.isSubmit = false;\n                if (error.response) {\n                    window.history.pushState({error: error.response.responseURL}, '', error.request.responseURL);\n                    Turbolinks.clearCache();\n                    const iframe = document.createElement('iframe');\n                    iframe.className = 'modal block';\n                    document.body.appendChild(iframe);\n                    iframe.contentWindow.document.write(error.response.data);\n                } else {\n                    // eslint-disable-next-line no-console\n                    window.platform.alert('Server error', 'The application could not process your request.', 'danger');\n                    console.error(`Malformed error ${error}`);\n                }\n            });\n\n        return false;\n    }\n\n    /**\n     *\n     */\n    animateButton() {\n        const button = this.data.get('button-animate');\n        const text = this.data.get('button-text') || '';\n\n        if (!button || !document.querySelector(button)) {\n            return;\n        }\n\n        const buttonElement = document.querySelector(button);\n        buttonElement.disabled = true;\n        buttonElement.classList.add('cursor-wait');\n        buttonElement.innerHTML = '<span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>'\n            + `<span class=\"pl-1\">${text}</span>`;\n    }\n\n    /**\n     * Form validation\n     *\n     * @returns {boolean}\n     */\n    validateForm(event) {\n        // Cancellation\n        if (this.getActiveElementAttr('data-novalidate') === 'true') {\n            return true;\n        }\n\n        const message = this.data.get('validation');\n\n        if (!event.target.reportValidity()) {\n            window.platform.alert('Validation error', message);\n\n            return false;\n        }\n\n        return true;\n    }\n\n    /**\n     * Indicating whether the form is submitted or not.\n     *\n     * @returns {boolean}\n     */\n    get isSubmit() {\n        return this.data.get('submit') === 'true';\n    }\n\n    /**\n     *\n     * @param attribute\n     * @returns {string}\n     */\n    getActiveElementAttr(attribute) {\n        return document.activeElement.getAttribute(attribute);\n    }\n\n    /**\n     * Sets the status whether the form is submitted or not.\n     *\n     * @param value\n     */\n    set isSubmit(value) {\n        this.data.set('submit', value);\n    }\n\n    /**\n     * Returns the action address\n     *\n     * @returns {string}\n     */\n    loadFormAction() {\n        const formAction = this.element.getAttribute('action');\n        const activeElementAction = this.getActiveElementAttr('formaction');\n\n        return activeElementAction || formAction;\n    }\n\n    /**\n     *\n     * @param event\n     * @returns {boolean}\n     */\n    disableKey(event) {\n\n        if (this.element.querySelector('[type=submit]')) {\n            return true;\n        }\n\n        if (/textarea/i.test(event.target.tagName)) {\n            return true;\n        }\n\n        if ((event.keyCode || event.which || event.charCode) !== 13) {\n            return true;\n        }\n\n        event.preventDefault();\n        return false;\n    }\n}\n","import {Controller} from 'stimulus';\nimport Turbolinks from 'turbolinks';\nimport axios from 'axios';\n\nexport default class extends Controller {\n    /**\n     *\n     */\n    initialize() {\n        this.turbo();\n        this.axios();\n    }\n\n    /**\n     *\n     */\n    connect() {\n        this.csrf();\n    }\n\n    /**\n     * Initialization & configuration Turbolinks\n     */\n    turbo() {\n        if (!Turbolinks.supported) {\n            console.warn('Turbo links is not supported');\n            return;\n        }\n\n        Turbolinks.start();\n        Turbolinks.setProgressBarDelay(100);\n\n        document.addEventListener('turbolinks:load', () => {\n            this.csrf();\n        });\n    }\n\n    /**\n     * Creating an instance Axios\n     */\n    axios() {\n        window.axios = axios;\n\n\n        // Add a request interceptor\n        window.axios.interceptors.request.use((config) => {\n            // Do something before request is sent\n\n            this.startProgressBar();\n            return config;\n        }, (error) => {\n\n            this.stopProgressBar();\n            // Do something with request error\n            return Promise.reject(error);\n        });\n\n        // Add a response interceptor\n        window.axios.interceptors.response.use((response) => {\n            // Do something with response data\n            this.stopProgressBar();\n            return response;\n        }, (error) => {\n            // Do something with response error\n            this.stopProgressBar();\n            return Promise.reject(error);\n        });\n    }\n\n    /**\n     * We'll load the axios HTTP library which allows us to easily issue requests\n     * to our Laravel back-end. This library automatically handles sending the\n     * CSRF token as a header based on the value of the \"XSRF\" token cookie.\n     */\n    csrf() {\n        const token = document.head.querySelector('meta[name=\"csrf_token\"]');\n\n        if (!token) {\n            return;\n        }\n\n        /**\n         * Next we will register the CSRF Token as a common header with Axios so that\n         * all outgoing HTTP requests automatically have it attached. This is just\n         * a simple convenience so we don't have to attach every token manually.\n         */\n        window.axios.defaults.headers.common['X-CSRF-TOKEN'] = token.content;\n        window.axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';\n    }\n\n    /**\n     *\n     */\n    goToTop() {\n        $('html, body').animate({ scrollTop: 0 }, 'slow');\n    }\n\n    /**\n     *\n     */\n    startProgressBar() {\n        if (!Turbolinks.supported) {\n            return;\n        }\n        Turbolinks.controller.adapter.progressBar.setValue(0);\n        Turbolinks.controller.adapter.progressBar.show();\n    }\n\n    /**\n     *\n     */\n    stopProgressBar() {\n        if (!Turbolinks.supported) {\n            return;\n        }\n        Turbolinks.controller.adapter.progressBar.hide();\n        Turbolinks.controller.adapter.progressBar.setValue(100);\n    }\n}\n","import {Controller} from \"stimulus\";\n\nexport default class extends Controller {\n\n    /**\n     *\n     */\n    connect() {\n        this.targets.forEach(name => {\n            document.querySelector(`[name=\"${name}\"]`)\n                .addEventListener('change', () => {\n                    this.render();\n                });\n        });\n    }\n\n    render() {\n        let params = {};\n\n        this.targets.forEach(name => {\n            params[name] = document.querySelector(`[name=\"${name}\"]`).value;\n        });\n\n        this.asyncLoadData(params);\n    }\n\n    /**\n     *\n     * @param params\n     */\n    asyncLoadData(params) {\n\n        if (!this.data.get('async')) {\n            return;\n        }\n\n        let name = this.data.get('url') + '/' + this.data.get('slug') + '/' + this.data.get('method');\n\n        axios.post(name, params).then((response) => {\n            this.element.querySelector('[data-async]').innerHTML = response.data;\n        });\n    }\n\n    /**\n     *\n     * @returns {any}\n     */\n    get targets() {\n        return JSON.parse(this.data.get('targets'));\n    }\n}\n","import {Controller} from 'stimulus';\n\nexport default class extends Controller {\n\n    /**\n     *\n     * @type {*[]}\n     */\n    static targets = [\"badge\"];\n\n    /**\n     *\n     */\n    initialize() {\n        const count = this.data.get('count');\n\n        localStorage.setItem('profile.notifications', count);\n\n        window.addEventListener('storage', this.storageChanged());\n    }\n\n    /**\n     *\n     */\n    connect() {\n        document.addEventListener(\"turbolinks:load\", () => {\n            this.render();\n        });\n\n\n        this.updateInterval = this.setUpdateInterval();\n        this.render();\n    }\n\n    /**\n     *\n     */\n    disconnect() {\n        clearInterval(this.updateInterval);\n        window.removeEventListener('storage', this.storageChanged());\n    }\n\n    /**\n     *\n     * @returns {string}\n     */\n    storageKey() {\n        return 'profile.notifications';\n    }\n\n    /**\n     *\n     * @returns {Function}\n     */\n    storageChanged() {\n        return (event) => {\n            if (event.key === this.storageKey()) {\n                Turbolinks.clearCache();\n                this.render();\n            }\n        }\n    }\n\n    /**\n     *\n     * @returns {number}\n     */\n    setUpdateInterval() {\n        const url = this.data.get('url');\n        const method = this.data.get('method') || 'get';\n\n        /* Time in seconds */\n        const interval = this.data.get('interval') || 1000;\n\n         return setInterval(() => {\n            axios({method, url}).then((response) => {\n                localStorage.setItem('profile.notifications', response.data.total);\n            });\n        }, interval);\n    }\n\n    /**\n     *\n     */\n    render() {\n        const count = localStorage.getItem('profile.notifications');\n\n        let badge = '<i class=\"icon-circle\"></i>';\n\n        if (count < 10) {\n            badge = count;\n        }\n\n        if(count === null || parseInt(count) === 0){\n            badge = '';\n        }\n\n        this.badgeTarget.innerHTML = badge;\n    }\n}\n","import {Controller} from 'stimulus';\n\nexport default class extends Controller {\n\n    /**\n     *\n     */\n    connect() {\n        const url = this.data.get('url');\n        const method = this.data.get('method') || 'get';\n\n        /* Time in seconds */\n        const interval = this.data.get('interval') || 1000;\n\n        setInterval(() => {\n            axios({ method, url }).then((response) => {\n                this.element.innerHTML = response.data;\n            });\n        }, interval);\n    }\n}\n","import {Controller} from 'stimulus';\n\nexport default class extends Controller {\n\n    static targets = [ \"query\" ];\n\n    /**\n     *\n     * @returns {HTMLElement}\n     */\n    get getResultElement() {\n        return document.getElementById('search-result');\n    }\n\n    /**\n     * Search Event\n     *\n     * @param event\n     */\n    query(event) {\n        const element = this.getResultElement;\n        const startQuery = this.queryTarget.value;\n\n        if (event.target.value === '') {\n            element.classList.remove('show');\n            return;\n        }\n\n        if (event.keyCode === 13) {\n            Turbolinks.visit(platform.prefix(`/search/${this.queryTarget.value}`));\n        }\n\n        this.showResultQuery(startQuery);\n    }\n\n    /**\n     * Event for blur\n     */\n    blur() {\n        const element = this.getResultElement;\n\n        setTimeout(() => {\n            element.classList.remove('show');\n        }, 140);\n    }\n\n    /**\n     * Event for focus\n     *\n     * @param event\n     */\n    focus(event) {\n        if (event.target.value === '') {\n            return;\n        }\n\n        this.showResultQuery(event.target.value);\n    }\n\n    /**\n     *\n     * @param query\n     */\n    showResultQuery(query) {\n\n        const element = this.getResultElement;\n\n        setTimeout(() => {\n            if (query !== this.queryTarget.value) {\n                return;\n            }\n\n            axios\n                .post(platform.prefix(`/search/${query}/compact`))\n                .then((response) => {\n                    element.classList.add('show');\n                    element.innerHTML = response.data;\n                });\n        }, 200);\n    }\n}\n","import {Controller} from 'stimulus';\n\nexport default class extends Controller {\n\n    /**\n     * Stimulus gives the possibility of a change event when the field loses focus\n     */\n    filter(event) {\n        const search = event.target.value.trim().toLowerCase();\n\n        $('.admin-element-item')\n            .hide()\n            .filter((key, item) => $(item).html().trim().toLowerCase().indexOf(search) !== -1)\n            .show();\n\n        $('.admin-element')\n            .show()\n            .filter((key, item) => $(item).children('.list-group').children(':visible').length === 0)\n            .hide();\n    }\n}\n","import {Controller} from 'stimulus';\n\nexport default class extends Controller {\n\n\n    /**\n     *\n     */\n    initialize() {\n        const hiddenColumns = JSON.parse(localStorage.getItem(this.slug));\n\n        this.hiddenColumns = hiddenColumns || [];\n    }\n\n    /**\n     *\n     */\n    connect() {\n        this.allowDefaultHidden();\n        this.renderColumn();\n\n        $('.dropdown-column-menu').click((e) => {\n            e.stopPropagation();\n        });\n    }\n\n    /**\n     * Sets default hidden columns\n     */\n    allowDefaultHidden() {\n        if (localStorage.getItem(this.slug) !== null) {\n            return;\n        }\n\n        this.element.querySelectorAll('input[data-default-hidden=\"true\"]')\n            .forEach((checkbox) => {\n                this.hideColumn(checkbox.dataset.column);\n            });\n    }\n\n    /**\n     *\n     * @param event\n     */\n    toggleColumn(event) {\n\n        const columnName = event.target.dataset.column;\n\n        this.hiddenColumns.includes(columnName)\n            ? this.showColumn(columnName)\n            : this.hideColumn(columnName);\n\n        const columns = JSON.stringify(this.hiddenColumns);\n        this.renderColumn();\n        localStorage.setItem(this.slug, columns);\n    }\n\n    /**\n     *\n     * @param columnName\n     */\n    showColumn(columnName) {\n        this.hiddenColumns = this.hiddenColumns.filter((value) => {\n            return value !== columnName;\n        });\n    }\n\n    /**\n     *\n     * @param columnName\n     */\n    hideColumn(columnName) {\n        this.hiddenColumns.push(columnName);\n    }\n\n    /**\n     * Shows or hides columns\n     */\n    renderColumn() {\n        this.element.querySelectorAll('td[data-column], th[data-column]')\n            .forEach((column) => {\n                column.style.display = '';\n            });\n\n        const showClass = this.hiddenColumns.map(\n            column => `td[data-column=\"${column}\"], th[data-column=\"${column}\"]`,\n        ).join();\n\n        if (showClass.length < 1){\n            return;\n        }\n\n        this.element.querySelectorAll(showClass)\n            .forEach((column) => {\n                column.style.display = 'none';\n            });\n\n        const checkBoxEnable = this.hiddenColumns.map(\n            column => `input[data-column=\"${column}\"]`,\n        ).join();\n\n        this.element.querySelectorAll(checkBoxEnable)\n            .forEach((checkbox) => {\n                checkbox.checked = false;\n            });\n    }\n\n    /**\n     *\n     * @returns {string}\n     */\n    get slug() {\n        return this.data.get('slug');\n    }\n}\n","import {Controller} from 'stimulus';\n\nexport default class extends Controller {\n\n    /**\n     *\n     */\n    connect() {\n        if (!('content' in document.createElement('template'))) {\n            console.warn('Your browser does not support <template>');\n        }\n\n        this.template = this.element.querySelector('#toast');\n\n        this.showAllToasts();\n    }\n\n    /**\n     *\n     * @param title\n     * @param message\n     * @param type\n     */\n    alert(title, message, type = 'warning') {\n        this.toast(`<b>${title}</b><br> ${message}`, type);\n    }\n\n    /**\n     *\n     * @param message\n     * @param type\n     */\n    toast(message, type = 'warning') {\n        const toast = this.template.content.querySelector('.toast').cloneNode(true);\n\n        toast.innerHTML = toast.innerHTML\n            .replace(/{message}/, message)\n            .replace(/{type}/, type);\n\n        this.element.appendChild(toast);\n        this.showAllToasts();\n    }\n\n    showAllToasts() {\n        $('.toast').on('hidden.bs.toast', (event) => {\n            event.target.remove();\n        }).toast('show');\n    }\n}\n","import {Controller} from 'stimulus';\n\nexport default class extends Controller {\n\n    /**\n     *\n     */\n    mouseOver() {\n        $(this.element).tooltip('enable');\n    }\n}\n","import { Controller } from 'stimulus';\n\nexport default class extends Controller {\n\n    /**\n     *\n     * @param event\n     * @returns {*}\n     */\n    targetModal(event) {\n        const target = event.target,\n            parentTarget = event.target.parentElement,\n            key = target.dataset.modalKey || parentTarget.dataset.modalKey;\n\n        this.application.getControllerForElementAndIdentifier(\n            document.getElementById(`screen-modal-${key}`),\n            'screen--modal',\n        ).open({\n            title: target.dataset.modalTitle || parentTarget.dataset.modalTitle,\n            submit: target.dataset.modalAction || parentTarget.dataset.modalAction,\n            params: target.dataset.modalParams || parentTarget.dataset.modalParams || '[]',\n        });\n\n        return event.preventDefault();\n    }\n}\n","import {Controller} from 'stimulus';\nimport {Chart} from 'frappe-charts/dist/frappe-charts.min.esm';\n\nexport default class extends Controller {\n\n    /**\n     *\n     */\n    connect() {\n        this.chart = new Chart(this.data.get('parent'), {\n            title: this.data.get('title'),\n            data: {\n                labels: JSON.parse(this.data.get('labels')),\n                datasets: JSON.parse(this.data.get('datasets')),\n            },\n            type: this.data.get('type'),\n            height: this.data.get('height'),\n\n            maxSlices: JSON.parse(this.data.get('max-slices')),\n\n            valuesOverPoints: JSON.parse(this.data.get('values-over-points')),\n            axisOptions: JSON.parse(this.data.get('axis-options')),\n            barOptions:  JSON.parse(this.data.get('bar-options')),\n            lineOptions:  JSON.parse(this.data.get('line-options')),\n\n            colors: JSON.parse(this.data.get('colors')),\n        });\n\n        this.drawEvent = () => setTimeout(() => {\n            this.chart.draw();\n        }, 100);\n\n        $(document).on('shown.bs.tab', 'a[data-toggle=\"tab\"]', this.drawEvent);\n    }\n\n\n    /**\n     *\n     */\n    export() {\n        this.chart.export();\n    }\n\n    /**\n     *\n     */\n    disconnect() {\n        this.chart.destroy();\n        $(document).off('shown.bs.tab', 'a[data-toggle=\"tab\"]', this.drawEvent);\n    }\n}\n","import {Controller} from 'stimulus';\n\nexport default class extends Controller {\n    static get targets() {\n        return ['filterItem'];\n    }\n\n    /**\n     *\n     * @param event\n     */\n    submit(event) {\n        const screenEventSubmit = new Event('orchid:screen-submit');\n        event.target.dispatchEvent(screenEventSubmit);\n\n        this.setAllFilter();\n        event.preventDefault();\n    }\n\n    onFilterClick(event) {\n        const currentIndex = this.filterItemTargets.findIndex(target => target.classList.contains('show'));\n        const elem = event.currentTarget;\n        const index = parseInt(elem.dataset.filterIndex);\n        const filterItem = this.filterItemTargets[index];\n\n        if (currentIndex !== -1) {\n            // hidden current filter item\n            this.filterItemTargets[currentIndex].classList.remove('show');\n\n            if (currentIndex === index) {\n                return false;\n            }\n        }\n\n        // show and position\n        filterItem.classList.add('show');\n        filterItem.style.top = `${elem.offsetTop}px`;\n        filterItem.style.left = `${elem.offsetParent.offsetWidth - 4}px`;\n        return false;\n    }\n\n    onMenuClick(event) {\n        event.stopPropagation();\n    }\n\n    /**\n     *\n     */\n    setAllFilter() {\n        const formElement = document.getElementById('filters');\n\n        const filters = window.platform.formToObject(formElement);\n        filters.sort = this.getUrlParameter('sort');\n\n        const params = $.param(this.removeEmpty(filters));\n\n        const url = `${window.location.origin + window.location.pathname}?${params}`;\n\n        window.Turbolinks.visit(url, {action: 'replace'});\n    }\n\n    /**\n     *\n     * @param filter\n     * @returns {*}\n     */\n    removeEmpty(filter) {\n        Object.keys(filter).forEach((key) => {\n\n            let value = filter[key];\n\n            if(value === null || value === undefined  || value === ''){\n                delete filter[key]\n            }\n        });\n\n        return filter;\n    }\n\n    /**\n     *\n     * @param event\n     */\n    clear(event) {\n\n        const params = {\n            sort: this.getUrlParameter('sort'),\n        };\n        const url = `${window.location.origin + window.location.pathname}?${params}`;\n\n        window.Turbolinks.visit(url, {action: 'replace'});\n        event.preventDefault();\n    }\n\n    /**\n     *\n     * @param event\n     */\n    clearFilter(event) {\n        const {filter} = event.target.dataset;\n        document.querySelector(`input[name='filter[${filter}]']`).value = '';\n\n        this.element.remove();\n        this.setAllFilter();\n        event.preventDefault();\n    }\n\n    /**\n     *\n     * @param property\n     * @returns {string}\n     */\n    getUrlParameter(property) {\n        const name = property.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n        const regex = new RegExp('[\\\\?&]' + name + '=([^&#]*)');\n        const results = regex.exec(window.location.search);\n        return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n    }\n}\n","import {Controller} from \"stimulus\";\n\nexport default class extends Controller {\n\n    /**\n     *\n     * @type {string[]}\n     */\n    static targets = [\n        \"title\"\n    ];\n\n    /**\n     *\n     */\n    connect() {\n        if (this.element.querySelectorAll('.is-invalid').length > 0) {\n            this.setFormAction(sessionStorage.getItem('last-open-modal'));\n            this.element.classList.remove('fade', 'in');\n            $(this.element).modal('show');\n\n            $(this.element).on('hide.bs.modal', () => {\n                if (!this.element.classList.contains('fade')) {\n                    this.element.classList.add('fade', 'in');\n                }\n            })\n        }\n    }\n\n    /**\n     *\n     * @param options\n     */\n    open(options) {\n        if (typeof options.title !== \"undefined\") {\n            this.titleTarget.textContent = options.title;\n        }\n\n        this.setFormAction(options.submit);\n\n        if (this.data.get('async')) {\n            this.asyncLoadData(JSON.parse(options.params));\n        }\n\n        $(this.element).modal('toggle');\n    }\n\n    /**\n     *\n     * @param params\n     */\n    asyncLoadData(params) {\n\n        let name = this.data.get('url') + '/' + this.data.get('slug') + '/' + this.data.get('method');\n\n        axios.post(name, params).then((response) => {\n            this.element.querySelector('[data-async]').innerHTML = response.data;\n        });\n    }\n\n    /**\n     *\n     * @param action\n     */\n    setFormAction(action) {\n        this.element.querySelector('form').action = action;\n        sessionStorage.setItem('last-open-modal', action);\n    }\n}\n","import { Controller } from 'stimulus';\n\nexport default class extends Controller {\n    /**\n     *\n     */\n    connect() {\n        const tabs = this.tabs();\n        const activeId = tabs[window.location.href][this.data.get('slug')];\n\n        if (activeId !== null) {\n            $(`#${activeId}`).tab('show');\n        }\n    }\n\n    /**\n     *\n     * @param event\n     */\n    setActiveTab(event) {\n        const activeId = event.target.id;\n        const tabs = this.tabs();\n\n        tabs[window.location.href][this.data.get('slug')] = activeId;\n        localStorage.setItem('tabs', JSON.stringify(tabs));\n        $(`#${activeId}`).tab('show');\n\n        return event.preventDefault();\n    }\n\n    /**\n     *\n     * @returns {any}\n     */\n    tabs() {\n        let tabs = JSON.parse(localStorage.getItem('tabs'));\n\n        if (tabs === null) {\n            tabs = {};\n        }\n\n        if (tabs[window.location.href] === undefined) {\n            tabs[window.location.href] = {};\n        }\n\n        if (tabs[window.location.href][this.data.get('slug')] === undefined) {\n            tabs[window.location.href][this.data.get('slug')] = null;\n        }\n\n        return tabs;\n    }\n}\n","export default function platform() {\n    return {\n\n        /**\n         *\n         * @param path\n         * @returns {*}\n         */\n        prefix(path) {\n            let prefix = document.head.querySelector('meta[name=\"dashboard-prefix\"]');\n\n            if (prefix.content.charAt(0) !== '/'.charAt(0)) {\n                prefix = `/${prefix.content}`;\n            } else if (path.charAt(0) === '/'.charAt(0)) {\n                path = path.slice(1)\n            }\n\n            return `${location.protocol}//${location.hostname}${location.port ? `:${location.port}` : ''}${prefix.content}${path}`;\n        },\n\n        /**\n         *\n         * @param title\n         * @param message\n         * @param type\n         */\n        alert(title, message, type = 'warning') {\n          let toastWrapper = document.querySelector('[data-controller=\"layouts--toast\"]');\n          let toastController = application.getControllerForElementAndIdentifier(toastWrapper, 'layouts--toast');\n          toastController.alert(title, message, type);\n        },\n\n        /**\n         *\n         * @param elem\n         */\n        formToObject(elem) {\n            let output = {};\n\n            new FormData(elem).forEach((value, key) => {\n\n                    if(!Object.prototype.hasOwnProperty.call(output, key)){\n                        output[key] = value;\n                        return;\n                    }\n\n                    let current = output[key];\n\n                    if (!Array.isArray(current)) {\n                        current = output[key] = [current];\n                    }\n\n                    current.push(value);\n                }\n            );\n\n            return output;\n        },\n\n    };\n}\n","// removed by extract-text-webpack-plugin","/* (ignored) */"],"sourceRoot":""}
